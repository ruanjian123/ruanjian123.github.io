{"version":3,"sources":["utils/storage.js","contexts/store/index.js","components/MIconView/index.js","contexts/navi/index.js","pages/CategoryPage/index.js","components/AutoCenterView/index.js","components/VisualBoxView/index.js","models/AppModel.js","models/DebugModel.js","utils/events.js","models/SongSheetSongModel.js","models/MusicPlayerModel.js","models/UserModel.js","config.js","loader/BaseLoader.js","loader/UserLoader.js","models/CategoryModel.js","loader/CategoryLoader.js","models/BookModel.js","loader/BookShelfLoader.js","global-state.js","utils/shttp.js","utils/utils.js","services/index.js","services/user.js","services/public.js","utils/cache.js","loader/BookLoader.js","components/EmptyView/index.js","components/SwitchView/index.js","components/LoaderListView/index.js","business/ChapterItemView/index.js","models/ChapterModel.js","loader/ChapterLoader.js","pages/AuthLoginPage/index.js","business/BookItemView/index.js","loader/BookListLoader.js","models/GroupTreeModel.js","loader/GroupTreeLoader.js","group/FilterTag/index.js","group/FitlerRow/index.js","business/BookItemView/Normal.js","group/TreeNode/index.js","group/TabPane/index.js","group/index.js","group/Filter/index.js","group/Picker/index.js","group/Tab/index.js","loader/GroupListLoader.js","business/GroupItemView/index.js","models/TodoModel.js","loader/TodoListLoader.js","business/TodoItemView/index.js","pages/TodoAddPage/index.js","models/SongSheetModel.js","loader/SongSheetLoader.js","loader/SongListLoader.js","models/ResourceModel.js","business/SongSheetItemView/index.js","business/SongItemView/index.js","loader/SongSheetSongLoader.js","pages/index.js","pages/HomePage/index.js","pages/BookInfoPage/index.js","pages/BookCatalogPage/index.js","pages/BookChapterPage/index.js","pages/BookSearchPage/index.js","pages/GroupTreePage/index.js","pages/GroupListPage/index.js","pages/MusicPage/index.js","pages/SongSheetPage/index.js","pages/UserCenterPage/index.js","pages/UserShelfPage/index.js","pages/SecurePage/index.js","pages/TodoPage/index.js","pages/UserSettingPage/index.js","contexts/router/index.js","components/Dragger/index.js","contexts/music/index.js","contexts/debug/index.js","components/SudokuView/index.js","components/LockerView/index.js","layout.js","router.js","service-worker.js","index.js"],"names":["module","exports","setValue","key","value","type","getTime","window","localStorage","setItem","JSON","stringify","getValue","str","getItem","test","o","parse","Date","err","this","removeKey","removeItem","Context","React","createContext","useStoreContext","useReactContext","className","inline","size","style","after","before","restProps","Icon","startsWith","Faicons","Mdicons","IOicons","display","fontSize","alignItems","justifyContent","margin","Navi","prop","height","padding","backgroundColor","borderBottom","flex","showBack","onClick","console","log","router","back","textAlign","fontWeight","title","children","useNaviContext","styles","bigCate","borderLeftWidth","borderLeftStyle","borderLeftColor","choosed","subCate","width","float","boxSizing","SubCate","cates","map","cate","id","src","poster","alt","flexDirection","paddingLeft","color","paddingBottom","name","count","visible","Model","types","model","selectedMenu","optional","string","fullScreen","boolean","accessTokenName","refreshTokenName","lockerName","baseURL","account","accessToken","refreshToken","musicModeName","leaveTS","number","now","config","isLockerOpen","isLockerLocked","lockerLength","lockerSeconds","lockerPin","views","self","actions","initLocker","opt","k","setLocker","lock","storage","setLocked","locked","setLockerPin","pin","setLockerLength","len","setLockerSeconds","seconds","setMenu","setBaseURL","url","shttp","defaults","resetLeaveTS","logout","setAccessToken","token","setRefreshToken","setMusicModeName","maps","array","frozen","messages","showMap","append","message","push","update","found","find","item","clear","toggleMap","EventEmitter","SongSheetSongModel","ssid","uid","uname","playing","order","toggleStatus","currentPlayUrl","mode","single","songs","SongModel","mPlayer","CIRCLE","RANDOM","ONE","LIST","event","PLAY","PLAY_SINGLE","PAUSE","setUrl","store","app","setSheet","sheet","playMusicSingle","events","emit","playMusic","playNext","length","playRandom","Math","round","random","pauseMusic","setMode","avatar","process","production","host","development","menus","path","icon","big","hideMenu","cache","book","catalog","chapter","tree","createItemsLoader","fn","unionModel","items","page","isEnded","isLoading","state","enumeration","sort","error","maybe","code","setData","data","request","flow","option","query","params","undefined","res","ended","Config","isDebug","toString","toggleSort","remove","index","slice","filter","idx","refresh","loadMore","createItemLoader","maybeNull","UserModel","a","services","getUserInfo","pid","tid","late","getCategoryList","desc","tags","status","createdAt","words","comments","collections","chapters","BookModel","getMybooks","AppModel","create","music","MusicPlayerModel","debug","DebugModel","target","userLoader","UserLoader","categoryLoader","CategoryLoader","bookShelfLoader","BookShelfLoader","axios","withCredentials","timeout","interceptors","use","globalStore","method","headers","Promise","resolve","response","authorization","result","refresh_token","try","newResult","stringfyQuery","search","substr","login","password","register","getBookFirstChapter","getBookChapter","bid","getTodos","forEach","d","startedAt","endedAt","createTodo","updateTodo","destroyTodo","addSongToSheet","removeSheetSong","getBookInfo","getBookCatalog","getBookList","c","getGroupTree","group_id","getGroups","getSongSheets","getSongSheet","it","getSongs","localforage","require","Store","ns","api","createInstance","ts","iterate","bookCache","caches","getCache","renderEmpty","loader","options","isEmpty","text","holder","loading","dataProvider","ListView","DataSource","rowHasChanged","row1","row2","MyBody","props","renderItem","onScroll","dataSource","cloneWithRows","EmptyView","renderEmptyView","SwitchView","AutoCenterView","overflow","renderRow","rowData","sectionId","rowId","renderBodyComponent","initialListSize","Infinity","onEndReachedThreshold","onEndReached","pullToRefresh","refreshing","onRefresh","renderFooter","renderList","nth","pushView","isApproved","content","preId","nextId","Chapter","Toast","info","history","pathname","marginRight","GroupModel","tree_id","parent_id","view","refs","attrs","hide_title","allowChange","selected","columns","showCount","more","channel_id","keyword","GroupTreeModel","FilterTag","selectTag","FilterRow","onQueryChange","child","whiteSpace","overflowX","overflowY","useRouterContext","Node","isChild","useLocalStore","showMenu","showChildren","position","onContextMenu","e","preventDefault","marginLeft","border","borderRadius","zIndex","left","top","right","bottom","openGroupEdit","destroyGroup","borderTopLeftRadius","borderLeft","transform","borderBottomLeftRadius","marginTop","borderColor","borderStyle","borderTopWidth","borderRightWidth","borderBottomWidth","TabPane","AutoView","tag","Object","assign","VisualBoxView","tabs","ch","sub","View","RenderGroups","emptyView","priority","isFinish","isDelay","notify","giveup","deletedAt","finishToggle","then","TodoAddPage","todo","getStateKey","onChange","extra","label","Item","autoHeight","checked","animating","borderTop","stopPropagation","list","ActionSheet","showActionSheetWithOptions","maskClosable","cancelButtonIndex","component","isLogin","isRegister","Modal","prompt","onPress","val","placeholder","defaultValue","onBlur","disabled","localStore","selectIndex","useEffect","borderRight","minWidth","BookLoader","firstLoading","shouldFix","ChapterModel","sortASC","LoaderListView","ChapterItemView","parseInt","toggleLoading","ChapterLoader","pop","percent","container","useRef","setTimeout","current","scrollTop","ref","lineHeight","letterSpacing","textIndent","scrollHeight","offsetHeight","toFixed","opacity","GroupTreeLoader","booksLoader","BookListLoader","selectionId","BookItemView","useEffectOnce","GroupListLoader","GroupItemView","SongSheetLoader","songListLoader","SongListLoader","SongSheetItemView","SongItemView","gStore","SongSheetSongLoader","onTouchStart","onTouchMove","location","reload","useProvider","todoLoader","TodoListLoader","TodoItemView","renderHeader","rules","pages","reg","path2reg","useState","route","i","rule","m","exec","userClick","backToRoot","goBack","getBackToRootLocation","gotoLoginTarget","replaceView","replace","Dragger","cb","dragger","started","offsetLeft","offsetTop","node","addEventListener","TextTrackCue","touches","clientX","clientY","MusicPlayer","player","MODE","EVENT","pos","musicStore","showModePop","timer","on","play","pause","sstore","max","clearTimeout","mask","placement","overlay","onVisibleChange","onSelect","onCanPlay","onLoadedMetadata","onLoadedData","onProgress","onEnded","controls","preload","Debug","debugStore","keys","char","paddingTop","marginBottom","join","handler","Locker","animate","split","tintColor","unselectedTintColor","tabBarPosition","barTintColor","menu","selectedIcon","App","RouterContext","navi","NaviContext","Provider","to","NoMatch","Index","basename","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ErrorBoundary","hasError","lastTS","isDesktop","setState","document","getElementById","isDeskTop","hidden","toast","Component","ReactDOM","render","StoreContext","URL","href","origin","fetch","contentType","get","indexOf","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.63b332a8.chunk.js","sourcesContent":["module.exports = {\n  setValue(key, value) {\n    let type = 'string'\n    switch (typeof value) {\n      case 'number': type = 'number'; break\n      case 'date': type = 'date'; value = value.getTime(); break\n      case 'object': type = 'json'; break\n      default: break\n    }\n    window.localStorage.setItem(key, JSON.stringify({ type, value }))\n  },\n  getValue(key) {\n    let str = window.localStorage.getItem(key)\n    let value = null\n    if (str !== null && /^\\{.*\\}$/.test(str)) {\n      try {\n        const o = JSON.parse(str)\n        if (o.type === 'date') {\n          value = new Date(o.value)\n        } else {\n          value = o.value\n        }\n      } catch (err) {\n        this.removeKey(key)\n      }\n    } else {\n      this.removeKey(key)\n    }\n    return value\n  },\n  removeKey(key) {\n    window.localStorage.removeItem(key)\n  }\n}","import React, { useContext as useReactContext, useState } from 'react'\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nexport function useProvider(store) {\r\n  let [state] = useState(store)\r\n  return [state, Context]\r\n}\r\n\r\nexport function useStoreContext() {\r\n  return useReactContext(Context)\r\n}","import React from 'react'\nimport * as IOicons from 'react-icons/io'\nimport * as Faicons from 'react-icons/fa'\nimport * as Mdicons from 'react-icons/md'\nimport './index.css'\n\n// https://react-icons.netlify.com/#/icons/fa\n\n// const types = {\n//   home: require('./home.svg'),\n//   user: require('./user.svg'),\n//   map: require('./map.svg'),\n//   fire: require('./fire.svg'),\n//   search: require('./search.svg'),\n//   setting: require('./setting.svg'),\n// };\n\n// export default function ({ type, className = '', size = 'md', ...restProps }) {\n//   return (<svg className={`am-icon am-icon-${type.substr(1)} am-icon-${size} ${className}`} {...restProps}>\n//     <use xlinkHref={require('./home.svg')} />\n//   </svg>)\n// }\n\nexport default function ({ type, className = '', inline = false, size = 'sm', style = {}, after = '', before = '', ...restProps }) {\n  const Icon = type.startsWith('Fa') ? Faicons[type] : (type.startsWith('Md') ? Mdicons[type] : IOicons[type])\n  return <div style={{ display: inline ? 'inline-block' : 'flex', fontSize: size === 'md' ? '1.5rem' : (size === 'bg' ? '2rem' : '1.1rem'), alignItems: 'center', justifyContent: 'center', ...style, }} className={`${className}`} {...restProps}>\n    {before}<Icon style={{ margin: '0 4px', }} />{after}\n  </div>\n}","import React, { useContext as useReactContext } from 'react'\r\nimport MIconView from 'components/MIconView'\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nfunction Navi(prop) {\r\n  return (\r\n    <div className=\"dd-common-alignside\" style={{ height: 45, padding: '0 15px', backgroundColor: 'white', borderBottom: '1px solid #eee' }}>\r\n      <div style={{ flex: 1 }}>\r\n        <div style={{ display: prop.showBack === false ? 'none' : 'inline-block' }}>\r\n          <MIconView type=\"FaChevronLeft\" onClick={() => { console.log(prop); prop.router.back() }} />\r\n        </div>\r\n      </div>\r\n      <div style={{ flex: 1, textAlign: 'center', fontSize: 16, fontWeight: '600' }}>{prop.title}</div>\r\n      <div style={{ flex: 1, textAlign: 'right' }}>{prop.children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function createNaviProvider() {\r\n  return [Navi, Context]\r\n}\r\n\r\nexport function useNaviContext() {\r\n  return useReactContext(Context)\r\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport { useStoreContext } from 'contexts/store'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport 'components/common.css'\r\n\r\nconst styles = {\r\n  bigCate: {\r\n    margin: '10px 0',\r\n    padding: '0 20px',\r\n    borderLeftWidth: 2,\r\n    borderLeftStyle: 'solid',\r\n    borderLeftColor: 'transparent',\r\n  },\r\n  choosed: {\r\n    borderLeftColor: 'red',\r\n  },\r\n  subCate: {\r\n    width: '50%',\r\n    float: 'left',\r\n    padding: '10px',\r\n    boxSizing: 'border-box',\r\n  }\r\n}\r\n\r\nfunction SubCate({ cates, router }) {\r\n  if (cates) {\r\n    return cates.children.map(cate => <div key={cate.id} className=\"full-width\" style={styles.subCate}>\r\n      <img src={cate.poster} alt=\"\" style={{ width: 60, height: 70, backgroundColor: '#bbb' }} />\r\n      <div className=\"dd-common-centerXY\" style={{ flexDirection: 'column', alignItems: 'start', paddingLeft: 10, }}>\r\n        <div style={{ fontSize: '1.2em', color: 'black', fontWeight: 'bold', paddingBottom: 5 }}>{cate.name}</div>\r\n        <div>{cate.count}部</div>\r\n      </div>\r\n    </div>)\r\n  } else {\r\n    return null\r\n  }\r\n}\r\nexport default function () {\r\n  const Navi = useNaviContext()\r\n  const store = useStoreContext()\r\n  const router = useRouterContext()\r\n  const loader = store.categoryLoader\r\n  const localStore = useLocalStore(() => ({\r\n    selectIndex: 0,\r\n    count: 0,\r\n  }))\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title=\"分类\" router={router}>\r\n        <div style={{ flex: 1, textAlign: 'right' }} onClick={() => router.pushView('/root/book/search', null, { hideMenu: true, })}>全部作品</div>\r\n      </Navi>\r\n      <div className=\"full-height-auto\" style={{ display: 'flex', flexDirection: 'row', flex: 1 }}>\r\n        <div style={{ borderRight: '1px solid #ccc', minWidth: 80 }}>\r\n          {loader.items.map((item, index) => <div\r\n            key={item.id}\r\n            style={{ ...styles.bigCate, ...(index === localStore.selectIndex ? styles.choosed : {}) }}\r\n            onClick={() => localStore.selectIndex = index}\r\n          >\r\n            {item.name}\r\n          </div>)}\r\n        </div>\r\n        <div style={{ flex: 1, height: '100%', overflow: 'auto' }} className=\"smooth\">\r\n          <div style={{ padding: 20 }}>总共{localStore.count}部</div>\r\n          <SubCate router={router} cates={loader.items[localStore.selectIndex]} />\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport 'components/common.css'\r\n\r\nexport default function ({ children }) {\r\n  return <div className=\"dd-common-centerXY\">\r\n    {children}\r\n  </div>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\n\r\nexport default function ({ visible, children }) {\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        {visible && children}\r\n      </Fragment>\r\n    }}\r\n  </Observer>\r\n}","import { types } from 'mobx-state-tree'\nimport shttp from '../utils/shttp'\nimport storage from '../utils/storage'\n\nconst Model = types.model({\n  selectedMenu: types.optional(types.string, 'book-shelf'),\n  fullScreen: types.optional(types.boolean, false),\n  accessTokenName: types.optional(types.string, 'access-token'),\n  refreshTokenName: types.optional(types.string, 'refresh-token'),\n  lockerName: types.optional(types.string, 'locker'),\n  baseURL: types.optional(types.string, '/'),\n  // 账号相关\n  account: types.optional(types.string, ''),\n  accessToken: types.optional(types.string, ''),\n  refreshToken: types.optional(types.string, ''),\n  // 音乐播放器相关\n  musicModeName: types.optional(types.string, 'music-mode'),\n\n  leaveTS: types.optional(types.number, Date.now() - 60 * 6),\n  // 软件锁相关\n  config: types.model({\n    isLockerOpen: types.optional(types.boolean, true),\n    isLockerLocked: types.optional(types.boolean, false),\n    lockerLength: types.optional(types.number, 6),\n    lockerSeconds: types.optional(types.number, 1000 * 60 * 30),\n    lockerPin: types.optional(types.string, '789654'),\n  }, {}),\n}).views(self => ({\n  get isLogin() {\n    return !!self.accessToken\n  },\n})).actions(self => {\n  // locker相关操作\n  return {\n    initLocker(opt = {}) {\n      for (let k in opt) {\n        self.config[k] = opt[k]\n      }\n    },\n    setLocker(lock) {\n      self.config.isLockerOpen = lock\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLocked(locked) {\n      self.config.isLockerLocked = locked\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLockerPin(pin) {\n      self.config.lockerPin = pin\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLockerLength(len) {\n      self.config.lockerLength = len\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLockerSeconds(seconds) {\n      self.config.lockerSeconds = seconds\n      storage.setValue(self.lockerName, self.config)\n    },\n  }\n}).actions(self => {\n  return {\n    setMenu(name) {\n      self.selectedMenu = name\n    },\n    setBaseURL(url) {\n      self.baseURL = url\n      shttp.defaults.baseURL = url\n      storage.setValue('baseURL', url)\n    },\n    resetLeaveTS() {\n      self.leaveTS = Date.now()\n    }\n  }\n}).actions(self => {\n  // 用户相关配置\n  return {\n    logout() {\n      self.accessToken = ''\n      self.refreshToken = ''\n      storage.removeKey(self.accessTokenName)\n      storage.removeKey(self.refreshTokenName)\n    },\n    setAccessToken(token) {\n      // {\"type\":\"string\",\"value\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoidXNlciIsImlkIjoxLCJ0b2tlbiI6ImIyNGE3MjFhMGZkZDEzZmYwNTc2OTMzMzUyZGMwNzhiYmM3NTUxNGMiLCJpYXQiOjE1NjU1MjAxMDYsImV4cCI6MTU2NTYwNjUwNn0.FxS0gcrtuNkpCPM6LQ1Al7DLUWEEW7v77IKEitXORN4\"}\n      self.accessToken = token\n      storage.setValue(self.accessTokenName, token)\n    },\n    setRefreshToken(token) {\n      self.refreshToken = token\n      storage.setValue(self.refreshTokenName, token)\n    }\n  }\n}).actions(self => ({\n  setMusicModeName(type) {\n    storage.setValue(self.musicModeName, type)\n  },\n}))\n\nexport default Model","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  maps: types.array(types.frozen({})),\r\n  messages: types.array(types.string),\r\n  showMap: types.optional(types.boolean, false),\r\n}).actions(self => ({\r\n  append(message) {\r\n    self.messages.push(message)\r\n  },\r\n  update(key, value) {\r\n    const found = self.maps.find(item => item.key === key)\r\n    if (found) {\r\n      found.value = value\r\n    } else {\r\n      self.maps.push({ key, value })\r\n    }\r\n  },\r\n  clear() {\r\n    self.messages = []\r\n    self.map = {}\r\n  },\r\n  toggleMap() {\r\n    self.showMap = !self.showMap\r\n  }\r\n}))\r\n\r\nexport default Model","import { EventEmitter } from 'events'\r\n\r\nexport default new EventEmitter()","import { types } from 'mobx-state-tree'\r\n\r\nconst SongSheetSongModel = types.model('SongSheetSong', {\r\n  id: types.string,\r\n  ssid: types.string,\r\n  uid: types.optional(types.string, ''),\r\n  uname: types.string,\r\n  title: types.string,\r\n  url: types.string,\r\n  poster: types.string,\r\n  playing: types.optional(types.boolean, false),\r\n  order: types.optional(types.number, 0),\r\n}).views(self => ({\r\n  get value() {\r\n    return {\r\n      id: self.id,\r\n      ssid: self.ssid,\r\n      title: self.title,\r\n      url: self.url,\r\n      poster: self.poster,\r\n      uid: self.uid,\r\n      uname: self.uname,\r\n    }\r\n  },\r\n})).actions(self => ({\r\n  toggleStatus() {\r\n    self.playing = !self.playing\r\n  }\r\n}))\r\n\r\nexport default SongSheetSongModel","import { types } from 'mobx-state-tree'\r\nimport events from 'utils/events'\r\nimport SongModel from './SongSheetSongModel'\r\nimport store from '../global-state'\r\n\r\nconst Model = types.model('musicPlayer', {\r\n  currentPlayUrl: types.optional(types.string, ''),\r\n  mode: types.optional(types.string, 'list'),\r\n  single: false,\r\n  order: types.optional(types.number, 0),\r\n  songs: types.array(SongModel),\r\n  mPlayer: types.frozen(),\r\n  type: types.optional(types.frozen(), {\r\n    CIRCLE: 'circle',\r\n    RANDOM: 'random',\r\n    ONE: 'one',\r\n    LIST: 'list',\r\n  }),\r\n  event: types.optional(types.frozen(), {\r\n    PLAY: 'music-play',\r\n    PLAY_SINGLE: 'music-play-single',\r\n    PAUSE: 'music-pause',\r\n  }),\r\n}).views(self => ({\r\n  get url() {\r\n    return self.currentPlayUrl\r\n  },\r\n})).actions(self => {\r\n  // 音乐播放器相关\r\n  return {\r\n    setUrl(url, order = 0) {\r\n      self.order = order\r\n      self.currentPlayUrl = store.app.baseURL + url\r\n    },\r\n    setSheet(sheet) {\r\n      self.songs = sheet\r\n    },\r\n    playMusicSingle(url, order = 0) {\r\n      self.single = true\r\n      self.order = order\r\n      events.emit(self.event.PLAY_SINGLE, url, order)\r\n    },\r\n    playMusic(url, order = 0) {\r\n      self.single = false\r\n      self.order = order\r\n      events.emit(self.event.PLAY, url, order)\r\n    },\r\n    playNext() {\r\n      console.log(self.mode, self.order, self.songs.length)\r\n      if (self.mode === 'circle' && self.order + 1 >= self.songs.length) {\r\n        self.order = 0\r\n        events.emit(self.event.PLAY, self.songs[self.order].url, self.order)\r\n      } else if (self.order + 1 < self.songs.length) {\r\n        self.order++\r\n        events.emit(self.event.PLAY, self.songs[self.order].url, self.order)\r\n      }\r\n    },\r\n    playRandom() {\r\n      self.order = Math.round(Math.random() * self.songs.length)\r\n      events.emit(self.event.PLAY, self.songs[self.order], self.order)\r\n    },\r\n    pauseMusic() {\r\n      events.emit(self.event.PAUSE)\r\n    },\r\n    setMode(type) {\r\n      store.app.setMusicModeName(type)\r\n      self.mode = type\r\n    },\r\n  }\r\n})\r\n\r\nexport default Model","import { types } from 'mobx-state-tree'\n\nconst Model = types.model({\n  avatar: types.optional(types.string, ''),\n  name: types.optional(types.string, ''),\n  id: types.optional(types.string, ''),\n})\n\nexport default Model","export default {\n  get isDebug() {\n    return process.env.NODE_ENV !== 'production'\n  },\n  console: true,\n  config: {\n    production: {\n      host: '/',\n    },\n    development: {\n      host: '/',\n    }\n  },\n  menus: [\n    {\n      name: 'shelf',\n      path: '/root/shelf',\n      title: '书架',\n      icon: 'FaBook'\n    },\n    {\n      name: 'groups',\n      path: '/root/groups',\n      title: '频道',\n      icon: 'FaList'\n    },\n    {\n      name: 'music',\n      path: '/root/music',\n      title: '音乐',\n      big: true,\n      hideMenu: true,\n      icon: 'FaPlayCircle'\n    },\n    {\n      name: 'todos',\n      path: '/root/todos',\n      title: '任务',\n      hideMenu: true,\n      icon: 'FaTasks'\n    },\n    {\n      name: 'my',\n      path: '/root/my',\n      title: '我的',\n      icon: 'FaUserAlt'\n    },\n  ],\n  cache: {\n    book: {},\n    catalog: {},\n    chapter: {},\n    tree: {},\n  }\n}","import { flow, types } from 'mobx-state-tree'\nimport Config from 'config'\n\nfunction createItemsLoader(model, fn) {\n  const unionModel = types.model({\n    // 数据数组\n    items: types.optional(types.array(model), []),\n    // 当前页码\n    page: types.optional(types.number, 1),\n    // 是否完毕\n    isEnded: types.optional(types.boolean, false),\n    // 是否加载中\n    isLoading: types.optional(types.boolean, false),\n    // 请求状态\n    state: types.optional(types.enumeration(['success', 'fail']), 'success'),\n    // 操作类型\n    type: types.optional(types.enumeration(['refresh', 'more']), 'refresh'),\n    // 排列方向\n    sort: types.optional(types.enumeration(['asc', 'desc']), 'asc'),\n    // 错误信息\n    error: types.maybe(types.model({\n      code: types.maybe(types.string),\n      message: types.maybe(types.string)\n    })),\n  }).views(self => {\n    return {\n      get isEmpty() {\n        return !(self.items && self.items.length > 0)\n      },\n      get length() {\n        return self.items.length\n      },\n    }\n  }).actions(self => {\n    return {\n      setData(data) {\n        self.items = data || []\n      }\n    }\n  }).actions(self => {\n    const request = flow(function* (option = {}, type = 'refresh') {\n      const { query = {}, params = {}, data = {} } = option\n      if (self.isLoading || (self.isEnded && type === 'more')) {\n        return\n      }\n      self.type = type\n      self.error = undefined\n      self.isLoading = true\n      self.state = 'success'\n      query.page = self.page\n      let res = null\n      try {\n        res = yield fn({ query, params, data }, type)\n        let { ended, items } = res\n        self.isEnded = !!ended\n        if (type === 'refresh') {\n          // 刷新\n          self.page = 1\n          self.items = items\n        } else if (items.length > 0) {\n          // 加载更多\n          self.page = params.page\n          self.items.push(...items)\n        } else {\n          self.state = 'fail'\n          self.error = { code: 1, message: 'x' }\n        }\n      } catch (err) {\n        if (Config.isDebug && Config.console) {\n          console.log(err, 'loader')\n        }\n        // 加载失败\n        self.state = 'fail'\n        if (err.code) {\n          self.error = { code: err.code, message: err.message || err.toString() }\n        } else {\n          self.error = { code: 'unknown', message: '未知错误' }\n        }\n      } finally {\n        self.isLoading = false\n      }\n      return res\n    })\n    return {\n      clear() {\n        self.page = 1\n        self.items = []\n      },\n      toggleSort() {\n        self.sort = self.sort === 'asc' ? 'desc' : 'asc'\n      },\n      remove(index) {\n        self.items = self.items.slice().filter((item, idx) => +index !== +idx)\n      },\n      append(item) {\n        self.items.push(item)\n      },\n      async refresh(option) {\n        return await request(option, 'refresh')\n      },\n      async loadMore(option) {\n        self.page++\n        return await request(option, 'more')\n      }\n    }\n  })\n\n  return types.optional(unionModel, {})\n}\n\nfunction createItemLoader(model, fn) {\n  const unionModel = types.model({\n    item: types.maybeNull(model),\n    // 是否加载中\n    isLoading: types.optional(types.boolean, false),\n    // 请求状态\n    state: types.optional(types.enumeration(['success', 'fail']), 'success'),\n    // 操作类型\n    type: types.optional(types.enumeration(['refresh']), 'refresh'),\n    error: types.maybe(types.model({\n      code: types.maybe(types.string),\n      message: types.maybe(types.string),\n    }))\n  }).views(self => {\n    return {\n      get isEmpty() {\n        return !self.item\n      },\n      get fn() {\n        return fn\n      }\n    }\n  }).actions(self => {\n    return {\n      setData(data) {\n        self.item = data\n      },\n    }\n  }).actions(self => {\n    const request = flow(function* (option = {}, type = 'refresh') {\n      const { query, params, data } = option\n      if (self.isLoading || (self.isEnded && type === 'more')) {\n        return\n      }\n      if (self.isLoading) {\n        return\n      }\n      self.type = type\n      self.error = undefined\n      self.isLoading = true\n      self.state = 'success'\n      let res = null\n      try {\n        res = yield fn({ query, params, data }, type)\n        let { item } = res\n        if (item) {\n          self.item = item\n        } else {\n          self.state = 'fail'\n          self.error = { code: 1, message: 'x' }\n        }\n      } catch (err) {\n        if (Config.isDebug && Config.console) {\n          console.log(err, 'loader')\n        }\n        self.state = 'fail'\n        if (err.code) {\n          self.error = { code: err.code, message: err.message }\n        } else {\n          self.error = { code: 'unknown', message: '未知错误' }\n        }\n      } finally {\n        self.isLoading = false\n      }\n      return res\n    })\n    return {\n      clear() {\n        self.item = null\n      },\n      async refresh(option) {\n        return await request(option, 'refresh')\n      }\n    }\n  })\n  return types.optional(unionModel, {})\n}\nexport {\n  createItemsLoader,\n  createItemLoader,\n}","import services from '../services/index'\r\nimport UserModel from '../models/UserModel'\r\nimport { createItemLoader } from './BaseLoader'\r\n\r\nexport default createItemLoader(UserModel, async (params) => {\r\n    return services.getUserInfo(params)\r\n})","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  id: types.string,\r\n  pid: types.string,\r\n  tid: types.string,\r\n  name: types.string,\r\n  sort: types.number,\r\n  poster: types.optional(types.string, ''),\r\n  count: types.optional(types.number, 0),\r\n  children: types.maybe(types.late(() => types.array(Model)), []),\r\n})\r\n\r\nexport default Model","import services from 'services'\r\nimport CategoryModel from 'models/CategoryModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(CategoryModel, async (params) => {\r\n  return services.getCategoryList(params)\r\n})","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  id: types.string,\r\n  uid: types.string,\r\n  uname: types.string,\r\n  // avatar: types.string,\r\n  title: types.string,\r\n  poster: types.string,\r\n  desc: types.string,\r\n  tags: types.array(types.string),\r\n  status: types.enumeration(['loading','finished']),\r\n  createdAt: types.string,\r\n  words: types.number,\r\n  comments: types.number,\r\n  collections: types.number,\r\n  chapters: types.number,\r\n})\r\n\r\nexport default Model","import services from 'services/index'\r\nimport BookModel from 'models/BookModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(BookModel, async (params) => {\r\n  return services.getMybooks(params)\r\n})","import AppModel from 'models/AppModel'\nimport DebugModel from 'models/DebugModel'\nimport MusicPlayerModel from 'models/MusicPlayerModel'\nimport UserLoader from 'loader/UserLoader'\nimport CategoryLoader from 'loader/CategoryLoader'\nimport BookShelfLoader from 'loader/BookShelfLoader'\n\nimport Config from 'config.js'\nimport storage from './utils/storage'\n// 全局状态.\nconst app = AppModel.create({\n  baseURL: storage.getValue('baseURL') || (Config.isDebug ? Config.config.development.host : Config.config.production) || '',\n  config: {},\n  music: { url: '' },\n})\napp.setAccessToken(storage.getValue(app.accessTokenName) || '')\napp.setRefreshToken(storage.getValue(app.refreshTokenName) || '')\napp.initLocker(storage.getValue(app.lockerName) || {})\nconst target = {}\n// TODO: 记录mode\nconst music = MusicPlayerModel.create({\n  mode: storage.getValue(app.musicModeName) || 'circle',\n})\nconst debug = DebugModel.create({})\n// loader\nconst userLoader = UserLoader.create()\nconst categoryLoader = CategoryLoader.create()\nconst bookShelfLoader = BookShelfLoader.create()\n\nexport default {\n  app,\n  debug,\n  music,\n  target,\n  userLoader,\n  categoryLoader,\n  bookShelfLoader,\n}","import axios from 'axios'\nimport globalStore from '../global-state'\nimport Config from '../config'\nimport services from '../services'\nimport storage from './storage'\n\nconst shttp = axios.create({\n  baseURL: storage.getValue('baseURL') || (Config.isDebug ? Config.config.development.host : Config.config.production) || '',\n  withCredentials: false,\n  timeout: 5000\n})\n\nshttp.interceptors.request.use(\n  config => {\n    globalStore.debug.append(`${config.method} ${config.url}`)\n    if (Config.isDebug && Config.console) {\n      console.log(`${config.method} ${config.url}`)\n    }\n    config.headers['Authorization'] = globalStore.app.accessToken\n    // config.params = { token: globalStore.app.accessToken }\n    return config\n  },\n  error => {\n    if (Config.isDebug && Config.console) {\n      console.log(error, 'request error')\n    }\n    return Promise.resolve(error)\n  }\n)\n\nshttp.interceptors.response.use(\n  response => {\n    if (Config.isDebug && Config.console) {\n      console.log(response.status, response.data)\n    }\n    const res = response.data\n    // 干点什么\n    if (res.code !== 0) {\n      if (res.code === 10110 && response.config.url !== response.config.baseURL + '/v1/auth/user/refresh') {\n        globalStore.app.setAccessToken('')\n        return new Promise(async (resolve) => {\n          const result = await services.refresh({ authorization: globalStore.app.refreshToken })\n          if (result.data) {\n            globalStore.app.setAccessToken(result.data.token)\n            globalStore.app.setAccessToken(result.data.refresh_token)\n            response.config.headers['Authorization'] = result.data.token\n            response.config.try = true\n            const newResult = await shttp(response.config)\n            resolve(newResult)\n          } else {\n            resolve({})\n          }\n        })\n      } else {\n        globalStore.debug.append(res.message)\n        // Modal.alert('请求失败', res.message);\n      }\n\n    }\n    return res\n  },\n  error => {\n    globalStore.debug.append(error.message)\n    if (Config.isDebug && Config.console) {\n      console.log(error, 'response error')\n    }\n    const data = error.response.data\n    if (data.code === 101020) {\n      globalStore.app.setAccessToken('')\n    }\n    return Promise.resolve(error)\n  }\n)\n\nexport default shttp","import * as bowser from 'bowser'\r\n\r\nexport function isDeskTop(dev) {\r\n    return true\r\n    const browser = bowser.getParser(window.navigator.userAgent)\r\n    const isChromeApp = (window.matchMedia('(display-mode: standalone)').matches)\r\n    const isIosApp = window.navigator.standalone === true\r\n    const isDev = dev === undefined ? process.env.NODE_ENV === 'development' : dev\r\n    const platformType = browser.getPlatformType()\r\n    return isDev || (platformType === 'mobile' && (isChromeApp || isIosApp)) ? true : false\r\n}\r\n\r\nexport function stringfyQuery(query = {}) {\r\n    let search = ''\r\n    for (let k in query) {\r\n        search += `&${k}=${query[k]}`\r\n    }\r\n    return search ? '?' + search.substr(1) : ''\r\n}","import user from './user'\nimport common from './public'\n\nexport default {\n  ...user,\n  ...common,\n}","import shttp from 'utils/shttp'\r\nimport { stringfyQuery } from 'utils/utils'\r\n\r\nexport default {\r\n  login({ query, params, data }) {\r\n    // crypto.createHash('md5').update(params.password).digest('hex').toUpperCase()\r\n    return shttp({\r\n      url: '/v1/auth/user/sign-in',\r\n      method: 'post',\r\n      data: { name: data.account, password: data.password },\r\n    })\r\n  },\r\n  register({ query, params, data }) {\r\n    return shttp({\r\n      url: '/v1/auth/user/sign-up',\r\n      method: 'post',\r\n      data: { name: params.account, password: params.password },\r\n    })\r\n  },\r\n  refresh({ query, params, data }) {\r\n    return shttp({\r\n      url: '/v1/auth/user/refresh',\r\n      method: 'post',\r\n      data: params,\r\n    })\r\n  },\r\n  async getUserInfo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/user/self',\r\n      method: 'get',\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getMybooks() {\r\n    const result = await shttp({\r\n      url: '/v1/user/my-books',\r\n    })\r\n    return { items: result.data, ended: true }\r\n  },\r\n  async getBookFirstChapter({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/book/${params.id}/first-chapter`\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getBookChapter({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/book/${params.bid}/chapter/${params.id}`\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getTodos({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/todos${stringfyQuery(query)}`\r\n    })\r\n    result.data.forEach(d => {\r\n      d.startedAt = new Date(d.startedAt)\r\n      d.endedAt = new Date(d.endedAt)\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async createTodo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/user/todo',\r\n      method: 'POST',\r\n      data\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async updateTodo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/todo/${params.id}`,\r\n      method: 'PUT',\r\n      data\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async destroyTodo({ query, params, data }) {\r\n    return shttp({\r\n      url: `/v1/user/todo/${params.id}`,\r\n      method: 'DELETE',\r\n      data\r\n    })\r\n  },\r\n  async addSongToSheet({ query, params, data }) {\r\n    return shttp({\r\n      url: `/v1/user/song-sheet/${params.ssid}/song/${params.id}`,\r\n      method: 'POST',\r\n    })\r\n  },\r\n  async removeSheetSong({ query, params, data }) {\r\n    return shttp({\r\n      url: `/v1/user/song-sheet/${params.ssid}/song/${params.id}`,\r\n      method: 'DELETE',\r\n    })\r\n  },\r\n}","import shttp from 'utils/shttp'\r\nimport { stringfyQuery } from 'utils/utils'\r\n\r\nexport default {\r\n  async getBookInfo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/book/${params.id}`\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getBookCatalog({ query, params, data }) {\r\n    let search = ''\r\n    for (let k in params.query) {\r\n      search += `&${k}=${params.query[k]}`\r\n    }\r\n    const result = await shttp({\r\n      url: `/v1/public/book/${params.id}/catalog?${search}`\r\n    })\r\n    return { items: result.data, ended: result.data.length < 20 }\r\n  },\r\n  async getBookList({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/books${stringfyQuery(query)}`,\r\n    })\r\n    return { items: result.data, ended: result.data.length < 10 }\r\n  },\r\n  async getCategoryList() {\r\n    const result = await shttp({\r\n      url: '/v1/public/categories'\r\n    })\r\n    const tree = {}\r\n    result.data.forEach(c => {\r\n      c.children = []\r\n      if (c.pid === '') {\r\n        tree[c.tid] = c\r\n      }\r\n    })\r\n    result.data.forEach(c => {\r\n      if (c.pid !== '') {\r\n        tree[c.tid].children.push(c)\r\n      }\r\n    })\r\n    const items = []\r\n    for (let k in tree) {\r\n      items.push(tree[k])\r\n    }\r\n    return { items, ended: true }\r\n  },\r\n  async getGroupTree({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/group-tree/${params.group_id}`,\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getGroups({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/public/groups',\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async getSongSheets({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/public/song-sheets',\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async getSongSheet({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/song-sheet/${params.id}`,\r\n    })\r\n    result.data.forEach((it, index) => {\r\n      it.order = index\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async getSongs({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/songs${stringfyQuery(query)}`,\r\n    })\r\n    return { items: result.data, ended: result.data.length < 10 ? true : false }\r\n  },\r\n} ","import config from '../config'\r\nconst localforage = require('localforage')\r\n\r\nclass Store {\r\n  constructor(ns, opt) {\r\n    this.ns = ns\r\n    this.api = localforage.createInstance({ name: ns })\r\n  }\r\n  async getValue(key) {\r\n    const result = await this.api.getItem(key)\r\n    return result ? result.data : result\r\n  }\r\n  async setValue(key, data) {\r\n    await this.api.setItem(key, { data, ts: Date.now() })\r\n  }\r\n  async removeKey(key) {\r\n    await this.api.removeItem(key)\r\n  }\r\n  async clear() {\r\n    await this.api.clear()\r\n  }\r\n  async getAll() {\r\n    const result = []\r\n    await this.api.iterate((value, key, index) => {\r\n      result.push(value.data)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nclass Cache {\r\n  constructor(opt = {}) {\r\n    this.caches = {}\r\n    for (let ns in opt) {\r\n      this.caches[ns] = new Store(ns, opt[ns])\r\n    }\r\n  }\r\n  getCache(ns) {\r\n    return this.caches[ns]\r\n  }\r\n}\r\n\r\nexport default new Cache(config.cache)","import services from 'services'\r\nimport BookModel from 'models/BookModel'\r\nimport { createItemLoader } from './BaseLoader'\r\nimport caches from 'utils/cache'\r\n\r\nconst bookCache = caches.getCache('book')\r\n\r\nexport default createItemLoader(BookModel, async (params) => {\r\n  const item = await bookCache.getValue(params.id)\r\n  if (item) {\r\n    return { item }\r\n  }\r\n  const result = await services.getBookInfo(params)\r\n  if (result.item) {\r\n    bookCache.setValue(params.id, result.item)\r\n  }\r\n  return result\r\n})","import React from 'react'\nimport { ActivityIndicator } from 'antd-mobile'\n\nconst style = { textAlign: 'center' }\n\nexport default function renderEmpty(loader, options) {\n  if (loader.isEmpty) {\n    if (loader.isLoading) {\n      return <div style={style}><ActivityIndicator text=\"加载中...\" /></div>\n    } else if (loader.error) {\n      return <div style={style}>出错啦!{loader.error.message}<span onClick={() => loader.refresh()}>点我重试</span></div>\n    } else {\n      return <div style={style}>没有数据,<span onClick={() => loader.refresh()}>点我重试</span></div>\n    }\n  }\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\n\r\nexport default function ({ children, holder, loading }) {\r\n  return <Observer>\r\n    {() => {\r\n      if (loading) {\r\n        return holder\r\n      } else {\r\n        return children\r\n      }\r\n    }}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { ListView, PullToRefresh } from 'antd-mobile'\nimport renderEmptyView from '../EmptyView'\nimport AutoCenterView from '../AutoCenterView'\nimport SwitchView from '../SwitchView'\n\nconst dataProvider = new ListView.DataSource({\n  rowHasChanged: (row1, row2) => false\n})\n\nfunction MyBody(props) {\n  return <div className={`am-list-body ${props.className}`}>{props.children}</div>\n}\n\nfunction renderList({ loader, refresh, loadMore, renderItem, onScroll, className }) {\n  const dataSource = dataProvider.cloneWithRows(loader.items.slice())\n  const EmptyView = renderEmptyView(loader)\n  // 必须要这样.不能直接用 loader.isLoading判断\n  const isLoading = loader.isLoading\n  return <Fragment>\n    <SwitchView\n      loading={loader.isEmpty}\n      holder={<AutoCenterView>{EmptyView}</AutoCenterView>}>\n      <ListView\n        style={{ height: '100%', overflow: 'auto' }}\n        dataSource={dataSource}\n        // 自带的.没有写就默认滚到底部了\n        onScroll={onScroll}\n        renderRow={(rowData, sectionId, rowId) => renderItem(rowData, sectionId, rowId)}\n        renderBodyComponent={() => <MyBody className={className} />}\n        initialListSize={Infinity}\n        onEndReachedThreshold={10}\n        onEndReached={loadMore ? loadMore : loader.loadMore}\n        pullToRefresh={<PullToRefresh refreshing={false} onRefresh={refresh ? refresh : loader.refresh} />}\n        /**\n         * useBodyScroll\n         * onScroll\n         */\n        renderFooter={() => <div style={{ textAlign: 'center', padding: 5 }}>{isLoading ? '正在加载更多数据...' : '已全部加载完毕'}</div>}\n      />\n    </SwitchView>\n\n  </Fragment>\n}\n\nexport default function (props) {\n  // const { loader } = props;\n  // useEffectOnce(() => {\n  //   if (loader.isEmpty) {\n  //     loader.refresh();\n  //   }\n  // });\n  return <div style={{ display: 'flex', flex: '1 1', height: '100%', flexDirection: 'column' }}>\n    <Observer>\n      {() => {\n        return renderList(props)\n      }}\n    </Observer>\n  </div>\n}\n","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\n\r\nexport default function ({ item, router, nth }) {\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        <div style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} onClick={() => { router.pushView(`/root/book/${item.bid}/chapter/${item.id}`, null, { hideMenu: true }) }}>\r\n          <div style={{ fontSize: '1.2rem' }}>第{nth}章 {item.title}</div>\r\n          <div style={{ color: 'grey', padding: '5px 0' }}>{item.createdAt}</div>\r\n        </div>\r\n      </Fragment>\r\n    }\r\n    }\r\n  </Observer>\r\n\r\n}","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  id: types.string,\r\n  bid: types.string,\r\n  title: types.optional(types.string, ''),\r\n  createdAt: types.optional(types.string, ''),\r\n  // 特殊部分\r\n  isApproved: types.optional(types.boolean, true),\r\n  order: types.optional(types.number, 1),\r\n  words: types.optional(types.number, 0),\r\n  comments: types.optional(types.number, 0),\r\n  content: types.optional(types.string, ''),\r\n  preId: types.maybe(types.string),\r\n  nextId: types.maybe(types.string),\r\n})\r\n\r\nexport default Model","import services from 'services/index'\r\nimport Chapter from 'models/ChapterModel'\r\nimport { createItemLoader } from './BaseLoader'\r\n// import caches from 'utils/cache'\r\n\r\n// const chapterCache = caches.getCache('chapter')\r\nexport default createItemLoader(Chapter, async (params) => {\r\n  return services.getBookChapter(params)\r\n  // let item = await chapterCache.getValue(params.id)\r\n  // if (item) {\r\n  //   return { item }\r\n  // } else {\r\n  //   const result = await services.getBookChapter(params)\r\n  //   item = result.item\r\n  //   if (item) {\r\n  //     chapterCache.setValue(params.id, item)\r\n  //   }\r\n  // }\r\n  // return { item }\r\n})","import React from 'react'\nimport { Observer, useLocalStore } from 'mobx-react-lite'\nimport { useRouterContext } from 'contexts/router'\nimport { InputItem, List, Button, Toast, Modal } from 'antd-mobile'\n\nimport services from 'services'\nimport globalStore from 'global-state'\nimport MIconView from 'components/MIconView'\n\nimport './index.css'\n\nasync function login(router, store) {\n  if (store.account && store.password) {\n    store.isLoading = true\n    let res = await services.login({ data: store })\n    store.isLoading = false\n    if (!res || !res.data) {\n      return Toast.info('请求失败!')\n    }\n    if (res.code !== 0) {\n      return Toast.info(res.message)\n    } else {\n      globalStore.app.setAccessToken(res.data.token)\n      globalStore.app.setRefreshToken(res.data.refresh_token)\n      router.history.push({\n        pathname: '/'\n      })\n    }\n  } else {\n    Toast.info('请输入账号密码!')\n  }\n}\n\n// eslint-disable-next-line\nasync function register(router, store) {\n  if (store.account && store.password) {\n    store.isLoading = true\n    let res = await services.register(store)\n    store.isLoading = false\n    if (!res) {\n      return Toast.info('请求失败!')\n    }\n    if (res.code !== 0) {\n      return Toast.info(res.message)\n    } else {\n      Toast.info('注册成功!')\n    }\n  } else {\n    Toast.info('请输入账号密码!')\n  }\n}\n\nexport default function ({ self }) {\n  let router = useRouterContext()\n  let store = useLocalStore(() => ({\n    isLoading: false,\n    isLogin: false,\n    isRegister: false,\n    account: '',\n    password: ''\n  }))\n  return <Observer>\n    {() => {\n      return <div className=\"dd-common-centerXY\" style={{ position: 'relative' }}>\n        <div style={{ position: 'absolute', right: 0, top: 0, padding: 5 }}>\n          <MIconView type=\"FaCog\" onClick={() => {\n            Modal.prompt('地址', '', [\n              { text: '取消' },\n              {\n                text: '确定', onPress: val => {\n                  globalStore.app.setBaseURL(val)\n                }\n              }\n            ], 'default', '')\n          }} />\n        </div>\n        <List>\n          <List.Item>\n            <InputItem\n              type=\"text\"\n              placeholder=\"用户名\"\n              style={{ border: '0 none' }}\n              defaultValue={store.account}\n              onBlur={value => store.account = value}\n            >\n              用户名\n            </InputItem>\n          </List.Item>\n          <List.Item>\n            <InputItem\n              type=\"password\"\n              placeholder=\"密码\"\n              defaultValue=\"\"\n              style={{ border: '0 none' }}\n              onBlur={value => store.password = value}\n            >\n              密码\n            </InputItem>\n          </List.Item>\n          <List.Item style={{ display: 'flex' }}>\n            <Button loading={store.isLogin} disabled={store.isLogin || store.isRegister} type=\"primary\" onClick={() => login(router, store)}>登录</Button>\n            {/* <div style={{ display: 'flex', alignItems: 'center', flexDirection: 'row', justifyContent: 'space-around' }}>\n              <Button loading={store.isLogin} disabled={store.isLogin || store.isRegister} type=\"primary\" onClick={() => login(router, store)}>登录</Button>\n              <Button loading={store.isRegister} inline disabled={store.isLogin || store.isRegister} type=\"primary\" onClick={() => register(router, store)}>注册</Button>\n            </div> */}\n          </List.Item>\n        </List>\n      </div>\n    }}\n  </Observer>\n}","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\nimport MIconView from 'components/MIconView'\r\nimport config from 'config'\r\n\r\nexport default function ({ item, router }) {\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        <div className=\"full-width\" style={{ padding: 10 }} onClick={() => { router.pushView(`/root/book/${item.id}/info`, null, { hideMenu: true, id: item.id }) }}>\r\n          <div className=\"full-width-fix\" style={{ width: 60, height: 80, backgroundColor: 'green', marginRight: 20 }}>\r\n            <img style={{ width: '100%', height: '100%' }} src={item.poster ? config.config.development.host + item.poster : config.config.development.host + '/poster/nocover.jpg'} alt=\"\" />\r\n          </div>\r\n          <div className=\"full-width-auto full-height\">\r\n            <div className=\"dd-common-alignside\">\r\n              <div style={{ fontSize: '1.2rem' }}>{item.title}</div>\r\n              <MIconView type=\"FaEllipsisH\" />\r\n            </div>\r\n\r\n            <div style={{ padding: '4px 0', color: 'rgb(146, 145, 145)' }}>{item.uname} · {'xxxxxx'}</div>\r\n            <div style={{ color: 'rgb(146, 145, 145)' }}>17小时前 · 第八百零六章 翻车了</div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    }\r\n    }\r\n  </Observer>\r\n\r\n}","import services from 'services/index'\r\nimport BookModel from 'models/BookModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(BookModel, async (params) => {\r\n  return services.getBookList(params)\r\n})","import { types } from 'mobx-state-tree'\r\n\r\nconst GroupModel = types.model('Group', {\r\n  tree_id: types.string,\r\n  group_id: types.string,\r\n  parent_id: types.string,\r\n  title: types.string,\r\n  name: types.string,\r\n  desc: types.string,\r\n  view: types.string,\r\n  refs: types.array(types.string),\r\n  data: types.optional(types.frozen([]), []),\r\n  attrs: types.model({\r\n    hide_title: types.boolean,\r\n    allowChange: types.boolean,\r\n    selected: types.maybeNull(types.boolean),\r\n    timeout: types.maybeNull(types.number),\r\n    columns: types.maybeNull(types.number),\r\n    showCount: types.maybeNull(types.number),\r\n  }),\r\n  params: types.frozen(null, {}),\r\n  more: types.model({\r\n    channel_id: types.string,\r\n    keyword: types.string,\r\n    type: types.string,\r\n  }),\r\n  nth: types.number,\r\n  children: types.optional(types.array(types.late(() => GroupModel)), []),\r\n}).views(self => ({\r\n  get id() {\r\n    return self.group_id\r\n  },\r\n})).actions(self => ({\r\n  selected(status) {\r\n    if (self.attrs.selected !== status) {\r\n      self.attrs.selected = status\r\n    }\r\n  },\r\n}))\r\n\r\nexport default GroupModel","import services from 'services/index'\r\nimport { createItemLoader } from './BaseLoader'\r\nimport GroupTreeModel from 'models/GroupTreeModel'\r\n\r\nexport default createItemLoader(GroupTreeModel, async (params) => {\r\n  return services.getGroupTree(params)\r\n})","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport '../group.css'\r\n\r\nexport default function FilterTag({ self, selectTag }) {\r\n  return <Observer>{() => (\r\n    <span className={`comp-tag ${self.attrs.selected ? 'selected' : ''}`} onClick={() => selectTag(self.group_id)}>{self.name}</span>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport FilterTag from '../FilterTag'\r\nimport '../group.css'\r\n\r\nexport default function FilterRow({ self, onQueryChange }) {\r\n  function selectTag(group_id) {\r\n    if (self.group_id === group_id) {\r\n      self.selected(true)\r\n    } else {\r\n      self.selected(false)\r\n    }\r\n    self.children.forEach(child => {\r\n      if (child.group_id === group_id) {\r\n        child.selected(true)\r\n      } else {\r\n        child.selected(false)\r\n      }\r\n    })\r\n    onQueryChange()\r\n  }\r\n  return <Observer>{() => (\r\n    <div style={{ margin: '5px 10px', whiteSpace: 'nowrap', overflowX: 'hidden', overflowY: 'hidden' }}><span className={`comp-tag ${self.attrs.selected ? 'selected' : ''}`} onClick={() => selectTag(self.group_id)}>{self.name}</span>{self.children.map(child => (<FilterTag self={child} key={child.id} selectTag={selectTag} />))}</div>\r\n  )}</Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\nimport config from 'config'\r\nimport { useRouterContext } from 'contexts/router'\r\n\r\nexport default function ({ item }) {\r\n  const router = useRouterContext()\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        <div className=\"full-width\" style={{ margin: 10 }} onClick={() => { router.pushView(`/root/book/${item.id}/info`, null, { hideMenu: true, id: item.id }) }}>\r\n          <div className=\"full-width-fix\" style={{ width: 60, height: 80, backgroundColor: 'green', marginRight: 20 }}>\r\n            <img style={{ width: '100%', height: '100%' }} src={item.poster ? config.config.development.host + item.poster : config.config.development.host + '/poster/nocover.jpg'} alt=\"\" />\r\n          </div>\r\n          <div className=\"full-width-auto full-height\">\r\n            <div className=\"dd-common-alignside\">\r\n              <div style={{ fontSize: '1.2rem' }}>{item.title}</div>\r\n            </div>\r\n            <div style={{ padding: '4px 0', color: 'rgb(146, 145, 145)' }}>{item.uname} · {item.catalog} · {item.status === 'loading' ? '连载' : '完结'} · {item.words}</div>\r\n            <div style={{ color: 'rgb(146, 145, 145)' }} className=\"line2\">{item.desc}</div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    }\r\n    }\r\n  </Observer>\r\n\r\n}","import React from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { Button } from 'antd-mobile'\r\nimport VisualBox from 'components/VisualBoxView'\r\nimport MIcon from 'components/MIconView'\r\n\r\nfunction Node({ self, isChild = false, ...props }) {\r\n  const store = useLocalStore(() => ({\r\n    showMenu: false,\r\n    showChildren: false,\r\n  }))\r\n  return <Observer>{() => (\r\n    <div className=\"full-width\" style={{ padding: '5px 0', }}>\r\n      <div style={{ position: 'relative', display: 'inline-block', }} onContextMenu={(e) => {\r\n        store.showMenu = true\r\n        e.preventDefault()\r\n      }}>\r\n        <span style={{ display: 'flex', marginLeft: 5, backgroundColor: '#eaeaea', border: '1px solid #666', padding: 3, borderRadius: 5, zIndex: store.showMenu ? 100 : 98, position: 'relative', }}>\r\n          {self.title}\r\n          <VisualBox visible={self.children.length !== 0}>\r\n            <MIcon type={store.showChildren ? 'FaMinusCircle' : 'FaPlusCircle'} onClick={() => store.showChildren = !store.showChildren} />\r\n          </VisualBox>\r\n        </span>\r\n        <div onClick={() => store.showMenu = false} style={{ display: store.showMenu && props.mode === 'edit' ? 'block' : 'none', position: 'fixed', left: 0, top: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.5)', zIndex: 99 }}></div>\r\n        <div style={{ zIndex: 100, display: store.showMenu && props.mode === 'edit' ? 'flex' : 'none', whiteSpace: 'nowrap', position: 'absolute', top: '100%', left: '100%', backgroundColor: 'white', border: '1px solid #bbb', borderRadius: 5, padding: 5 }}>\r\n          <div style={{ textAlign: 'right' }}>\r\n            <Button type=\"primary\" onClick={() => {\r\n              props.openGroupEdit({ parent_id: self.group_id, tree_id: self.tree_id, view: 'tree-node' })\r\n            }}>添加</Button>\r\n            <Button onClick={() => { props.destroyGroup(self) }}>删除</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"full-height\" style={{ display: store.showChildren ? 'block' : 'none', position: 'relative', margin: '10px 0 10px 10px', paddingLeft: 10, }}>\r\n        <VisualBox visible={self.children.length !== 0}>\r\n          <span style={{ width: '100%', position: 'absolute', top: 0, left: 0, height: '50%', borderTopLeftRadius: '10%', borderLeft: '1px solid #999', transform: 'translateY(-7px)' }}></span>\r\n          <span style={{ width: '100%', position: 'absolute', bottom: 0, left: 0, height: '50%', borderBottomLeftRadius: '10%', borderLeft: '1px solid #999', transform: 'translateY(7px)' }}></span>\r\n          <span style={{ position: 'absolute', top: '50%', left: -5, marginTop: -5, borderColor: '#333', borderStyle: 'solid', borderTopWidth: 1, borderLeftWidth: 1, borderRightWidth: 0, borderBottomWidth: 0, width: 10, height: 10, transform: 'rotate(-45deg)' }}></span>\r\n        </VisualBox>\r\n        {self.children.map(child => <Node key={child.id} self={child} isChild={true} {...props} />)}\r\n      </div>\r\n    </div>\r\n  )}</Observer>\r\n}\r\n\r\nexport default function Tree(props) {\r\n  return <Node {...props} />\r\n}","import React from 'react'\r\nimport { AutoView } from '../index'\r\n\r\nexport default function TabPane({ self, children, ...props }) {\r\n  return self.children.map(child => (\r\n    <AutoView key={child.id} self={child} {...props} />\r\n  ))\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport renderEmptyView from 'components/EmptyView'\r\nimport AutoCenterView from 'components/AutoCenterView'\r\nimport Filter from './Filter'\r\nimport FilterRow from './FitlerRow'\r\nimport FilterTag from './FilterTag'\r\nimport Picker from './Picker'\r\nimport TreeNode from './TreeNode'\r\nimport Tab from './Tab'\r\nimport TabPane from './TabPane'\r\n\r\nconst views = {\r\n  'filter': Filter,\r\n  'filter-tag': FilterTag,\r\n  'filter-row': FilterRow,\r\n  'picker': Picker,\r\n  'tab': Tab,\r\n  'tab-pane': TabPane,\r\n  'tree-node': TreeNode,\r\n  view(name) {\r\n    if (this[name]) {\r\n      return this[name]\r\n    }\r\n  }\r\n}\r\n\r\nexport function AutoView({ self, ...props }) {\r\n  return <Observer>{() => {\r\n    if (self.parent_id === '') {\r\n      return self.children.map(child => (\r\n        <AutoView key={child.group_id} self={child} {...props} />\r\n      ))\r\n    } else {\r\n      let View = views.view(self.view)\r\n      if (View) {\r\n        return <View self={self} {...props} />\r\n      } else {\r\n        return <div>?</div>\r\n      }\r\n    }\r\n  }\r\n  }</Observer>\r\n}\r\nexport function RenderGroups({ loader, ...props }) {\r\n  const emptyView = renderEmptyView(loader)\r\n  return <Observer>{() => {\r\n    if (loader.item && loader.item.children.length !== 0) {\r\n      return <div style={{ height: '100%', overflow: 'auto' }}>\r\n        <AutoView self={loader.item} {...props} />\r\n      </div>\r\n    } else {\r\n      return <AutoCenterView>{emptyView}fuck</AutoCenterView>\r\n    }\r\n  }}</Observer>\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport FilterRow from '../FitlerRow'\r\n\r\nexport default function Filter({ self, ...props }) {\r\n  return <Observer>{() => (\r\n    <div style={{ padding: 5 }}>{self.children.map(child => (<FilterRow self={child} key={child.id} onQueryChange={() => {\r\n      let query = {}\r\n      self.children.forEach(child => {\r\n        child.children.forEach(tag => {\r\n          if (tag.attrs.selected) {\r\n            Object.assign(query, tag.params)\r\n          }\r\n        })\r\n      })\r\n      if (props.onQueryChange) {\r\n        props.onQueryChange(query)\r\n      }\r\n    }} />))}</div>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\nimport MIconView from 'components/MIconView'\r\nimport BookNormalItemView from 'business/BookItemView/Normal'\r\n\r\nexport default function Picker({ self }) {\r\n  return <Observer>{() => (\r\n    <div>\r\n      {self.attrs.hide_title === false && <div className=\"dd-common-alignside\" style={{ borderLeft: '5px solid #ff9999', paddingLeft: 10 }}>\r\n        <span>{self.name}</span>\r\n        <VisualBoxView visible={self.more.channel_id !== ''}>\r\n          <span style={{ fontSize: 16, color: '#888' }}>\r\n            <MIconView type=\"FaAngleRight\" before=\"更多\" />\r\n          </span>\r\n        </VisualBoxView>\r\n      </div>}\r\n      <div>\r\n        {self.data.map((d, index) => (<BookNormalItemView key={index} item={d} />))}\r\n      </div>\r\n      <VisualBoxView visible={self.attrs.allowChange === true}>\r\n        <div style={{ textAlign: 'center' }}>\r\n          <MIconView type=\"FaRedo\" after=\"换一换\" />\r\n        </div>\r\n      </VisualBoxView>\r\n    </div>\r\n  )}</Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Tabs } from 'antd-mobile'\r\nimport TabPane from '../TabPane'\r\n\r\nexport default function Tab({ self, children, ...props }) {\r\n  return (\r\n    <Fragment>\r\n      <Tabs tabs={self.children.map((ch, index) => ({ title: ch.title, sub: index }))}>{\r\n        self.children.map((child, index) => (\r\n          <TabPane key={index} self={child} {...props} />\r\n        ))\r\n      }</Tabs>\r\n    </Fragment>)\r\n}","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport GroupTreeModel from 'models/GroupTreeModel'\r\n\r\nexport default createItemsLoader(GroupTreeModel, async (params) => {\r\n  return services.getGroups(params)\r\n})","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\nimport MIconView from 'components/MIconView'\r\n\r\nexport default function ({ item, router }) {\r\n  return <Observer>\r\n    {() => (\r\n      <Fragment>\r\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} onClick={() => { router.pushView(`/root/group-tree/${item.group_id}`, null, { title: item.title, hideMenu: true }) }}>\r\n          {item.title}\r\n          <MIconView type=\"FaAngleRight\" />\r\n        </div>\r\n      </Fragment>\r\n    )}\r\n  </Observer>\r\n}","import { types } from 'mobx-state-tree'\r\n\r\nconst TodoModel = types.model('Todo', {\r\n  id: types.string,\r\n  title: types.string,\r\n  content: types.string,\r\n  priority: types.number,\r\n  isFinish: types.boolean,\r\n  isDelay: types.boolean,\r\n  notify: types.boolean,\r\n  giveup: types.boolean,\r\n  startedAt: types.Date,\r\n  endedAt: types.maybeNull(types.Date),\r\n  deletedAt: types.maybeNull(types.Date),\r\n  type: types.string,\r\n}).views(self => ({\r\n\r\n})).actions(self => ({\r\n  finishToggle() {\r\n    self.isFinish = !self.isFinish\r\n  }\r\n}))\r\n\r\nexport default TodoModel","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport TodoModel from 'models/TodoModel'\r\n\r\nexport default createItemsLoader(TodoModel, async (params) => {\r\n  return services.getTodos(params)\r\n})","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport MIconView from 'components/MIconView'\r\nimport services from 'services'\r\n\r\nexport default function ({ item, router }) {\r\n  return <Observer>\r\n    {() => (\r\n      <Fragment>\r\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }}>\r\n          <MIconView size=\"md\" type={item.isFinish ? 'FaRegCheckCircle' : 'FaRegCircle'} onClick={e => {\r\n            item.finishToggle()\r\n            services.updateTodo({ params: { id: item.id }, data: item }).then(res => {\r\n            })\r\n          }} />\r\n          <span style={{ flex: 1, padding: '5px 10px' }} onClick={() => {\r\n            router.pushView(`/root/todo/${item.id}`, null, { data: item })\r\n          }}>{item.title}</span>\r\n          <MIconView type=\"FaAngleLeft\" onClick={() => {\r\n\r\n          }} />\r\n        </div>\r\n      </Fragment>\r\n    )}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer, useLocalStore, } from 'mobx-react-lite'\r\nimport { ActivityIndicator, Toast, List, InputItem, TextareaItem, DatePicker, Picker, Switch } from 'antd-mobile'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport services from 'services'\r\n\r\nexport default function TodoAddPage() {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const params = router.params\r\n  const todo = router.getStateKey('data')\r\n  const store = useLocalStore(() => ({\r\n    loading: false,\r\n    title: params.id ? todo.title : '',\r\n    content: params.id ? todo.content : '',\r\n    type: params.id ? todo.type : 'work',\r\n    priority: params.id ? todo.priority : '',\r\n    startedAt: params.id ? todo.startedAt : null,\r\n    endedAt: params.id ? todo.endedAt : null,\r\n    isDelay: params.id ? todo.isDelay : false,\r\n    isFinish: params.id ? todo.isFinish : false,\r\n  }))\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title={params.id ? '修改' : '添加'} router={router} />\r\n      <div className=\"full-height-auto\">\r\n        <List>\r\n          <InputItem type=\"text\" value={store.title} onChange={value => store.title = value}>标题</InputItem>\r\n          <Picker extra={'请选择'} value={[store.type]} data={[\r\n            { label: '生活', value: 'life' },\r\n            { label: '工作', value: 'work' },\r\n            { label: '设计', value: 'design' },\r\n          ]} onChange={value => store.type = value[0]}>\r\n            <List.Item>类型</List.Item>\r\n          </Picker>\r\n          <TextareaItem title=\"详情\" value={store.content} autoHeight onChange={value => store.content = value}></TextareaItem>\r\n          <Picker extra={'请选择'} value={[store.priority]} data={[\r\n            { label: '不重要不紧急', value: 1 },\r\n            { label: '重要不紧急', value: 2 },\r\n            { label: '不重要紧急', value: 3 },\r\n            { label: '重要紧急', value: 4 },\r\n          ]} onChange={value => {\r\n            store.priority = value[0]\r\n          }}>\r\n            <List.Item>优先级</List.Item>\r\n          </Picker>\r\n          <DatePicker value={store.startedAt} onChange={value => store.startedAt = value}>\r\n            <List.Item>开始时间</List.Item>\r\n          </DatePicker>\r\n          <DatePicker value={store.endedAt} onChange={value => store.endedAt = value}>\r\n            <List.Item>结束时间</List.Item>\r\n          </DatePicker>\r\n          <List.Item>\r\n            <div className=\"dd-common-alignside\">\r\n              <span>是否推迟</span>\r\n              <Switch checked={store.isDelay} onChange={value => store.isDelay = value} />\r\n            </div>\r\n          </List.Item>\r\n          <List.Item>\r\n            <div className=\"dd-common-alignside\">\r\n              <span>是否完成</span>\r\n              <Switch checked={store.isFinish} onChange={value => store.isFinish = value} />\r\n            </div>\r\n          </List.Item>\r\n        </List>\r\n      </div>\r\n      <ActivityIndicator animating={store.loading} />\r\n      <div className=\"full-width\" style={{ height: 40, borderTop: '1px solid #eee' }}>\r\n        <div className=\"full-width-auto dd-common-centerXY\" style={{ backgroundColor: 'white' }}>取消</div>\r\n        <div className=\"full-width-auto dd-common-centerXY\" style={{ backgroundColor: '#30a6fb', color: 'white' }} onClick={async () => {\r\n          store.loading = true\r\n          try {\r\n            if (params.id) {\r\n              await services.updateTodo({ params, data: store })\r\n            } else {\r\n              await services.createTodo({\r\n                data: {\r\n                  title: store.title,\r\n                  content: store.content,\r\n                  type: store.type,\r\n                  priority: store.priority,\r\n                  startedAt: store.startedAt,\r\n                  endedAt: store.endedAt,\r\n                }\r\n              })\r\n            }\r\n          } catch (err) {\r\n\r\n          } finally {\r\n            store.loading = false\r\n            Toast.info('编辑成功', 2, () => {\r\n              router.back()\r\n            })\r\n          }\r\n        }}>{params.id ? '修改' : '添加'}</div>\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import { types } from 'mobx-state-tree'\r\n\r\nconst SongSheetModel = types.model('SongSheet', {\r\n  id: types.string,\r\n  uid: types.optional(types.string, ''),\r\n  title: types.string,\r\n  desc: types.string,\r\n  poster: types.string,\r\n  count: types.number\r\n}).views(self => ({\r\n\r\n})).actions(self => ({\r\n  \r\n}))\r\n\r\nexport default SongSheetModel","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport SongSheetModel from 'models/SongSheetModel'\r\n\r\nexport default createItemsLoader(SongSheetModel, async (params) => {\r\n  return services.getSongSheets(params)\r\n})","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport SongModel from 'models/ResourceModel'\r\n\r\nexport default createItemsLoader(SongModel, async (params) => {\r\n  return services.getSongs(params)\r\n})","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model('resource', {\r\n  id: types.string,\r\n  uid: types.string,\r\n  uname: types.string,\r\n  title: types.string,\r\n  poster: types.string,\r\n  desc: types.string,\r\n  url: types.string,\r\n  tags: types.array(types.string),\r\n  status: types.enumeration(['loading', 'finished']),\r\n  createdAt: types.string,\r\n  words: types.number,\r\n  comments: types.number,\r\n  collections: types.number,\r\n  chapters: types.number,\r\n  playing: types.optional(types.boolean, false),\r\n}).actions(self=>({\r\n  toggleStatus() {\r\n    self.playing = !self.playing\r\n  }\r\n}))\r\n\r\nexport default Model","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport MIconView from 'components/MIconView'\r\n\r\nexport default function ({ item, router }) {\r\n  return <Observer>\r\n    {() => (\r\n      <Fragment>\r\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} onClick={() => { router.pushView(`/root/song-sheet/${item.id}`, null, { title: item.title, hideMenu: true }) }}>\r\n          {item.title}\r\n          <MIconView type=\"FaAngleRight\" />\r\n        </div>\r\n      </Fragment>\r\n    )}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { ActionSheet } from 'antd-mobile'\r\nimport MIconView from 'components/MIconView'\r\nimport VisibleBoxView from 'components/VisualBoxView'\r\nimport events from 'utils/events'\r\nimport { useStoreContext } from 'contexts/store'\r\nimport services from 'services'\r\n\r\nexport default function ({ item, mode = 'normal', router, remove, ...props }) {\r\n  const store = useStoreContext()\r\n  const music = store.music\r\n  return <Observer>\r\n    {() => (\r\n      <Fragment>\r\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} {...props} >\r\n          {item.title}\r\n          <div className=\"dd-common-alignside\">\r\n            <MIconView type={item.playing ? 'FaPause' : 'FaPlay'} onClick={() => {\r\n              item.toggleStatus()\r\n              events.emit(music.event.PLAY, item.url, item.order)\r\n            }} />\r\n            <VisibleBoxView visible={mode === 'delete'}>\r\n              <MIconView type=\"MdDeleteForever\" onClick={() => remove(item)} />\r\n            </VisibleBoxView>\r\n            <VisibleBoxView visible={mode === 'add'}>\r\n              <MIconView type=\"FaPlus\" onClick={async (e) => {\r\n                e.preventDefault()\r\n                e.stopPropagation()\r\n                const result = await services.getSongSheets({})\r\n                const list = result.items.map(it => it.title)\r\n                ActionSheet.showActionSheetWithOptions({\r\n                  options: [...list, '取消'],\r\n                  message: '添加到歌单',\r\n                  maskClosable: true,\r\n                  cancelButtonIndex: list.length - 1\r\n                }, index => {\r\n                  let ssid = result.items[index].id\r\n                  let id = item.id\r\n                  services.addSongToSheet({ params: { ssid, id } })\r\n                })\r\n              }} />\r\n            </VisibleBoxView>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    )}\r\n  </Observer>\r\n}","import services from 'services/index'\r\nimport SongSheetSongModel from 'models/SongSheetSongModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(SongSheetSongModel, async (params) => {\r\n  return services.getSongSheet(params)\r\n})","import CategoryPage from './CategoryPage'\r\nimport BookInfoPage from './BookInfoPage'\r\nimport BookCatalogPage from './BookCatalogPage'\r\nimport BookChapterPage from './BookChapterPage'\r\n\r\nimport HomePage from './HomePage'\r\nimport AuthLoginPage from './AuthLoginPage'\r\nimport BookShelfPage from './UserShelfPage'\r\nimport BookSearchPage from './BookSearchPage'\r\nimport GroupTreePage from './GroupTreePage'\r\nimport GroupListPage from './GroupListPage'\r\nimport UserCenterPage from './UserCenterPage'\r\nimport UserSettingPage from './UserSettingPage'\r\nimport SecurePage from './SecurePage'\r\nimport TodoPage from './TodoPage'\r\nimport TodoAddPage from './TodoAddPage'\r\nimport MusicPage from './MusicPage'\r\nimport SongSheetPage from './SongSheetPage'\r\n\r\nexport default [\r\n  {\r\n    pathname: '/auth/login',\r\n    component: AuthLoginPage,\r\n  },\r\n  {\r\n    pathname: '/root/home',\r\n    component: HomePage,\r\n  },\r\n  {\r\n    pathname: '/root/category',\r\n    component: CategoryPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/:id([0-9a-zA-Z-]+)/info',\r\n    component: BookInfoPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/:id([0-9a-zA-Z-]+)/catalog',\r\n    component: BookCatalogPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/:bid([0-9a-zA-Z-]+)/chapter/:id([0-9a-zA-Z-]+)',\r\n    component: BookChapterPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/search',\r\n    component: BookSearchPage,\r\n  },\r\n  {\r\n    pathname: '/root/group-tree/:group_id([0-9a-zA-Z-]+)',\r\n    component: GroupTreePage,\r\n  },\r\n  {\r\n    pathname: '/root/groups',\r\n    component: GroupListPage,\r\n  },\r\n  {\r\n    pathname: '/root/music',\r\n    component: MusicPage,\r\n  },\r\n  {\r\n    pathname: '/root/song-sheet/:id([0-9a-zA-Z-]+)',\r\n    component: SongSheetPage,\r\n  },\r\n  // 用户部分\r\n  {\r\n    pathname: '/root/my',\r\n    component: UserCenterPage,\r\n  },\r\n  {\r\n    pathname: '/root/shelf',\r\n    component: BookShelfPage,\r\n  },\r\n  {\r\n    pathname: '/root/secure',\r\n    component: SecurePage,\r\n  },\r\n  {\r\n    pathname: '/root/todos',\r\n    component: TodoPage,\r\n  },\r\n  {\r\n    pathname: '/root/add-todo',\r\n    component: TodoAddPage,\r\n  },\r\n  {\r\n    pathname: '/root/todo/:id([0-9a-zA-Z-]+)',\r\n    component: TodoAddPage,\r\n  },\r\n  {\r\n    pathname: '/root/user-setting',\r\n    component: UserSettingPage,\r\n  }\r\n]\r\n","import React from 'react'\nimport { Observer } from 'mobx-react-lite'\n\nexport default ({ self, children }) => {\n  return <Observer>\n    {() => {\n      return <div className=\"dd-common-centerXY\">\n        Hello World!{children}\n      </div>\n    }}\n  </Observer>\n\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { ActivityIndicator, Icon } from 'antd-mobile'\r\n\r\nimport { useRouterContext } from 'contexts/router'\r\nimport 'components/common.css'\r\nimport MIconView from 'components/MIconView'\r\nimport AutoCenerView from 'components/AutoCenterView'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\nimport BookLoader from 'loader/BookLoader'\r\nimport services from 'services'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = BookLoader.create()\r\n  const params = router.params\r\n  const localStore = useLocalStore(() => ({\r\n    loading: false,\r\n    firstLoading: false,\r\n    shouldFix: false,\r\n    id: params.id,\r\n  }))\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { id: localStore.id } })\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      if (loader.isEmpty) {\r\n        return <AutoCenerView>\r\n          <ActivityIndicator text=\"加载中...\" />\r\n        </AutoCenerView>\r\n      } else {\r\n        return <Fragment>\r\n          <div className=\"full-height\">\r\n            <div className=\"dd-common-alignside\" style={{ position: 'absolute', width: '100%', boxSizing: 'border-box', height: 45, padding: '0 15px' }}>\r\n              <MIconView type=\"FaChevronLeft\" onClick={() => { router.back() }} />\r\n              <div>\r\n                <VisualBoxView visible={localStore.shouldFix}>\r\n                  <div>我的机器人女友</div>\r\n                  <div>松下中二 · 科幻</div>\r\n                </VisualBoxView>\r\n              </div>\r\n              <MIconView type=\"FaEllipsisH\" />\r\n            </div>\r\n            <div className=\"full-height-auto\">\r\n              <div style={{ padding: '20px 0 10px 0', textAlign: 'center', backgroundColor: '#666', color: 'white' }}>\r\n                <img src={loader.item.poster} alt=\"\" width={100} height={120} />\r\n                <div style={{ fontSize: 20, padding: 5 }}>{loader.item.title}</div>\r\n                <div>{loader.item.uname} · 科幻</div>\r\n              </div>\r\n              <div style={{ padding: '0 20px', borderBottom: '1px solid #ccc', backgroundColor: 'snow' }}>\r\n                <div className=\"dd-common-alignside\" style={{ height: 50, borderBottom: '1px solid #ccc' }}>\r\n                  <div className=\"dd-common-centerXY\" style={{ flex: 1 }}>\r\n                    {loader.item.words}万字\r\n                  </div>\r\n                  <div className=\"dd-common-centerXY\" style={{ flex: 1 }}>\r\n                    {loader.item.chapters}章\r\n                  </div>\r\n                  <div className=\"dd-common-centerXY\" style={{ flex: 1 }}>\r\n                    {loader.item.comments}评论\r\n                  </div>\r\n                </div>\r\n                <div style={{ padding: '10px 0', borderBottom: '1px solid #ccc' }}>\r\n                  {loader.item.desc}\r\n                </div>\r\n                <div className=\"full-width\" style={{ height: 40 }} onClick={() => { router.pushView(`/root/book/${localStore.id}/catalog`, null, { hideMenu: true }) }}>\r\n                  <span className=\"full-width-auto\" style={{ fontWeight: 'bolder' }}>目录</span>\r\n                  <span className=\"full-width-fix\">连载至 729章 · 两小时前更新</span>\r\n                  <MIconView style={{ marginLeft: 10 }} className=\"full-width-fix\" type=\"FaAngleRight\" />\r\n                </div>\r\n              </div>\r\n              <p>TODO:作者 名称 头像 几部作品</p>\r\n            </div>\r\n            <div className=\"dd-common-alignside\" style={{ height: 50 }}>\r\n              <div className=\"dd-common-centerXY\" style={{ flex: 1, backgroundColor: 'rgb(226, 223, 223)', color: 'gray' }}>+ 加入书架</div>\r\n              <div className=\"dd-common-centerXY\" style={{ flex: 1, backgroundColor: 'red', color: 'white' }} onClick={async () => {\r\n                try {\r\n                  localStore.firstLoading = true\r\n                  const info = await services.getBookFirstChapter({ params: { id: localStore.id } })\r\n                  router.pushView(`/root/book/${localStore.id}/chapter/${info.item.id}`, null, { hideMenu: true, bid: localStore.id, id: info.item.id })\r\n                } catch (err) {\r\n\r\n                } finally {\r\n                  localStore.firstLoading = false\r\n                }\r\n              }}><VisualBoxView visible={localStore.firstLoading}><Icon type=\"loading\" /></VisualBoxView>立即阅读</div>\r\n            </div>\r\n          </div>\r\n        </Fragment>\r\n      }\r\n    }\r\n  }</Observer>\r\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useRouterContext } from 'contexts/router'\r\n\r\nimport 'components/common.css'\r\nimport MIconView from 'components/MIconView'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport ChapterItemView from 'business/ChapterItemView'\r\n\r\nimport services from 'services'\r\nimport ChapterModel from 'models/ChapterModel'\r\nimport { createItemsLoader } from 'loader/BaseLoader'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = createItemsLoader(ChapterModel, async (option) => services.getBookCatalog(option)).create()\r\n  const params = router.params\r\n  const localStore = useLocalStore(() => ({\r\n    loading: false,\r\n    sortASC: true,\r\n    id: params.id,\r\n  }))\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { id: localStore.id } })\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <Fragment>\r\n        <div className=\"full-height\">\r\n          <div className=\"dd-common-alignside\" style={{ height: 45, padding: '0 15px' }}>\r\n            <MIconView type=\"FaChevronLeft\" onClick={() => { router.back() }} />\r\n            <div className=\"dd-common-alignside\">\r\n              <span style={{ padding: '0 10px' }}>目录</span>\r\n              <span style={{ padding: '0 10px' }}>书签</span>\r\n            </div>\r\n            <div className=\"dd-common-alignside\" onClick={() => {\r\n              localStore.sortASC = !localStore.sortASC\r\n              loader.toggleSort()\r\n            }}>\r\n              <MIconView type={localStore.sortASC ? 'FaSortNumericDown' : 'FaSortNumericUp'} />\r\n              {localStore.sortASC ? '正序' : '倒序'}\r\n            </div>\r\n\r\n          </div>\r\n          <div className=\"full-height-auto\">\r\n            <LoaderListView\r\n              loader={loader}\r\n              refresh={() => {\r\n                const params = { id: localStore.id }\r\n                loader.refresh({ params })\r\n              }}\r\n              loadMore={() => {\r\n                const params = { id: localStore.id }\r\n                loader.loadMore({ params })\r\n              }}\r\n              renderItem={(item, sectionId, index) => (\r\n                <ChapterItemView\r\n                  nth={loader.sort === 'asc' ? parseInt(index) + 1 : loader.items.length - parseInt(index)}\r\n                  item={item}\r\n                  router={router}\r\n                  sectionId={sectionId}\r\n                  toggleLoading={() => localStore.loading = !localStore.loading}\r\n                />\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    }\r\n  }</Observer>\r\n}","import React, { Fragment, useEffect, useRef } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { ActivityIndicator, Progress } from 'antd-mobile'\r\n\r\nimport { useRouterContext } from 'contexts/router'\r\nimport 'components/common.css'\r\nimport renderEmpty from 'components/EmptyView'\r\nimport AutoCenterView from 'components/AutoCenterView'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\nimport MIconView from 'components/MIconView'\r\nimport ChapterLoader from 'loader/ChapterLoader'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = ChapterLoader.create()\r\n  const emptyView = renderEmpty(loader)\r\n  const params = router.params\r\n  const localStore = useLocalStore(() => ({\r\n    pop: false,\r\n    percent: 0,\r\n    id: params.id,\r\n    bid: params.bid,\r\n  }))\r\n  const container = useRef(null)\r\n  useEffect(() => {\r\n    loader.refresh({ params: { id: localStore.id, bid: localStore.bid } })\r\n    setTimeout(() => {\r\n      container.current.scrollTop = 1\r\n    }, 100)\r\n  })\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        {/* 顶部导航动态 */}\r\n        <VisualBoxView visible={localStore.pop}>\r\n          <div className=\"dd-common-alignside\" style={{ position: 'absolute', left: 0, top: 0, right: 0, backgroundColor: '#eee', height: 45, padding: '0 15px' }}>\r\n            <MIconView type=\"FaChevronLeft\" onClick={() => { router.back() }} />\r\n            <div className=\"dd-common-alignside\">\r\n              <MIconView type={'FaCloudDownloadAlt'} style={{ margin: '0 10px' }} />\r\n              <MIconView type={'IoIosHeadset'} style={{ margin: '0 10px' }} />\r\n              <MIconView type={'FaEllipsisH'} style={{ margin: '0 10px' }} />\r\n            </div>\r\n          </div>\r\n        </VisualBoxView>\r\n        {/* 内部文字 */}\r\n        <div className=\"full-height\" style={{ padding: '0 15px' }} onClick={() => { localStore.pop = !localStore.pop }}>\r\n          <VisualBoxView visible={loader.isEmpty}>\r\n            <AutoCenterView>\r\n              <ActivityIndicator text=\"加载中...\" />\r\n            </AutoCenterView>\r\n          </VisualBoxView>\r\n          {!loader.isEmpty && <Fragment>\r\n            <div style={{ padding: '8px 0', color: 'grey' }}>{loader.item.title}</div>\r\n            <div\r\n              ref={container}\r\n              className=\"full-height-auto scroll-smooth smooth\"\r\n              style={{ lineHeight: 2, letterSpacing: 2, fontSize: 16, textIndent: 20 }}\r\n              onScroll={() => {\r\n                // container.current.offsetHeight = container.current.scrollHeight - container.current.scrollTop;\r\n                let height = container.current.scrollHeight - container.current.offsetHeight\r\n                if (height <= 0) {\r\n                  height = 1\r\n                }\r\n                if (container.current.scrollTop < 1) {\r\n                  container.current.scrollTop = 1\r\n                }\r\n                if (container.current.scrollTop === height) {\r\n                  container.current.scrollTop = height - 1\r\n                }\r\n                localStore.percent = (100 * container.current.scrollTop / height).toFixed(1)\r\n              }}\r\n            >\r\n              {loader.isEmpty ? emptyView : <div>{loader.item.content}</div>}\r\n            </div>\r\n            <div className=\"dd-common-alignside\" style={{ padding: '8px 0', color: 'grey' }}>\r\n              <div className=\"dd-common-alignside\">\r\n                <span style={{ marginRight: 10 }}>2/12</span>\r\n                <span>{localStore.percent}%</span>\r\n              </div>\r\n              <div className=\"dd-common-alignside\">\r\n                <span style={{ marginRight: 10 }}>03:54</span>\r\n                <MIconView type=\"FaBatteryHalf\" style={{ display: 'inline-block', marginRight: 10 }} />\r\n                <span>{loader.isEmpty ? 0 : loader.item.content.length}</span>\r\n              </div>\r\n            </div>\r\n          </Fragment>}\r\n        </div>\r\n        {/* 底部动态菜单 */}\r\n        <VisualBoxView visible={localStore.pop}>\r\n          <div style={{ position: 'absolute', left: 0, right: 0, bottom: 0, fontSize: 12, backgroundColor: '#eee', padding: '0 10px' }}>\r\n            <div className=\"full-width\" style={{ height: 40 }}>\r\n              <span className=\"full-width-fix\" style={{ opacity: loader.isEmpty || loader.item.preId === '' ? 0.5 : 1 }} onClick={() => {\r\n                if (!loader.isEmpty && loader.item.preId) {\r\n                  loader.refresh({ params: { bid: localStore.bid, id: loader.item.preId } })\r\n                }\r\n              }}>上一章</span>\r\n              <Progress percent={localStore.percent} position={'normal'} className=\"full-width-auto\" style={{ margin: '0 10px' }} />\r\n              <span className=\"full-width-fix\" style={{ opacity: loader.isEmpty || loader.item.nextId === '' ? 0.5 : 1 }} onClick={() => {\r\n                if (!loader.isEmpty && loader.item.nextId) {\r\n                  localStore.id = loader.item.nextId\r\n                  loader.refresh({ params: { id: localStore.id, bid: localStore.bid } })\r\n                  container.current.scrollTop = 1\r\n                  // let id = loader.item.nextId\r\n                  // loader.clear()\r\n                  // router.replaceView(`/root/book/${localStore.bid}/chapter/${id}`, null, { hideMenu: true })\r\n                }\r\n              }}>下一章</span>\r\n            </div>\r\n            <div className=\"full-width\" style={{ height: 50 }}>\r\n              <div className=\"full-width-fix dd-common-centerXY\" style={{ flexDirection: 'column' }}>\r\n                <MIconView type=\"FaListUl\" />目录\r\n              </div>\r\n              <div className=\"full-width-auto dd-common-centerXY\" style={{ flexDirection: 'column' }}>\r\n                <MIconView type=\"FaCog\" />设置\r\n              </div>\r\n              <div className=\"full-width-fix dd-common-centerXY\" style={{ flexDirection: 'column' }}>\r\n                <MIconView type=\"FaEllipsisH\" />其他\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </VisualBoxView>\r\n      </Fragment>\r\n    }}\r\n  </Observer>\r\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport 'components/common.css'\r\n\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport BookListLoader from 'loader/BookListLoader'\r\nimport BookItemView from 'business/BookItemView'\r\nimport GroupTreeLoader from 'loader/GroupTreeLoader'\r\nimport { RenderGroups } from 'group'\r\n\r\nexport default function () {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const loader = GroupTreeLoader.create()\r\n  const booksLoader = BookListLoader.create()\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { group_id: 'D5698713D07045ADBBF5F0D5D09E53E4' } })\r\n    }\r\n    if (booksLoader.isEmpty) {\r\n      booksLoader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => <Fragment>\r\n      <Navi title=\"全部\" router={router} />\r\n      <div className=\"full-height-auto\" style={{ display: 'flex', flexDirection: 'column', flex: 1 }}>\r\n        <div>\r\n          <RenderGroups loader={loader} onQueryChange={query => {\r\n            booksLoader.refresh({ query })\r\n          }} />\r\n        </div>\r\n        <div style={{ flex: 1 }}>\r\n          <LoaderListView\r\n            loader={booksLoader}\r\n            renderItem={(item, selectionId, index) => <BookItemView\r\n              item={item}\r\n              router={router}\r\n              selectionId={selectionId}\r\n            />}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Fragment>}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport GroupTreeLoader from 'loader/GroupTreeLoader'\r\nimport { RenderGroups } from 'group'\r\n\r\nexport default function GroupTreePage() {\r\n  const loader = GroupTreeLoader.create()\r\n  const router = useRouterContext()\r\n  const store = useLocalStore(() => ({\r\n    title: router.getStateKey('title')\r\n  }))\r\n  const Navi = useNaviContext()\r\n  const params = router.params\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { group_id: params.group_id } })\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title={store.title} router={router} />\r\n      <RenderGroups loader={loader} />\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport GroupListLoader from 'loader/GroupListLoader'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport GroupItemView from 'business/GroupItemView'\r\n\r\nexport default function GroupTreePage() {\r\n  const loader = GroupListLoader.create()\r\n  const router = useRouterContext()\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <div style={{ flex: 1, height: '100%' }}>\r\n      <LoaderListView\r\n        loader={loader}\r\n        renderItem={(item, selectionId, index) => (\r\n          <GroupItemView item={item} selectionId={selectionId} router={router} />\r\n        )}\r\n      />\r\n    </div>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport SongSheetLoader from 'loader/SongSheetLoader'\r\nimport SongListLoader from 'loader/SongListLoader'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport SongSheetItemView from 'business/SongSheetItemView'\r\n\r\nimport SongItemView from 'business/SongItemView'\r\n\r\nexport default ({ self, children }) => {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const loader = SongSheetLoader.create()\r\n  const songListLoader = SongListLoader.create()\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n    if (songListLoader.isEmpty) {\r\n      songListLoader.refresh()\r\n    }\r\n  })\r\n  return <Observer>\r\n    {() => (\r\n      <div className=\"full-height\">\r\n        <Navi title=\"音乐\" router={router} />\r\n        <div className=\"full-height-auto\">\r\n          <LoaderListView\r\n            loader={loader}\r\n            renderItem={(item, selectionId, index) => (\r\n              <SongSheetItemView key={index} item={item} selectionId={selectionId} router={router} />\r\n            )}\r\n          />\r\n        </div>\r\n        <div className=\"full-height-auto\">\r\n          <LoaderListView\r\n            loader={songListLoader}\r\n            renderItem={(item) => (\r\n              <SongItemView mode=\"add\" item={item} router={router} />\r\n            )}\r\n          />\r\n        </div>\r\n      </div>\r\n    )}\r\n  </Observer>\r\n\r\n}","import React, { Fragment } from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport { useStoreContext } from 'contexts/store'\r\n\r\nimport SongSheetSongLoader from 'loader/SongSheetSongLoader'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport SongItemView from 'business/SongItemView'\r\nimport MIconView from 'components/MIconView'\r\nimport services from 'services'\r\n\r\nexport default function SongSheetPage() {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const gStore = useStoreContext()\r\n  const loader = SongSheetSongLoader.create()\r\n  const store = useLocalStore(() => ({\r\n    title: router.getStateKey('title')\r\n  }))\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { id: router.params.id } })\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title={store.title} router={router} />\r\n      <MIconView style={{ justifyContent: 'start' }} type=\"FaPlay\" after={'播放全部'} onClick={() => {\r\n        const items = loader.items.map(item => item.value)\r\n        gStore.music.setSheet(items)\r\n        loader.items[0].toggleStatus()\r\n        gStore.music.playMusic(loader.items[0].url, 0)\r\n      }} />\r\n      <div className=\"full-height\">\r\n        <LoaderListView\r\n          loader={loader}\r\n          renderItem={(item, selectionId, index) => (\r\n            <SongItemView mode={'delete'} item={item} router={router} remove={async (data) => {\r\n              await services.removeSheetSong({ params: { id: data.id, ssid: data.ssid } })\r\n              loader.remove(index)\r\n            }} />\r\n          )}\r\n        />\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React, { useEffect } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { ActivityIndicator } from 'antd-mobile'\r\nimport MIconView from 'components/MIconView'\r\nimport { useStoreContext } from 'contexts/store'\r\nimport { useRouterContext } from 'contexts/router'\r\n\r\nexport default function () {\r\n  const store = useStoreContext()\r\n  const router = useRouterContext()\r\n  const userLoader = store.userLoader\r\n  useEffect(() => {\r\n    if (userLoader.isEmpty) {\r\n      // userLoader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <div className=\"full-height\" onTouchStart={e => e.preventDefault()} onTouchMove={e => e.preventDefault()}>\r\n        <div className=\"full-width\" style={{ padding: '0 20px' }}>\r\n          <div className=\"full-width-fix dd-common-centerXY\" style={{ width: 35, height: 35, margin: '10px 0' }}>\r\n            {/* TODO: 测试 */}\r\n            {/* <img src={userLoader.isEmpty ? '' : userLoader.item.avater} /> */}\r\n            {userLoader.isLoading ? <ActivityIndicator /> : <img src=\"/logo.jpg\" style={{ borderRadius: '50%' }} alt=\"\" />}\r\n\r\n          </div>\r\n          <div className=\"full-width-auto\" style={{ paddingLeft: 10 }}>{userLoader.isEmpty ? '---' : userLoader.item.name}</div>\r\n          <div style={{ color: 'green' }}>\r\n            <MIconView type=\"FaQrcode\" />\r\n          </div>\r\n          {/* TODO: 个人信息页面 */}\r\n          <div className=\"full-width-fix\" onClick={() => router.pushView('/root/user-setting', null)}><MIconView type=\"FaAngleRight\" /></div>\r\n        </div>\r\n        <div className=\"dd-common-alignside\" style={{ padding: '10px 50px' }}>\r\n          <div>\r\n            <MIconView type=\"FaStar\" />收藏\r\n          </div>\r\n          <div>\r\n            <MIconView type=\"FaHistory\" />历史\r\n          </div>\r\n          <div>\r\n            <MIconView type=\"FaEllipsisV\" />其他\r\n          </div>\r\n        </div>\r\n        <div className=\"dd-common-alignside\" style={{ padding: '10px 50px' }}>\r\n          <div onClick={() => router.pushView('/root/secure', null, { title: '安全' })}>\r\n            <MIconView type=\"FaLock\" />安全\r\n          </div>\r\n          <div onClick={() => window.location.reload()}>\r\n            <MIconView type=\"FaSyncAlt\" />刷新\r\n          </div>\r\n          <div onClick={() => router.pushView('/root/category', null, { hideMenu: true })}>\r\n            <MIconView type=\"FaListAlt\" />分类\r\n          </div>\r\n        </div>\r\n      </div>\r\n    }\r\n  }</Observer >\r\n}","import React, { Fragment } from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\n\r\nimport { useRouterContext } from 'contexts/router'\r\nimport BookItemView from 'business/BookItemView'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport globalStore from 'global-state'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = globalStore.bookShelfLoader\r\n  const localStore = useLocalStore(() => ({\r\n    loading: false,\r\n\r\n  }))\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <Fragment>\r\n        <LoaderListView\r\n          loader={loader}\r\n          renderItem={(item, sectionId, index) => (\r\n            <BookItemView\r\n              item={item}\r\n              router={router}\r\n              sectionId={sectionId}\r\n              toggleLoading={() => localStore.loading = !localStore.loading}\r\n            />\r\n          )}\r\n        />\r\n      </Fragment>\r\n    }\r\n  }</Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { Switch } from 'antd-mobile'\r\nimport globalStore from 'global-state'\r\nimport { useProvider } from 'contexts/router'\r\nimport { useNaviContext } from 'contexts/navi'\r\n\r\nexport default function SecurePage() {\r\n  const router = useProvider()\r\n  const Navi = useNaviContext()\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title=\"安全\" router={router} />\r\n      <div className=\"full-height\">\r\n        <div className=\"dd-common-alignside\" style={{ padding: '15px 20px', backgroundColor: 'white' }}>\r\n          密码锁\r\n        <Switch checked={globalStore.app.config.isLockerOpen} onChange={checked => globalStore.app.setLocker(checked)} />\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React, { useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { Button, } from 'antd-mobile'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport MIconView from 'components/MIconView'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport TodoListLoader from 'loader/TodoListLoader'\r\nimport TodoItemView from 'business/TodoItemView'\r\n\r\nexport default function SecurePage() {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const todoLoader = TodoListLoader.create()\r\n  const localStore = useLocalStore(() => ({\r\n    type: '1'\r\n  }))\r\n  useEffect(() => {\r\n    if (todoLoader.isEmpty) {\r\n      todoLoader.refresh({ query: { type: localStore.type } })\r\n    }\r\n  })\r\n\r\n  return <Observer>{() => (\r\n    <div className=\"full-height\">\r\n      <Navi title=\"TODO\" router={router}>\r\n        <MIconView\r\n          type=\"FaPlus\"\r\n          style={{ display: 'inline-block' }}\r\n          onClick={() => {\r\n            router.pushView('/root/add-todo')\r\n          }}\r\n        />\r\n      </Navi>\r\n      <div className=\"full-height-auto\">\r\n        <LoaderListView\r\n          loader={todoLoader}\r\n          renderItem={(item, selectionId, index) => (\r\n            <TodoItemView item={item} selectionId={selectionId} router={router} />\r\n          )}\r\n        />\r\n      </div>\r\n      <div className=\"full-height-fix\">\r\n        <Button type=\"primary\" onClick={() => {\r\n          localStore.type = localStore.type === '1' ? '' : '1'\r\n          todoLoader.refresh({ query: { type: localStore.type } })\r\n        }}>{localStore.type === '' ? '隐藏已完成' : '显示已完成'}</Button>\r\n      </div>\r\n    </div>\r\n  )}</Observer>\r\n}","import React, { useEffect } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport MIconView from 'components/MIconView'\r\nimport { useStoreContext } from 'contexts/store'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { List, Button } from 'antd-mobile'\r\n\r\nexport default function () {\r\n  const store = useStoreContext()\r\n  const router = useRouterContext()\r\n  const Navi = useNaviContext()\r\n  useEffect(() => {\r\n\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <div className=\"full-height\">\r\n\r\n        <Navi title=\"设置\" router={router} />\r\n        <div>\r\n          <List renderHeader={() => '设置'}>\r\n            <List.Item>\r\n              <div className=\"dd-common-alignside\">\r\n                <span>账号设置</span>\r\n                <MIconView type=\"FaAngleRight\" />\r\n              </div>\r\n            </List.Item>\r\n          </List>\r\n          <div style={{ padding: 10 }}>\r\n            <Button type=\"primary\" onClick={() => { store.app.setAccessToken(''); router.pushView('/') }}>退出</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    }\r\n  }</Observer >\r\n}","import React, { useContext as useReactContext, useState } from 'react'\nimport * as path2reg from 'path-to-regexp'\nimport pages from '../../pages'\n\n// 上下文context.避免react多级一直传props\nconst Context = React.createContext(null)\nconst rules = pages.map(page => {\n  let url = page.pathname\n  let res = { reg: path2reg(url), params: [] }\n  path2reg.parse(url).forEach(it => {\n    if (typeof it === 'object') {\n      res.params.push(it.name)\n    }\n  })\n  return res\n})\n/**\n * 使用:\n * 创建上下文\n * import useProvider from this\n * const [router, routerContext]=useProvider(history,location);\n * <routerContext.Provider value={router}>\n *   ...\n * </routerContext.Provider>\n * 使用上下文\n * import {useRouterContext} from this\n * let router = useRouterContext();\n * router.goto(...);\n */\nexport function useProvider(history) {\n  let [state] = useState(() => {\n    let route = {\n      history,\n      get params() {\n        let res = {}\n        for (let i = 0; i < rules.length; i++) {\n          let rule = rules[i]\n          let m = rule.reg.exec(history.location.pathname)\n          if (m) {\n            rule.params.forEach((name, index) => {\n              res[name] = m[index + 1]\n            })\n            break\n          }\n        }\n        return res\n      },\n      get hideMenu() {\n        return history.location.state && history.location.state.hideMenu ? true : false\n      },\n      getStateKey(key) {\n        return history.location.state && history.location.state[key]\n      },\n      back() {\n        const { userClick, login } = history.location.state || { userClick: true }\n        if (login) {\n          // 登录跳转进来的页面\n          route.backToRoot()\n        } else if (userClick) {\n          // 正常操作进入\n          route.history.goBack()\n        } else {\n          // 可能是直接通过URL进来的\n          route.backToRoot()\n        }\n      },\n      backToRoot(params, state) {\n        const { pathname, search } = getBackToRootLocation(params)\n        history.push({\n          pathname,\n          search,\n          state: {\n            login: true,\n            userClick: true,\n            ...state\n          }\n        })\n      },\n      gotoLoginTarget() {\n        // target 存于全局store中\n        // 因为某种原因被强制跳到login,登录后返回原来的位置\n        // getStore => 如果有则跳转,否则到首页\n        // TODO:\n      },\n      pushView(pathname, params = {}, state) {\n        state = state || {}\n        state.userClick = true\n        state.hideMenu = state.hideMenu === false ? false : true\n        let search = ''\n        for (let k in params) {\n          search += `${k}=${params[k]}`\n        }\n        history.push({\n          pathname,\n          search,\n          state\n        })\n      },\n      replaceView(pathname, params = {}, state) {\n        state = state || {}\n        state.userClick = true\n        let search = ''\n        for (let k in params) {\n          search += `${k}=${params[k]}`\n        }\n        history.replace({\n          pathname,\n          search,\n          state\n        })\n      }\n    }\n    return route\n  })\n  return [state, Context]\n}\n\nexport function useRouterContext() {\n  return useReactContext(Context)\n}\n\nfunction getBackToRootLocation() {\n\n}\n","import React, { Fragment, useRef } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\n\r\nexport default function Dragger({ children, cb, ...props }) {\r\n  const dragger = useRef(null)\r\n  const store = useLocalStore(() => ({\r\n    started: false,\r\n    top: 0,\r\n    left: 0,\r\n    offsetLeft: 0,\r\n    offsetTop: 0,\r\n    // mode ...\r\n  }))\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <div ref={node => {\r\n        if (node) {\r\n          dragger.current = node\r\n          node.addEventListener('touchstart', e => {\r\n            store.started = TextTrackCue\r\n            e = e.touches[0]\r\n            store.left = e.clientX - node.offsetLeft\r\n            store.top = e.clientY - node.offsetTop\r\n            if (store.left < 0) {\r\n              store.left = 0\r\n            }\r\n            if (store.top < 0) {\r\n              store.top = 0\r\n            }\r\n            store.offsetLeft = 0\r\n            store.offsetTop = 0\r\n          })\r\n          node.addEventListener('touchmove', e => {\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n            e = e.touches[0]\r\n            if (store.started) {\r\n              store.offsetLeft = e.clientX - store.left\r\n              store.offsetTop = e.clientY - store.top\r\n            }\r\n            // 控制可拖动范围\r\n            if (cb) {\r\n              cb(store)\r\n            }\r\n          })\r\n          node.addEventListener('touchend', e => {\r\n            store.started = false\r\n          })\r\n        }\r\n      }}>\r\n        {children}\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React, { useContext, useRef } from 'react'\r\nimport store from '../../global-state'\r\nimport storage from 'utils/storage'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { Popover } from 'antd-mobile'\r\nimport events from 'utils/events'\r\nimport MIconView from 'components/MIconView'\r\nimport VisibleBoxView from 'components/VisualBoxView'\r\nimport Dragger from 'components/Dragger'\r\n\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nfunction MusicPlayer() {\r\n  const player = useRef(null)\r\n  const music = store.music\r\n  const MODE = music.type\r\n  const EVENT = music.event\r\n  const pos = storage.getValue('music')\r\n  const musicStore = useLocalStore(() => ({\r\n    showModePop: false,\r\n    url: '',\r\n    top: pos ? pos.top : 210,\r\n    left: pos ? pos.left : 100,\r\n  }))\r\n  let timer = null\r\n  events.on(EVENT.PLAY, (url, order) => {\r\n    music.setUrl(url, order)\r\n    musicStore.url = store.app.baseURL + url\r\n    setTimeout(() => {\r\n      // TODO: 请求中间态处理 不停重试,除非遇到错误\r\n      if (player.current) {\r\n        player.current.play()\r\n      }\r\n    }, 100)\r\n  })\r\n  events.on(EVENT.PLAY_SINGLE, (url, order) => {\r\n    music.setUrl(url, order)\r\n    musicStore.url = store.app.baseURL + url\r\n    setTimeout(() => {\r\n      // TODO: 请求中间态处理 不停重试,除非遇到错误\r\n      if (player.current) {\r\n        player.current.play()\r\n      }\r\n    }, 100)\r\n  })\r\n  events.on(EVENT.PAUSE, () => {\r\n    player.current.pause()\r\n  })\r\n  return <Observer>\r\n    {() => (\r\n      <div style={{\r\n        position: 'fixed',\r\n        zIndex: 10,\r\n        top: musicStore.top,\r\n        left: musicStore.left,\r\n      }} className=\"full-width\">\r\n        <Dragger cb={sstore => {\r\n          musicStore.left = Math.max(0, sstore.left + sstore.offsetLeft)\r\n          musicStore.top = Math.max(0, sstore.top + sstore.offsetTop)\r\n          clearTimeout(timer)\r\n          timer = null\r\n          timer = setTimeout(() => {\r\n            storage.setValue('music', { left: musicStore.left, top: musicStore.top })\r\n          }, 100)\r\n        }}>\r\n          <MIconView type=\"FaArrowsAlt\" />\r\n        </Dragger>\r\n        <Popover mask\r\n          placement={'topLeft'}\r\n          visible={musicStore.showModePop}\r\n          overlay={[\r\n            (<Popover.Item key={MODE.ONE} value={MODE.ONE}><MIconView type=\"MdRepeatOne\" />单曲</Popover.Item>),\r\n            (<Popover.Item key={MODE.RANDOM} value={MODE.RANDOM}><MIconView type=\"MdShuffle\" />随机</Popover.Item>),\r\n            (<Popover.Item key={MODE.LIST} value={MODE.LIST}><MIconView type=\"MdTrendingFlat\" />列表</Popover.Item>),\r\n            (<Popover.Item key={MODE.CIRCLE} value={MODE.CIRCLE}><MIconView type=\"MdRepeat\" />循环</Popover.Item>),\r\n          ]}\r\n          onVisibleChange={visible => {\r\n            musicStore.showModePop = visible\r\n          }}\r\n          onSelect={opt => {\r\n            music.setMode(opt.props.value)\r\n            musicStore.showModePop = false\r\n          }}\r\n        >\r\n          <span>\r\n            <VisibleBoxView visible={music.mode === MODE.RANDOM}>\r\n              <MIconView type=\"MdShuffle\" />\r\n            </VisibleBoxView>\r\n            <VisibleBoxView visible={music.mode === MODE.ONE}>\r\n              <MIconView type=\"MdRepeatOne\" />\r\n            </VisibleBoxView>\r\n            <VisibleBoxView visible={music.mode === MODE.LIST}>\r\n              <MIconView type=\"MdTrendingFlat\" />\r\n            </VisibleBoxView>\r\n            <VisibleBoxView visible={music.mode === MODE.CIRCLE}>\r\n              <MIconView type=\"MdRepeat\" />\r\n            </VisibleBoxView>\r\n          </span>\r\n        </Popover>\r\n        <MIconView type=\"MdSkipNext\" onClick={() => {\r\n          music.playNext()\r\n        }} />\r\n        <audio ref={value => { player.current = value }}\r\n          onCanPlay={() => {\r\n          }}\r\n          onLoadedMetadata={() => {\r\n          }\r\n          }\r\n          onLoadedData={() => {\r\n          }}\r\n          onProgress={() => {\r\n          }}\r\n          onEnded={() => {\r\n            if (music.mode === MODE.ONE) {\r\n              player.current.play()\r\n            }\r\n            if (music.mode === MODE.RANDOM) {\r\n              music.playRandom()\r\n            }\r\n            if (music.mode === MODE.LIST) {\r\n              music.playNext()\r\n            }\r\n            if (music.mode === MODE.CIRCLE) {\r\n              music.playNext()\r\n            }\r\n          }}\r\n          src={musicStore.url} controls=\"controls\" preload=\"true\"></audio>\r\n      </div>\r\n    )}\r\n  </Observer>\r\n}\r\n\r\nexport function createProvider() {\r\n  return [MusicPlayer, Context]\r\n}\r\n\r\nexport function useMusicPlayerContext() {\r\n  return useContext(Context)\r\n}","import React, { useContext as useReactContext } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport store from '../../global-state'\r\nimport storage from 'utils/storage'\r\nimport MIconView from 'components/MIconView'\r\nimport Dragger from 'components/Dragger'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nfunction Debug(prop) {\r\n  const debug = store.debug\r\n  const pos = storage.getValue('debug')\r\n  const debugStore = useLocalStore(() => ({\r\n    top: pos ? pos.top : 300,\r\n    left: pos ? pos.left : 0,\r\n  }))\r\n  let timer = null\r\n  return <Observer>{() => (\r\n    <div className=\"full-height\" style={{\r\n      position: 'fixed',\r\n      color: 'white',\r\n      zIndex: 10,\r\n      width: 300,\r\n      height: 150,\r\n      top: debugStore.top,\r\n      left: debugStore.left,\r\n      padding: 10,\r\n      backgroundColor: 'black',\r\n      opacity: 0.5\r\n    }}>\r\n      <div className=\"dd-common-alignside\">\r\n        <Dragger cb={sstore => {\r\n          debugStore.left = Math.max(0, sstore.left + sstore.offsetLeft)\r\n          debugStore.top = Math.max(0, sstore.top + sstore.offsetTop)\r\n          clearTimeout(timer)\r\n          timer = null\r\n          timer = setTimeout(() => {\r\n            storage.setValue('debug', { left: debugStore.left, top: debugStore.top })\r\n          }, 100)\r\n        }}>\r\n          <MIconView type=\"FaArrowsAlt\" />\r\n        </Dragger>\r\n        <MIconView type={debug.showMap ? 'FaCaretDown' : 'FaCaretRight'} onClick={() => {\r\n          debug.toggleMap()\r\n        }} />\r\n        <div className=\"dd-common-alignside\">\r\n          <MIconView type=\"FaRegTrashAlt\" onClick={() => { debug.clear() }} />\r\n          <MIconView type=\"FaSyncAlt\" onClick={() => { window.location.reload() }} />\r\n        </div>\r\n      </div>\r\n      <VisualBoxView visible={debug.showMap}>\r\n        <div className=\"full-height-auto\">\r\n          {debug.maps.map((item, index) => (<p key={index}>{item.key}:{item.value}</p>))}\r\n        </div>\r\n      </VisualBoxView>\r\n      <div className=\"full-height-auto\">\r\n        {debug.messages.map((message, index) => <p key={index}>{message}</p>)}\r\n      </div>\r\n    </div>\r\n  )}</Observer>\r\n}\r\n\r\nexport function createDebugProvider() {\r\n  return [Debug, Context]\r\n}\r\n\r\nexport function useDebugContext() {\r\n  return useReactContext(Context)\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\n\r\nimport './index.css'\r\n\r\nexport default function (props) {\r\n    const keys = [\r\n        { char: '1', name: '', className: '', },\r\n        { char: '2', name: '', className: 'center', },\r\n        { char: '3', name: '', className: '', },\r\n        { char: '4', name: '', className: '', },\r\n        { char: '5', name: '', className: 'center', },\r\n        { char: '6', name: '', className: '', },\r\n        { char: '7', name: '', className: '', },\r\n        { char: '8', name: '', className: 'center', },\r\n        { char: '9', name: '', className: '', },\r\n        { char: '', name: '清空', className: '', },\r\n        { char: '0', name: '', className: 'center', },\r\n        { char: 'x', name: '删除', className: '', },\r\n    ]\r\n    return <Observer>\r\n        {() => {\r\n            return <div style={{ width: '100%', position: 'relative', paddingTop: '100%', marginBottom: '35%' }}>\r\n                <div className=\"box\" style={{ position: 'absolute', left: 0, right: 0, top: 0, bottom: 0 }}>\r\n                    {\r\n                        keys.map((it, index) => <div key={index} className={['cell', it.className].join(' ')} onClick={()=>props.handler(it.char)}>{it.name || it.char}</div>)\r\n                    }\r\n                </div>\r\n            </div>\r\n        }}\r\n    </Observer>\r\n\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport globalStore from 'global-state'\r\nimport MIconView from '../MIconView'\r\nimport Sudoku from '../SudokuView'\r\n\r\nimport './index.css'\r\n\r\nexport default function Locker() {\r\n  const store = useLocalStore(() => ({\r\n    pin: [],\r\n    animate: '',\r\n  }))\r\n  function handler(key) {\r\n    if (key === 'x') {\r\n      store.pin.pop()\r\n    } else if (key === '') {\r\n      store.pin = []\r\n    } else {\r\n      store.pin.push(key)\r\n      if (store.pin.length >= globalStore.app.config.lockerLength) {\r\n        if (store.pin.join('') === globalStore.app.config.lockerPin) {\r\n          store.animate = 'success'\r\n          setTimeout(() => {\r\n            globalStore.app.setLocked(false)\r\n          }, 1000)\r\n        } else {\r\n          store.animate = 'fail'\r\n          setTimeout(() => {\r\n            store.animate = ''\r\n            store.pin = []\r\n          }, 1000)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        <div style={{ display: 'flex', flexDirection: 'column', height: '100%', justifyContent: 'center', alignItems: 'center', textAlign: 'center' }}>\r\n          <div style={{ flex: '0 0 0%', width: '100%', }}>\r\n            <MIconView type=\"FaLock\" style={{ width: '100%', margin: '40px 0 40px 0', color: 'green' }} />\r\n            <p>请输入锁定码</p>\r\n            <div className={store.animate} style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center', width: '80%', margin: 'auto' }}>\r\n              {\r\n                globalStore.app.config.lockerPin.split('').map((it, index) => {\r\n                  if (index >= store.pin.length) {\r\n                    return <MIconView style={{ margin: '0 8px' }} key={index} type=\"FaRegCircle\" />\r\n                  } else {\r\n                    return <MIconView style={{ margin: '0 8px' }} key={index} type=\"FaCircle\" />\r\n                  }\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n          <div style={{ flex: 1, width: '70%', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\r\n            <Sudoku handler={handler} />\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    }}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { TabBar } from 'antd-mobile'\nimport { useRouterContext } from 'contexts/router'\nimport MIconView from 'components/MIconView'\n\nimport config from 'config'\nimport store from 'global-state'\n\nexport default function ({ children }) {\n  let router = useRouterContext()\n  return <Observer>\n    {() => {\n      if (router.hideMenu || !router.history.location.pathname.startsWith('/root')) {\n        return children\n      } else {\n        return <Fragment>\n          <TabBar\n            tintColor=\"#33A3F4\"\n            unselectedTintColor=\"#888\"\n            tabBarPosition=\"bottom\"\n            barTintColor=\"white\"\n          >\n            {config.menus.map(menu => {\n              return <TabBar.Item\n                title={menu.big ? '' : menu.title}\n                key={menu.name}\n                icon={<MIconView style={menu.big ? { marginTop: -20, zIndex: 2, fontSize: '3rem' } : { margin: 3 }} type={menu.icon} />}\n                selectedIcon={<MIconView style={{ margin: 3 }} type={menu.icon} />}\n                selected={menu.name === store.app.selectedMenu}\n                onPress={() => {\n                  store.app.setMenu(menu.name)\n                  router.pushView(menu.path, null, { title: menu.title, hideMenu: menu.hideMenu ? true : false })\n                }}\n              >\n                {children}\n              </TabBar.Item>\n            })}\n          </TabBar>\n        </Fragment>\n      }\n    }}\n  </Observer>\n}","import { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom'\nimport React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { useStoreContext } from 'contexts/store'\nimport { useProvider } from 'contexts/router'\nimport { createNaviProvider } from 'contexts/navi'\nimport { createProvider as useMusicPlayerProvider } from 'contexts/music'\nimport { createDebugProvider } from 'contexts/debug'\nimport Locker from 'components/LockerView'\nimport Layout from './layout'\n\nimport pages from 'pages'\n\n// 路由=>组件.没登录跳到登录.登录了匹配root.匹配失败就重定向route.\n\nfunction App(props) {\n  const store = useStoreContext()\n  const [router, RouterContext] = useProvider(props.history)\n  const [navi, NaviContext] = createNaviProvider()\n  const [MusicPlayer] = useMusicPlayerProvider()\n  const [Debug] = createDebugProvider()\n  // 默认是home\n  const name = props.location.pathname.split('/').pop()\n  if (store.app.selectedMenu !== name) {\n    store.app.setMenu(name)\n  }\n  return <RouterContext.Provider value={router}>\n    <NaviContext.Provider value={navi}>\n      <Observer>{\n        () => {\n          if (!store.app.isLogin && props.location.pathname.startsWith('/root')) {\n            return <Redirect to={'/auth/login'}></Redirect>\n          } else if (store.app.isLogin) {\n            if (store.app.config.isLockerOpen && store.app.config.isLockerLocked) {\n              return <Locker />\n            }\n          }\n          return <Fragment>\n            <MusicPlayer />\n            <Debug />\n            <Layout>\n              <Switch>\n                {/* <Route path={'/root/*'} component={AppRoot}></Route> */}\n                {pages.map(page => <Route key={page.pathname} path={page.pathname} component={page.component}></Route>)}\n                <Route component={NoMatch}></Route>\n              </Switch>\n            </Layout>\n          </Fragment>\n        }\n      }</Observer>\n    </NaviContext.Provider>\n  </RouterContext.Provider>\n}\n\nfunction NoMatch() {\n  const store = useStoreContext()\n  if (store.app.isLogin) {\n    return <Redirect to={'/root/home'}></Redirect>\n  } else {\n    return <Redirect to={'/auth/login'}></Redirect>\n  }\n}\n\nexport default function Index() {\n  return <BrowserRouter basename={'/'}>\n    <Route path={'/*'} component={App}></Route>\n  </BrowserRouter>\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n      // [::1] is the IPv6 localhost address.\r\n      window.location.hostname === '[::1]' ||\r\n      // 127.0.0.1/8 is considered localhost for IPv4.\r\n      window.location.hostname.match(\r\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n      )\r\n  )\r\n  \r\n  export function register(config) {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n      // The URL constructor is available in all browsers that support SW.\r\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\r\n      if (publicUrl.origin !== window.location.origin) {\r\n        // Our service worker won't work if PUBLIC_URL is on a different origin\r\n        // from what our page is served on. This might happen if a CDN is used to\r\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n        return\r\n      }\r\n  \r\n      window.addEventListener('load', () => {\r\n        const swUrl = `${process.env.PUBLIC_URL}/custom-sw.js`\r\n  \r\n        if (isLocalhost) {\r\n          // This is running on localhost. Let's check if a service worker still exists or not.\r\n          checkValidServiceWorker(swUrl, config)\r\n  \r\n          // Add some additional logging to localhost, pointing developers to the\r\n          // service worker/PWA documentation.\r\n          navigator.serviceWorker.ready.then(() => {\r\n            console.log(\r\n              'This web app is being served cache-first by a service ' +\r\n                'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n            )\r\n          })\r\n        } else {\r\n          // Is not localhost. Just register service worker\r\n          registerValidSW(swUrl, config)\r\n        }\r\n      })\r\n    }\r\n  }\r\n  \r\n  function registerValidSW(swUrl, config) {\r\n    navigator.serviceWorker\r\n      .register(swUrl)\r\n      .then(registration => {\r\n        registration.onupdatefound = () => {\r\n          const installingWorker = registration.installing\r\n          if (installingWorker == null) {\r\n            return\r\n          }\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the updated precached content has been fetched,\r\n                // but the previous service worker will still serve the older\r\n                // content until all client tabs are closed.\r\n                console.log(\r\n                  'New content is available and will be used when all ' +\r\n                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n                )\r\n  \r\n                // Execute callback\r\n                if (config && config.onUpdate) {\r\n                  config.onUpdate(registration)\r\n                }\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // \"Content is cached for offline use.\" message.\r\n                console.log('Content is cached for offline use.')\r\n  \r\n                // Execute callback\r\n                if (config && config.onSuccess) {\r\n                  config.onSuccess(registration)\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error during service worker registration:', error)\r\n      })\r\n  }\r\n  \r\n  function checkValidServiceWorker(swUrl, config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n      .then(response => {\r\n        // Ensure service worker exists, and that we really are getting a JS file.\r\n        const contentType = response.headers.get('content-type')\r\n        if (\r\n          response.status === 404 ||\r\n          (contentType != null && contentType.indexOf('javascript') === -1)\r\n        ) {\r\n          // No service worker found. Probably a different app. Reload the page.\r\n          navigator.serviceWorker.ready.then(registration => {\r\n            registration.unregister().then(() => {\r\n              window.location.reload()\r\n            })\r\n          })\r\n        } else {\r\n          // Service worker found. Proceed as normal.\r\n          registerValidSW(swUrl, config)\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.log(\r\n          'No internet connection found. App is running in offline mode.'\r\n        )\r\n      })\r\n  }\r\n  \r\n  export function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n      navigator.serviceWorker.ready.then(registration => {\r\n        registration.unregister()\r\n      })\r\n    }\r\n  }","// import App from './app';\nimport React, { Fragment } from 'react'\nimport ReactDOM from 'react-dom'\nimport { ActivityIndicator } from 'antd-mobile'\nimport RouterRoot from './router'\nimport globalStore from './global-state'\nimport { isDeskTop } from './utils/utils'\nimport { Observer } from 'mobx-react-lite'\nimport { useProvider } from 'contexts/store'\nimport './components/common.css'\nimport 'antd-mobile/dist/antd-mobile.css'\n// https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/src/serviceWorker.js\nimport * as serviceWorker from './service-worker'\n\n// 引入router.顺便做点什么: loading/emptyView什么的\nfunction App() {\n  const [store, StoreContext] = useProvider(globalStore)\n  return <Observer>\n    {() => <Fragment>\n      <StoreContext.Provider value={store}>\n        <RouterRoot></RouterRoot>\n      </StoreContext.Provider>\n    </Fragment>\n    }\n  </Observer>\n}\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      error: null,\n      info: null,\n      isLoading: false,\n      lastTS: Date.now(),\n      isDesktop: isDeskTop()\n    }\n  }\n\n  componentDidCatch(error, info) {\n    this.setState({ hasError: true, error, info })\n  }\n\n  componentDidMount() {\n    document.getElementById('start-loading').style.display = 'none'\n    document.getElementById('box').className = isDeskTop(false) ? 'box-app' : 'box-browser'\n    window.addEventListener('resize', () => {\n      let isApp = isDeskTop(false)\n      document.getElementById('box').className = isApp ? 'box-app' : 'box-browser'\n      this.setState({ isDeskTop: isApp })\n    })\n    document.addEventListener('visibilitychange', async (e) => {\n      // TODO: 时间过长处理.刷新\n      if (document.hidden) {\n        globalStore.app.resetLeaveTS()\n      } else if (globalStore.app.config.isLockerLocked === false) {\n        globalStore.app.setLocked(Date.now() - globalStore.app.leaveTS > globalStore.app.config.lockerSeconds)\n      }\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <Fragment>\n        <div>程序崩溃了,<div onClick={() => {\n          this.setState({ isLoading: true }, async () => {\n            // TODO: 防封处理 const result = await checkHost();\n            this.setState({ isLoading: false })\n            this.setState({ hasError: false }, () => {\n              window.location.reload()\n            })\n          })\n        }}>点我重试</div></div>\n        <ActivityIndicator\n          toast\n          text=\"正在刷新...\"\n          animating={this.state.isLoading}\n        />\n      </Fragment>\n    } else if (this.state.isDesktop) {\n      return <Fragment>\n        {this.props.children}\n        <ActivityIndicator\n          toast\n          text=\"正在刷新...\"\n          animating={this.state.isLoading}\n        />\n      </Fragment>\n    } else {\n      return <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>程序正在开发中...</div>\n    }\n  }\n}\n\n// 总入口: 将组件挂载到dom上\nReactDOM.render(<ErrorBoundary>\n  <App />\n</ErrorBoundary>, document.getElementById('root'))\n\n// serviceWorker.unregister();\nserviceWorker.register()"],"sourceRoot":""}