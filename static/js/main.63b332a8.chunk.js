(window.webpackJsonpdemo=window.webpackJsonpdemo||[]).push([[0],{108:function(e,t,n){},127:function(e,t,n){e.exports=n(232)},17:function(e,t){e.exports={setValue:function(e,t){var n="string";switch(typeof t){case"number":n="number";break;case"date":n="date",t=t.getTime();break;case"object":n="json"}window.localStorage.setItem(e,JSON.stringify({type:n,value:t}))},getValue:function(e){var t=window.localStorage.getItem(e),n=null;if(null!==t&&/^\{.*\}$/.test(t))try{var a=JSON.parse(t);n="date"===a.type?new Date(a.value):a.value}catch(r){this.removeKey(e)}else this.removeKey(e);return n},removeKey:function(e){window.localStorage.removeItem(e)}}},206:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},23:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n.n(a),o=n(14),i=n(53),c=n(54),l=n(125),s=n(110),u=n(126),m=n(27),d=n(1),p=n.n(d),f=n(16),g=n.n(f),h=n(13),b=n(37),v=n(124),y=n(12),E=p.a.createContext(null);function k(){return Object(d.useContext)(E)}var w=n(36),x=n(84),O=n(19),j=n(118),C=n(116),N=n(117);n(206);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(w.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.type,n=e.className,a=void 0===n?"":n,r=e.inline,o=void 0!==r&&r,i=e.size,c=void 0===i?"sm":i,l=e.style,s=void 0===l?{}:l,u=e.after,m=void 0===u?"":u,d=e.before,f=void 0===d?"":d,g=Object(O.a)(e,["type","className","inline","size","style","after","before"]),h=t.startsWith("Fa")?C[t]:t.startsWith("Md")?N[t]:j[t];return p.a.createElement("div",Object.assign({style:S({display:o?"inline-block":"flex",fontSize:"md"===c?"1.5rem":"bg"===c?"2rem":"1.1rem",alignItems:"center",justifyContent:"center"},s),className:"".concat(a)},g),f,p.a.createElement(h,{style:{margin:"0 4px"}}),m)},F=p.a.createContext(null);function A(e){return p.a.createElement("div",{className:"dd-common-alignside",style:{height:45,padding:"0 15px",backgroundColor:"white",borderBottom:"1px solid #eee"}},p.a.createElement("div",{style:{flex:1}},p.a.createElement("div",{style:{display:!1===e.showBack?"none":"inline-block"}},p.a.createElement(T,{type:"FaChevronLeft",onClick:function(){console.log(e),e.router.back()}}))),p.a.createElement("div",{style:{flex:1,textAlign:"center",fontSize:16,fontWeight:"600"}},e.title),p.a.createElement("div",{style:{flex:1,textAlign:"right"}},e.children))}function M(){return Object(d.useContext)(F)}n(23);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(w.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={bigCate:{margin:"10px 0",padding:"0 20px",borderLeftWidth:2,borderLeftStyle:"solid",borderLeftColor:"transparent"},choosed:{borderLeftColor:"red"},subCate:{width:"50%",float:"left",padding:"10px",boxSizing:"border-box"}};function R(e){var t=e.cates;e.router;return t?t.children.map((function(e){return p.a.createElement("div",{key:e.id,className:"full-width",style:D.subCate},p.a.createElement("img",{src:e.poster,alt:"",style:{width:60,height:70,backgroundColor:"#bbb"}}),p.a.createElement("div",{className:"dd-common-centerXY",style:{flexDirection:"column",alignItems:"start",paddingLeft:10}},p.a.createElement("div",{style:{fontSize:"1.2em",color:"black",fontWeight:"bold",paddingBottom:5}},e.name),p.a.createElement("div",null,e.count,"\u90e8")))})):null}var V=function(e){var t=e.children;return p.a.createElement("div",{className:"dd-common-centerXY"},t)},B=function(e){var t=e.visible,n=e.children;return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,t&&n)}))},z=n(119),q=n.n(z),U=n(3),Y=n(17),_=n.n(Y),W=U.b.model({selectedMenu:U.b.optional(U.b.string,"book-shelf"),fullScreen:U.b.optional(U.b.boolean,!1),accessTokenName:U.b.optional(U.b.string,"access-token"),refreshTokenName:U.b.optional(U.b.string,"refresh-token"),lockerName:U.b.optional(U.b.string,"locker"),baseURL:U.b.optional(U.b.string,"/"),account:U.b.optional(U.b.string,""),accessToken:U.b.optional(U.b.string,""),refreshToken:U.b.optional(U.b.string,""),musicModeName:U.b.optional(U.b.string,"music-mode"),leaveTS:U.b.optional(U.b.number,Date.now()-360),config:U.b.model({isLockerOpen:U.b.optional(U.b.boolean,!0),isLockerLocked:U.b.optional(U.b.boolean,!1),lockerLength:U.b.optional(U.b.number,6),lockerSeconds:U.b.optional(U.b.number,18e5),lockerPin:U.b.optional(U.b.string,"789654")},{})}).views((function(e){return{get isLogin(){return!!e.accessToken}}})).actions((function(e){return{initLocker:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in t)e.config[n]=t[n]},setLocker:function(t){e.config.isLockerOpen=t,_.a.setValue(e.lockerName,e.config)},setLocked:function(t){e.config.isLockerLocked=t,_.a.setValue(e.lockerName,e.config)},setLockerPin:function(t){e.config.lockerPin=t,_.a.setValue(e.lockerName,e.config)},setLockerLength:function(t){e.config.lockerLength=t,_.a.setValue(e.lockerName,e.config)},setLockerSeconds:function(t){e.config.lockerSeconds=t,_.a.setValue(e.lockerName,e.config)}}})).actions((function(e){return{setMenu:function(t){e.selectedMenu=t},setBaseURL:function(t){e.baseURL=t,ue.defaults.baseURL=t,_.a.setValue("baseURL",t)},resetLeaveTS:function(){e.leaveTS=Date.now()}}})).actions((function(e){return{logout:function(){e.accessToken="",e.refreshToken="",_.a.removeKey(e.accessTokenName),_.a.removeKey(e.refreshTokenName)},setAccessToken:function(t){e.accessToken=t,_.a.setValue(e.accessTokenName,t)},setRefreshToken:function(t){e.refreshToken=t,_.a.setValue(e.refreshTokenName,t)}}})).actions((function(e){return{setMusicModeName:function(t){_.a.setValue(e.musicModeName,t)}}})),X=U.b.model({maps:U.b.array(U.b.frozen({})),messages:U.b.array(U.b.string),showMap:U.b.optional(U.b.boolean,!1)}).actions((function(e){return{append:function(t){e.messages.push(t)},update:function(t,n){var a=e.maps.find((function(e){return e.key===t}));a?a.value=n:e.maps.push({key:t,value:n})},clear:function(){e.messages=[],e.map={}},toggleMap:function(){e.showMap=!e.showMap}}})),H=new(n(120).EventEmitter),G=U.b.model("SongSheetSong",{id:U.b.string,ssid:U.b.string,uid:U.b.optional(U.b.string,""),uname:U.b.string,title:U.b.string,url:U.b.string,poster:U.b.string,playing:U.b.optional(U.b.boolean,!1),order:U.b.optional(U.b.number,0)}).views((function(e){return{get value(){return{id:e.id,ssid:e.ssid,title:e.title,url:e.url,poster:e.poster,uid:e.uid,uname:e.uname}}}})).actions((function(e){return{toggleStatus:function(){e.playing=!e.playing}}})),K=U.b.model("musicPlayer",{currentPlayUrl:U.b.optional(U.b.string,""),mode:U.b.optional(U.b.string,"list"),single:!1,order:U.b.optional(U.b.number,0),songs:U.b.array(G),mPlayer:U.b.frozen(),type:U.b.optional(U.b.frozen(),{CIRCLE:"circle",RANDOM:"random",ONE:"one",LIST:"list"}),event:U.b.optional(U.b.frozen(),{PLAY:"music-play",PLAY_SINGLE:"music-play-single",PAUSE:"music-pause"})}).views((function(e){return{get url(){return e.currentPlayUrl}}})).actions((function(e){return{setUrl:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.order=n,e.currentPlayUrl=le.app.baseURL+t},setSheet:function(t){e.songs=t},playMusicSingle:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.single=!0,e.order=n,H.emit(e.event.PLAY_SINGLE,t,n)},playMusic:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.single=!1,e.order=n,H.emit(e.event.PLAY,t,n)},playNext:function(){console.log(e.mode,e.order,e.songs.length),"circle"===e.mode&&e.order+1>=e.songs.length?(e.order=0,H.emit(e.event.PLAY,e.songs[e.order].url,e.order)):e.order+1<e.songs.length&&(e.order++,H.emit(e.event.PLAY,e.songs[e.order].url,e.order))},playRandom:function(){e.order=Math.round(Math.random()*e.songs.length),H.emit(e.event.PLAY,e.songs[e.order],e.order)},pauseMusic:function(){H.emit(e.event.PAUSE)},setMode:function(t){le.app.setMusicModeName(t),e.mode=t}}})),Z=U.b.model({avatar:U.b.optional(U.b.string,""),name:U.b.optional(U.b.string,""),id:U.b.optional(U.b.string,"")}),Q=n(63),J={get isDebug(){return!1},console:!0,config:{production:{host:"/"},development:{host:"/"}},menus:[{name:"shelf",path:"/root/shelf",title:"\u4e66\u67b6",icon:"FaBook"},{name:"groups",path:"/root/groups",title:"\u9891\u9053",icon:"FaList"},{name:"music",path:"/root/music",title:"\u97f3\u4e50",big:!0,hideMenu:!0,icon:"FaPlayCircle"},{name:"todos",path:"/root/todos",title:"\u4efb\u52a1",hideMenu:!0,icon:"FaTasks"},{name:"my",path:"/root/my",title:"\u6211\u7684",icon:"FaUserAlt"}],cache:{book:{},catalog:{},chapter:{},tree:{}}};function $(e,t){var n=U.b.model({items:U.b.optional(U.b.array(e),[]),page:U.b.optional(U.b.number,1),isEnded:U.b.optional(U.b.boolean,!1),isLoading:U.b.optional(U.b.boolean,!1),state:U.b.optional(U.b.enumeration(["success","fail"]),"success"),type:U.b.optional(U.b.enumeration(["refresh","more"]),"refresh"),sort:U.b.optional(U.b.enumeration(["asc","desc"]),"asc"),error:U.b.maybe(U.b.model({code:U.b.maybe(U.b.string),message:U.b.maybe(U.b.string)}))}).views((function(e){return{get isEmpty(){return!(e.items&&e.items.length>0)},get length(){return e.items.length}}})).actions((function(e){return{setData:function(t){e.items=t||[]}}})).actions((function(e){var n=Object(U.a)(r.a.mark((function n(){var a,o,i,c,l,s,u,m,d,p,f,g,h,b=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=b.length>0&&void 0!==b[0]?b[0]:{},o=b.length>1&&void 0!==b[1]?b[1]:"refresh",i=a.query,c=void 0===i?{}:i,l=a.params,s=void 0===l?{}:l,u=a.data,m=void 0===u?{}:u,!(e.isLoading||e.isEnded&&"more"===o)){n.next=5;break}return n.abrupt("return");case 5:return e.type=o,e.error=void 0,e.isLoading=!0,e.state="success",c.page=e.page,d=null,n.prev=11,n.next=14,t({query:c,params:s,data:m},o);case 14:d=n.sent,f=(p=d).ended,g=p.items,e.isEnded=!!f,"refresh"===o?(e.page=1,e.items=g):g.length>0?(e.page=s.page,(h=e.items).push.apply(h,Object(Q.a)(g))):(e.state="fail",e.error={code:1,message:"x"}),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(11),J.isDebug&&J.console&&console.log(n.t0,"loader"),e.state="fail",n.t0.code?e.error={code:n.t0.code,message:n.t0.message||n.t0.toString()}:e.error={code:"unknown",message:"\u672a\u77e5\u9519\u8bef"};case 25:return n.prev=25,e.isLoading=!1,n.finish(25);case 28:return n.abrupt("return",d);case 29:case"end":return n.stop()}}),n,null,[[11,20,25,28]])})));return{clear:function(){e.page=1,e.items=[]},toggleSort:function(){e.sort="asc"===e.sort?"desc":"asc"},remove:function(t){e.items=e.items.slice().filter((function(e,n){return+t!==+n}))},append:function(t){e.items.push(t)},refresh:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,"refresh");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loadMore:function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.page++,t.next=3,n(a,"more");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}));return U.b.optional(n,{})}function ee(e,t){var n=U.b.model({item:U.b.maybeNull(e),isLoading:U.b.optional(U.b.boolean,!1),state:U.b.optional(U.b.enumeration(["success","fail"]),"success"),type:U.b.optional(U.b.enumeration(["refresh"]),"refresh"),error:U.b.maybe(U.b.model({code:U.b.maybe(U.b.string),message:U.b.maybe(U.b.string)}))}).views((function(e){return{get isEmpty(){return!e.item},get fn(){return t}}})).actions((function(e){return{setData:function(t){e.item=t}}})).actions((function(e){var n=Object(U.a)(r.a.mark((function n(){var a,o,i,c,l,s,u,m=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=m.length>0&&void 0!==m[0]?m[0]:{},o=m.length>1&&void 0!==m[1]?m[1]:"refresh",i=a.query,c=a.params,l=a.data,!(e.isLoading||e.isEnded&&"more"===o)){n.next=5;break}return n.abrupt("return");case 5:if(!e.isLoading){n.next=7;break}return n.abrupt("return");case 7:return e.type=o,e.error=void 0,e.isLoading=!0,e.state="success",s=null,n.prev=12,n.next=15,t({query:i,params:c,data:l},o);case 15:s=n.sent,(u=s.item)?e.item=u:(e.state="fail",e.error={code:1,message:"x"}),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(12),J.isDebug&&J.console&&console.log(n.t0,"loader"),e.state="fail",n.t0.code?e.error={code:n.t0.code,message:n.t0.message}:e.error={code:"unknown",message:"\u672a\u77e5\u9519\u8bef"};case 25:return n.prev=25,e.isLoading=!1,n.finish(25);case 28:return n.abrupt("return",s);case 29:case"end":return n.stop()}}),n,null,[[12,20,25,28]])})));return{clear:function(){e.item=null},refresh:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,"refresh");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}));return U.b.optional(n,{})}var te=ee(Z,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getUserInfo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ne=U.b.model({id:U.b.string,pid:U.b.string,tid:U.b.string,name:U.b.string,sort:U.b.number,poster:U.b.optional(U.b.string,""),count:U.b.optional(U.b.number,0),children:U.b.maybe(U.b.late((function(){return U.b.array(ne)})),[])}),ae=$(ne,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getCategoryList(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=U.b.model({id:U.b.string,uid:U.b.string,uname:U.b.string,title:U.b.string,poster:U.b.string,desc:U.b.string,tags:U.b.array(U.b.string),status:U.b.enumeration(["loading","finished"]),createdAt:U.b.string,words:U.b.number,comments:U.b.number,collections:U.b.number,chapters:U.b.number}),oe=$(re,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getMybooks(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=W.create({baseURL:_.a.getValue("baseURL")||(J.isDebug?J.config.development.host:J.config.production)||"",config:{},music:{url:""}});ie.setAccessToken(_.a.getValue(ie.accessTokenName)||""),ie.setRefreshToken(_.a.getValue(ie.refreshTokenName)||""),ie.initLocker(_.a.getValue(ie.lockerName)||{});var ce=K.create({mode:_.a.getValue(ie.musicModeName)||"circle"}),le={app:ie,debug:X.create({}),music:ce,target:{},userLoader:te.create(),categoryLoader:ae.create(),bookShelfLoader:oe.create()},se=q.a.create({baseURL:_.a.getValue("baseURL")||(J.isDebug?J.config.development.host:J.config.production)||"",withCredentials:!1,timeout:5e3});se.interceptors.request.use((function(e){return le.debug.append("".concat(e.method," ").concat(e.url)),J.isDebug&&J.console&&console.log("".concat(e.method," ").concat(e.url)),e.headers.Authorization=le.app.accessToken,e}),(function(e){return J.isDebug&&J.console&&console.log(e,"request error"),Promise.resolve(e)})),se.interceptors.response.use((function(e){J.isDebug&&J.console&&console.log(e.status,e.data);var t=e.data;if(0!==t.code){if(10110===t.code&&e.config.url!==e.config.baseURL+"/v1/auth/user/refresh")return le.app.setAccessToken(""),new Promise(function(){var t=Object(o.a)(r.a.mark((function t(n){var a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.refresh({authorization:le.app.refreshToken});case 2:if(!(a=t.sent).data){t.next=14;break}return le.app.setAccessToken(a.data.token),le.app.setAccessToken(a.data.refresh_token),e.config.headers.Authorization=a.data.token,e.config.try=!0,t.next=10,se(e.config);case 10:o=t.sent,n(o),t.next=15;break;case 14:n({});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());le.debug.append(t.message)}return t}),(function(e){return le.debug.append(e.message),J.isDebug&&J.console&&console.log(e,"response error"),101020===e.response.data.code&&le.app.setAccessToken(""),Promise.resolve(e)}));var ue=se;n(121);function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(var n in e)t+="&".concat(n,"=").concat(e[n]);return t?"?"+t.substr(1):""}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var pe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(w.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{login:function(e){e.query,e.params;var t=e.data;return ue({url:"/v1/auth/user/sign-in",method:"post",data:{name:t.account,password:t.password}})},register:function(e){e.query;var t=e.params;e.data;return ue({url:"/v1/auth/user/sign-up",method:"post",data:{name:t.account,password:t.password}})},refresh:function(e){e.query;var t=e.params;e.data;return ue({url:"/v1/auth/user/refresh",method:"post",data:t})},getUserInfo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,t.data,e.next=3,ue({url:"/v1/user/self",method:"get"});case 3:return n=e.sent,e.abrupt("return",{item:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMybooks:function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue({url:"/v1/user/my-books"});case 2:return t=e.sent,e.abrupt("return",{items:t.data,ended:!0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getBookFirstChapter:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ue({url:"/v1/user/book/".concat(n.id,"/first-chapter")});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBookChapter:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ue({url:"/v1/user/book/".concat(n.bid,"/chapter/").concat(n.id)});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTodos:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,t.params,t.data,e.next=3,ue({url:"/v1/user/todos".concat(me(n))});case 3:return(a=e.sent).data.forEach((function(e){e.startedAt=new Date(e.startedAt),e.endedAt=new Date(e.endedAt)})),e.abrupt("return",{items:a.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createTodo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,n=t.data,e.next=3,ue({url:"/v1/user/todo",method:"POST",data:n});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateTodo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,a=t.data,e.next=3,ue({url:"/v1/user/todo/".concat(n.id),method:"PUT",data:a});case 3:return o=e.sent,e.abrupt("return",{item:o.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),destroyTodo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,a=t.data,e.abrupt("return",ue({url:"/v1/user/todo/".concat(n.id),method:"DELETE",data:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addSongToSheet:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.abrupt("return",ue({url:"/v1/user/song-sheet/".concat(n.ssid,"/song/").concat(n.id),method:"POST"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeSheetSong:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.abrupt("return",ue({url:"/v1/user/song-sheet/".concat(n.ssid,"/song/").concat(n.id),method:"DELETE"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{},{getBookInfo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ue({url:"/v1/public/book/".concat(n.id)});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBookCatalog:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t.query,n=t.params,t.data,a="",n.query)a+="&".concat(o,"=").concat(n.query[o]);return e.next=5,ue({url:"/v1/public/book/".concat(n.id,"/catalog?").concat(a)});case 5:return i=e.sent,e.abrupt("return",{items:i.data,ended:i.data.length<20});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBookList:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,t.params,t.data,e.next=3,ue({url:"/v1/public/books".concat(me(n))});case 3:return a=e.sent,e.abrupt("return",{items:a.data,ended:a.data.length<10});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCategoryList:function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue({url:"/v1/public/categories"});case 2:for(o in t=e.sent,n={},t.data.forEach((function(e){e.children=[],""===e.pid&&(n[e.tid]=e)})),t.data.forEach((function(e){""!==e.pid&&n[e.tid].children.push(e)})),a=[],n)a.push(n[o]);return e.abrupt("return",{items:a,ended:!0});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getGroupTree:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ue({url:"/v1/public/group-tree/".concat(n.group_id)});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getGroups:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,t.data,e.next=3,ue({url:"/v1/public/groups"});case 3:return n=e.sent,e.abrupt("return",{items:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongSheets:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,t.data,e.next=3,ue({url:"/v1/public/song-sheets"});case 3:return n=e.sent,e.abrupt("return",{items:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongSheet:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ue({url:"/v1/public/song-sheet/".concat(n.id)});case 3:return(a=e.sent).data.forEach((function(e,t){e.order=t})),e.abrupt("return",{items:a.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongs:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,t.params,t.data,e.next=3,ue({url:"/v1/public/songs".concat(me(n))});case 3:return a=e.sent,e.abrupt("return",{items:a.data,ended:a.data.length<10});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),fe=n(225),ge=function(){function e(t,n){Object(i.a)(this,e),this.ns=t,this.api=fe.createInstance({name:t})}return Object(c.a)(e,[{key:"getValue",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.getItem(t);case 2:return n=e.sent,e.abrupt("return",n?n.data:n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setValue",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.setItem(t,{data:n,ts:Date.now()});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeKey",value:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.removeItem(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.clear();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.api.iterate((function(e,n,a){t.push(e.data)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),he=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in Object(i.a)(this,e),this.caches={},t)this.caches[n]=new ge(n,t[n])}return Object(c.a)(e,[{key:"getCache",value:function(e){return this.caches[e]}}]),e}())(J.cache).getCache("book"),be=ee(re,function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.getValue(t.id);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",{item:n});case 5:return e.next=7,pe.getBookInfo(t);case 7:return(a=e.sent).item&&he.setValue(t.id,a.item),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ve={textAlign:"center"};function ye(e,t){if(e.isEmpty)return e.isLoading?p.a.createElement("div",{style:ve},p.a.createElement(h.b,{text:"\u52a0\u8f7d\u4e2d..."})):e.error?p.a.createElement("div",{style:ve},"\u51fa\u9519\u5566!",e.error.message,p.a.createElement("span",{onClick:function(){return e.refresh()}},"\u70b9\u6211\u91cd\u8bd5")):p.a.createElement("div",{style:ve},"\u6ca1\u6709\u6570\u636e,",p.a.createElement("span",{onClick:function(){return e.refresh()}},"\u70b9\u6211\u91cd\u8bd5"))}var Ee=function(e){var t=e.children,n=e.holder,a=e.loading;return p.a.createElement(y.a,null,(function(){return a?n:t}))},ke=new h.h.DataSource({rowHasChanged:function(e,t){return!1}});function we(e){return p.a.createElement("div",{className:"am-list-body ".concat(e.className)},e.children)}var xe=function(e){return p.a.createElement("div",{style:{display:"flex",flex:"1 1",height:"100%",flexDirection:"column"}},p.a.createElement(y.a,null,(function(){return function(e){var t=e.loader,n=e.refresh,a=e.loadMore,r=e.renderItem,o=e.onScroll,i=e.className,c=ke.cloneWithRows(t.items.slice()),l=ye(t),s=t.isLoading;return p.a.createElement(d.Fragment,null,p.a.createElement(Ee,{loading:t.isEmpty,holder:p.a.createElement(V,null,l)},p.a.createElement(h.h,{style:{height:"100%",overflow:"auto"},dataSource:c,onScroll:o,renderRow:function(e,t,n){return r(e,t,n)},renderBodyComponent:function(){return p.a.createElement(we,{className:i})},initialListSize:1/0,onEndReachedThreshold:10,onEndReached:a||t.loadMore,pullToRefresh:p.a.createElement(h.m,{refreshing:!1,onRefresh:n||t.refresh}),renderFooter:function(){return p.a.createElement("div",{style:{textAlign:"center",padding:5}},s?"\u6b63\u5728\u52a0\u8f7d\u66f4\u591a\u6570\u636e...":"\u5df2\u5168\u90e8\u52a0\u8f7d\u5b8c\u6bd5")}})))}(e)})))},Oe=function(e){var t=e.item,n=e.router,a=e.nth;return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"},onClick:function(){n.pushView("/root/book/".concat(t.bid,"/chapter/").concat(t.id),null,{hideMenu:!0})}},p.a.createElement("div",{style:{fontSize:"1.2rem"}},"\u7b2c",a,"\u7ae0 ",t.title),p.a.createElement("div",{style:{color:"grey",padding:"5px 0"}},t.createdAt)))}))},je=U.b.model({id:U.b.string,bid:U.b.string,title:U.b.optional(U.b.string,""),createdAt:U.b.optional(U.b.string,""),isApproved:U.b.optional(U.b.boolean,!0),order:U.b.optional(U.b.number,1),words:U.b.optional(U.b.number,0),comments:U.b.optional(U.b.number,0),content:U.b.optional(U.b.string,""),preId:U.b.maybe(U.b.string),nextId:U.b.maybe(U.b.string)}),Ce=ee(je,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getBookChapter(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());n(226);function Ne(){return(Ne=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.account||!n.password){e.next=17;break}return n.isLoading=!0,e.next=4,pe.login({data:n});case 4:if(a=e.sent,n.isLoading=!1,a&&a.data){e.next=8;break}return e.abrupt("return",h.r.info("\u8bf7\u6c42\u5931\u8d25!"));case 8:if(0===a.code){e.next=12;break}return e.abrupt("return",h.r.info(a.message));case 12:le.app.setAccessToken(a.data.token),le.app.setRefreshToken(a.data.refresh_token),t.history.push({pathname:"/"});case 15:e.next=18;break;case 17:h.r.info("\u8bf7\u8f93\u5165\u8d26\u53f7\u5bc6\u7801!");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Le=n(233),Se=function(e){var t=e.item,n=e.router;return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-width",style:{padding:10},onClick:function(){n.pushView("/root/book/".concat(t.id,"/info"),null,{hideMenu:!0,id:t.id})}},p.a.createElement("div",{className:"full-width-fix",style:{width:60,height:80,backgroundColor:"green",marginRight:20}},p.a.createElement("img",{style:{width:"100%",height:"100%"},src:t.poster?J.config.development.host+t.poster:J.config.development.host+"/poster/nocover.jpg",alt:""})),p.a.createElement("div",{className:"full-width-auto full-height"},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("div",{style:{fontSize:"1.2rem"}},t.title),p.a.createElement(T,{type:"FaEllipsisH"})),p.a.createElement("div",{style:{padding:"4px 0",color:"rgb(146, 145, 145)"}},t.uname," \xb7 ","xxxxxx"),p.a.createElement("div",{style:{color:"rgb(146, 145, 145)"}},"17\u5c0f\u65f6\u524d \xb7 \u7b2c\u516b\u767e\u96f6\u516d\u7ae0 \u7ffb\u8f66\u4e86"))))}))},Te=$(re,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getBookList(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=U.b.model("Group",{tree_id:U.b.string,group_id:U.b.string,parent_id:U.b.string,title:U.b.string,name:U.b.string,desc:U.b.string,view:U.b.string,refs:U.b.array(U.b.string),data:U.b.optional(U.b.frozen([]),[]),attrs:U.b.model({hide_title:U.b.boolean,allowChange:U.b.boolean,selected:U.b.maybeNull(U.b.boolean),timeout:U.b.maybeNull(U.b.number),columns:U.b.maybeNull(U.b.number),showCount:U.b.maybeNull(U.b.number)}),params:U.b.frozen(null,{}),more:U.b.model({channel_id:U.b.string,keyword:U.b.string,type:U.b.string}),nth:U.b.number,children:U.b.optional(U.b.array(U.b.late((function(){return Fe}))),[])}).views((function(e){return{get id(){return e.group_id}}})).actions((function(e){return{selected:function(t){e.attrs.selected!==t&&(e.attrs.selected=t)}}})),Ae=Fe,Me=ee(Ae,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getGroupTree(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());n(108);function Ie(e){var t=e.self,n=e.selectTag;return p.a.createElement(y.a,null,(function(){return p.a.createElement("span",{className:"comp-tag ".concat(t.attrs.selected?"selected":""),onClick:function(){return n(t.group_id)}},t.name)}))}function Pe(e){var t=e.self,n=e.onQueryChange;function a(e){t.group_id===e?t.selected(!0):t.selected(!1),t.children.forEach((function(t){t.group_id===e?t.selected(!0):t.selected(!1)})),n()}return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{style:{margin:"5px 10px",whiteSpace:"nowrap",overflowX:"hidden",overflowY:"hidden"}},p.a.createElement("span",{className:"comp-tag ".concat(t.attrs.selected?"selected":""),onClick:function(){return a(t.group_id)}},t.name),t.children.map((function(e){return p.a.createElement(Ie,{self:e,key:e.id,selectTag:a})})))}))}var De=function(e){var t=e.item,n=rt();return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-width",style:{margin:10},onClick:function(){n.pushView("/root/book/".concat(t.id,"/info"),null,{hideMenu:!0,id:t.id})}},p.a.createElement("div",{className:"full-width-fix",style:{width:60,height:80,backgroundColor:"green",marginRight:20}},p.a.createElement("img",{style:{width:"100%",height:"100%"},src:t.poster?J.config.development.host+t.poster:J.config.development.host+"/poster/nocover.jpg",alt:""})),p.a.createElement("div",{className:"full-width-auto full-height"},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("div",{style:{fontSize:"1.2rem"}},t.title)),p.a.createElement("div",{style:{padding:"4px 0",color:"rgb(146, 145, 145)"}},t.uname," \xb7 ",t.catalog," \xb7 ","loading"===t.status?"\u8fde\u8f7d":"\u5b8c\u7ed3"," \xb7 ",t.words),p.a.createElement("div",{style:{color:"rgb(146, 145, 145)"},className:"line2"},t.desc))))}))};function Re(e){var t=e.self,n=(e.isChild,Object(O.a)(e,["self","isChild"])),a=Object(y.b)((function(){return{showMenu:!1,showChildren:!1}}));return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"full-width",style:{padding:"5px 0"}},p.a.createElement("div",{style:{position:"relative",display:"inline-block"},onContextMenu:function(e){a.showMenu=!0,e.preventDefault()}},p.a.createElement("span",{style:{display:"flex",marginLeft:5,backgroundColor:"#eaeaea",border:"1px solid #666",padding:3,borderRadius:5,zIndex:a.showMenu?100:98,position:"relative"}},t.title,p.a.createElement(B,{visible:0!==t.children.length},p.a.createElement(T,{type:a.showChildren?"FaMinusCircle":"FaPlusCircle",onClick:function(){return a.showChildren=!a.showChildren}}))),p.a.createElement("div",{onClick:function(){return a.showMenu=!1},style:{display:a.showMenu&&"edit"===n.mode?"block":"none",position:"fixed",left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:99}}),p.a.createElement("div",{style:{zIndex:100,display:a.showMenu&&"edit"===n.mode?"flex":"none",whiteSpace:"nowrap",position:"absolute",top:"100%",left:"100%",backgroundColor:"white",border:"1px solid #bbb",borderRadius:5,padding:5}},p.a.createElement("div",{style:{textAlign:"right"}},p.a.createElement(h.c,{type:"primary",onClick:function(){n.openGroupEdit({parent_id:t.group_id,tree_id:t.tree_id,view:"tree-node"})}},"\u6dfb\u52a0"),p.a.createElement(h.c,{onClick:function(){n.destroyGroup(t)}},"\u5220\u9664")))),p.a.createElement("div",{className:"full-height",style:{display:a.showChildren?"block":"none",position:"relative",margin:"10px 0 10px 10px",paddingLeft:10}},p.a.createElement(B,{visible:0!==t.children.length},p.a.createElement("span",{style:{width:"100%",position:"absolute",top:0,left:0,height:"50%",borderTopLeftRadius:"10%",borderLeft:"1px solid #999",transform:"translateY(-7px)"}}),p.a.createElement("span",{style:{width:"100%",position:"absolute",bottom:0,left:0,height:"50%",borderBottomLeftRadius:"10%",borderLeft:"1px solid #999",transform:"translateY(7px)"}}),p.a.createElement("span",{style:{position:"absolute",top:"50%",left:-5,marginTop:-5,borderColor:"#333",borderStyle:"solid",borderTopWidth:1,borderLeftWidth:1,borderRightWidth:0,borderBottomWidth:0,width:10,height:10,transform:"rotate(-45deg)"}})),t.children.map((function(e){return p.a.createElement(Re,Object.assign({key:e.id,self:e,isChild:!0},n))}))))}))}function Ve(e){var t=e.self,n=(e.children,Object(O.a)(e,["self","children"]));return t.children.map((function(e){return p.a.createElement(ze,Object.assign({key:e.id,self:e},n))}))}var Be={filter:function(e){var t=e.self,n=Object(O.a)(e,["self"]);return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{style:{padding:5}},t.children.map((function(e){return p.a.createElement(Pe,{self:e,key:e.id,onQueryChange:function(){var e={};t.children.forEach((function(t){t.children.forEach((function(t){t.attrs.selected&&Object.assign(e,t.params)}))})),n.onQueryChange&&n.onQueryChange(e)}})})))}))},"filter-tag":Ie,"filter-row":Pe,picker:function(e){var t=e.self;return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",null,!1===t.attrs.hide_title&&p.a.createElement("div",{className:"dd-common-alignside",style:{borderLeft:"5px solid #ff9999",paddingLeft:10}},p.a.createElement("span",null,t.name),p.a.createElement(B,{visible:""!==t.more.channel_id},p.a.createElement("span",{style:{fontSize:16,color:"#888"}},p.a.createElement(T,{type:"FaAngleRight",before:"\u66f4\u591a"})))),p.a.createElement("div",null,t.data.map((function(e,t){return p.a.createElement(De,{key:t,item:e})}))),p.a.createElement(B,{visible:!0===t.attrs.allowChange},p.a.createElement("div",{style:{textAlign:"center"}},p.a.createElement(T,{type:"FaRedo",after:"\u6362\u4e00\u6362"}))))}))},tab:function(e){var t=e.self,n=(e.children,Object(O.a)(e,["self","children"]));return p.a.createElement(d.Fragment,null,p.a.createElement(h.p,{tabs:t.children.map((function(e,t){return{title:e.title,sub:t}}))},t.children.map((function(e,t){return p.a.createElement(Ve,Object.assign({key:t,self:e},n))}))))},"tab-pane":Ve,"tree-node":function(e){return p.a.createElement(Re,e)},view:function(e){if(this[e])return this[e]}};function ze(e){var t=e.self,n=Object(O.a)(e,["self"]);return p.a.createElement(y.a,null,(function(){if(""===t.parent_id)return t.children.map((function(e){return p.a.createElement(ze,Object.assign({key:e.group_id,self:e},n))}));var e=Be.view(t.view);return e?p.a.createElement(e,Object.assign({self:t},n)):p.a.createElement("div",null,"?")}))}function qe(e){var t=e.loader,n=Object(O.a)(e,["loader"]),a=ye(t);return p.a.createElement(y.a,null,(function(){return t.item&&0!==t.item.children.length?p.a.createElement("div",{style:{height:"100%",overflow:"auto"}},p.a.createElement(ze,Object.assign({self:t.item},n))):p.a.createElement(V,null,a,"fuck")}))}var Ue=$(Ae,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getGroups(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ye=function(e){var t=e.item,n=e.router;return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"},onClick:function(){n.pushView("/root/group-tree/".concat(t.group_id),null,{title:t.title,hideMenu:!0})}},t.title,p.a.createElement(T,{type:"FaAngleRight"})))}))};var _e=$(U.b.model("Todo",{id:U.b.string,title:U.b.string,content:U.b.string,priority:U.b.number,isFinish:U.b.boolean,isDelay:U.b.boolean,notify:U.b.boolean,giveup:U.b.boolean,startedAt:U.b.Date,endedAt:U.b.maybeNull(U.b.Date),deletedAt:U.b.maybeNull(U.b.Date),type:U.b.string}).views((function(e){return{}})).actions((function(e){return{finishToggle:function(){e.isFinish=!e.isFinish}}})),function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getTodos(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),We=function(e){var t=e.item,n=e.router;return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"}},p.a.createElement(T,{size:"md",type:t.isFinish?"FaRegCheckCircle":"FaRegCircle",onClick:function(e){t.finishToggle(),pe.updateTodo({params:{id:t.id},data:t}).then((function(e){}))}}),p.a.createElement("span",{style:{flex:1,padding:"5px 10px"},onClick:function(){n.pushView("/root/todo/".concat(t.id),null,{data:t})}},t.title),p.a.createElement(T,{type:"FaAngleLeft",onClick:function(){}})))}))};function Xe(){var e=M(),t=rt(),n=t.params,a=t.getStateKey("data"),i=Object(y.b)((function(){return{loading:!1,title:n.id?a.title:"",content:n.id?a.content:"",type:n.id?a.type:"work",priority:n.id?a.priority:"",startedAt:n.id?a.startedAt:null,endedAt:n.id?a.endedAt:null,isDelay:!!n.id&&a.isDelay,isFinish:!!n.id&&a.isFinish}}));return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:n.id?"\u4fee\u6539":"\u6dfb\u52a0",router:t}),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(h.g,null,p.a.createElement(h.f,{type:"text",value:i.title,onChange:function(e){return i.title=e}},"\u6807\u9898"),p.a.createElement(h.j,{extra:"\u8bf7\u9009\u62e9",value:[i.type],data:[{label:"\u751f\u6d3b",value:"life"},{label:"\u5de5\u4f5c",value:"work"},{label:"\u8bbe\u8ba1",value:"design"}],onChange:function(e){return i.type=e[0]}},p.a.createElement(h.g.Item,null,"\u7c7b\u578b")),p.a.createElement(h.q,{title:"\u8be6\u60c5",value:i.content,autoHeight:!0,onChange:function(e){return i.content=e}}),p.a.createElement(h.j,{extra:"\u8bf7\u9009\u62e9",value:[i.priority],data:[{label:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",value:1},{label:"\u91cd\u8981\u4e0d\u7d27\u6025",value:2},{label:"\u4e0d\u91cd\u8981\u7d27\u6025",value:3},{label:"\u91cd\u8981\u7d27\u6025",value:4}],onChange:function(e){i.priority=e[0]}},p.a.createElement(h.g.Item,null,"\u4f18\u5148\u7ea7")),p.a.createElement(h.d,{value:i.startedAt,onChange:function(e){return i.startedAt=e}},p.a.createElement(h.g.Item,null,"\u5f00\u59cb\u65f6\u95f4")),p.a.createElement(h.d,{value:i.endedAt,onChange:function(e){return i.endedAt=e}},p.a.createElement(h.g.Item,null,"\u7ed3\u675f\u65f6\u95f4")),p.a.createElement(h.g.Item,null,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",null,"\u662f\u5426\u63a8\u8fdf"),p.a.createElement(h.n,{checked:i.isDelay,onChange:function(e){return i.isDelay=e}}))),p.a.createElement(h.g.Item,null,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",null,"\u662f\u5426\u5b8c\u6210"),p.a.createElement(h.n,{checked:i.isFinish,onChange:function(e){return i.isFinish=e}}))))),p.a.createElement(h.b,{animating:i.loading}),p.a.createElement("div",{className:"full-width",style:{height:40,borderTop:"1px solid #eee"}},p.a.createElement("div",{className:"full-width-auto dd-common-centerXY",style:{backgroundColor:"white"}},"\u53d6\u6d88"),p.a.createElement("div",{className:"full-width-auto dd-common-centerXY",style:{backgroundColor:"#30a6fb",color:"white"},onClick:Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.loading=!0,e.prev=1,!n.id){e.next=7;break}return e.next=5,pe.updateTodo({params:n,data:i});case 5:e.next=9;break;case 7:return e.next=9,pe.createTodo({data:{title:i.title,content:i.content,type:i.type,priority:i.priority,startedAt:i.startedAt,endedAt:i.endedAt}});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.prev=13,i.loading=!1,h.r.info("\u7f16\u8f91\u6210\u529f",2,(function(){t.back()})),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[1,11,13,17]])})))},n.id?"\u4fee\u6539":"\u6dfb\u52a0")))}))}var He=$(U.b.model("SongSheet",{id:U.b.string,uid:U.b.optional(U.b.string,""),title:U.b.string,desc:U.b.string,poster:U.b.string,count:U.b.number}).views((function(e){return{}})).actions((function(e){return{}})),function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getSongSheets(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ge=$(U.b.model("resource",{id:U.b.string,uid:U.b.string,uname:U.b.string,title:U.b.string,poster:U.b.string,desc:U.b.string,url:U.b.string,tags:U.b.array(U.b.string),status:U.b.enumeration(["loading","finished"]),createdAt:U.b.string,words:U.b.number,comments:U.b.number,collections:U.b.number,chapters:U.b.number,playing:U.b.optional(U.b.boolean,!1)}).actions((function(e){return{toggleStatus:function(){e.playing=!e.playing}}})),function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getSongs(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ke=function(e){var t=e.item,n=e.router;return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"},onClick:function(){n.pushView("/root/song-sheet/".concat(t.id),null,{title:t.title,hideMenu:!0})}},t.title,p.a.createElement(T,{type:"FaAngleRight"})))}))},Ze=function(e){var t=e.item,n=e.mode,a=void 0===n?"normal":n,i=(e.router,e.remove),c=Object(O.a)(e,["item","mode","router","remove"]),l=k().music;return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",Object.assign({className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"}},c),t.title,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(T,{type:t.playing?"FaPause":"FaPlay",onClick:function(){t.toggleStatus(),H.emit(l.event.PLAY,t.url,t.order)}}),p.a.createElement(B,{visible:"delete"===a},p.a.createElement(T,{type:"MdDeleteForever",onClick:function(){return i(t)}})),p.a.createElement(B,{visible:"add"===a},p.a.createElement(T,{type:"FaPlus",onClick:function(){var e=Object(o.a)(r.a.mark((function e(n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,pe.getSongSheets({});case 4:a=e.sent,o=a.items.map((function(e){return e.title})),h.a.showActionSheetWithOptions({options:[].concat(Object(Q.a)(o),["\u53d6\u6d88"]),message:"\u6dfb\u52a0\u5230\u6b4c\u5355",maskClosable:!0,cancelButtonIndex:o.length-1},(function(e){var n=a.items[e].id,r=t.id;pe.addSongToSheet({params:{ssid:n,id:r}})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})))))}))},Qe=$(G,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getSongSheet(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Je=[{pathname:"/auth/login",component:function(e){e.self;var t=rt(),n=Object(y.b)((function(){return{isLoading:!1,isLogin:!1,isRegister:!1,account:"",password:""}}));return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"dd-common-centerXY",style:{position:"relative"}},p.a.createElement("div",{style:{position:"absolute",right:0,top:0,padding:5}},p.a.createElement(T,{type:"FaCog",onClick:function(){h.i.prompt("\u5730\u5740","",[{text:"\u53d6\u6d88"},{text:"\u786e\u5b9a",onPress:function(e){le.app.setBaseURL(e)}}],"default","")}})),p.a.createElement(h.g,null,p.a.createElement(h.g.Item,null,p.a.createElement(h.f,{type:"text",placeholder:"\u7528\u6237\u540d",style:{border:"0 none"},defaultValue:n.account,onBlur:function(e){return n.account=e}},"\u7528\u6237\u540d")),p.a.createElement(h.g.Item,null,p.a.createElement(h.f,{type:"password",placeholder:"\u5bc6\u7801",defaultValue:"",style:{border:"0 none"},onBlur:function(e){return n.password=e}},"\u5bc6\u7801")),p.a.createElement(h.g.Item,{style:{display:"flex"}},p.a.createElement(h.c,{loading:n.isLogin,disabled:n.isLogin||n.isRegister,type:"primary",onClick:function(){return function(e,t){return Ne.apply(this,arguments)}(t,n)}},"\u767b\u5f55"))))}))}},{pathname:"/root/home",component:function(e){e.self;var t=e.children;return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"dd-common-centerXY"},"Hello World!",t)}))}},{pathname:"/root/category",component:function(){var e=M(),t=k(),n=rt(),a=t.categoryLoader,r=Object(y.b)((function(){return{selectIndex:0,count:0}}));return Object(d.useEffect)((function(){a.isEmpty&&a.refresh()})),p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:"\u5206\u7c7b",router:n},p.a.createElement("div",{style:{flex:1,textAlign:"right"},onClick:function(){return n.pushView("/root/book/search",null,{hideMenu:!0})}},"\u5168\u90e8\u4f5c\u54c1")),p.a.createElement("div",{className:"full-height-auto",style:{display:"flex",flexDirection:"row",flex:1}},p.a.createElement("div",{style:{borderRight:"1px solid #ccc",minWidth:80}},a.items.map((function(e,t){return p.a.createElement("div",{key:e.id,style:P({},D.bigCate,{},t===r.selectIndex?D.choosed:{}),onClick:function(){return r.selectIndex=t}},e.name)}))),p.a.createElement("div",{style:{flex:1,height:"100%",overflow:"auto"},className:"smooth"},p.a.createElement("div",{style:{padding:20}},"\u603b\u5171",r.count,"\u90e8"),p.a.createElement(R,{router:n,cates:a.items[r.selectIndex]}))))}))}},{pathname:"/root/book/:id([0-9a-zA-Z-]+)/info",component:function(){var e=rt(),t=be.create(),n=e.params,a=Object(y.b)((function(){return{loading:!1,firstLoading:!1,shouldFix:!1,id:n.id}}));return Object(d.useEffect)((function(){t.isEmpty&&t.refresh({params:{id:a.id}})})),p.a.createElement(y.a,null,(function(){return t.isEmpty?p.a.createElement(V,null,p.a.createElement(h.b,{text:"\u52a0\u8f7d\u4e2d..."})):p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-height"},p.a.createElement("div",{className:"dd-common-alignside",style:{position:"absolute",width:"100%",boxSizing:"border-box",height:45,padding:"0 15px"}},p.a.createElement(T,{type:"FaChevronLeft",onClick:function(){e.back()}}),p.a.createElement("div",null,p.a.createElement(B,{visible:a.shouldFix},p.a.createElement("div",null,"\u6211\u7684\u673a\u5668\u4eba\u5973\u53cb"),p.a.createElement("div",null,"\u677e\u4e0b\u4e2d\u4e8c \xb7 \u79d1\u5e7b"))),p.a.createElement(T,{type:"FaEllipsisH"})),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement("div",{style:{padding:"20px 0 10px 0",textAlign:"center",backgroundColor:"#666",color:"white"}},p.a.createElement("img",{src:t.item.poster,alt:"",width:100,height:120}),p.a.createElement("div",{style:{fontSize:20,padding:5}},t.item.title),p.a.createElement("div",null,t.item.uname," \xb7 \u79d1\u5e7b")),p.a.createElement("div",{style:{padding:"0 20px",borderBottom:"1px solid #ccc",backgroundColor:"snow"}},p.a.createElement("div",{className:"dd-common-alignside",style:{height:50,borderBottom:"1px solid #ccc"}},p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1}},t.item.words,"\u4e07\u5b57"),p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1}},t.item.chapters,"\u7ae0"),p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1}},t.item.comments,"\u8bc4\u8bba")),p.a.createElement("div",{style:{padding:"10px 0",borderBottom:"1px solid #ccc"}},t.item.desc),p.a.createElement("div",{className:"full-width",style:{height:40},onClick:function(){e.pushView("/root/book/".concat(a.id,"/catalog"),null,{hideMenu:!0})}},p.a.createElement("span",{className:"full-width-auto",style:{fontWeight:"bolder"}},"\u76ee\u5f55"),p.a.createElement("span",{className:"full-width-fix"},"\u8fde\u8f7d\u81f3 729\u7ae0 \xb7 \u4e24\u5c0f\u65f6\u524d\u66f4\u65b0"),p.a.createElement(T,{style:{marginLeft:10},className:"full-width-fix",type:"FaAngleRight"}))),p.a.createElement("p",null,"TODO:\u4f5c\u8005 \u540d\u79f0 \u5934\u50cf \u51e0\u90e8\u4f5c\u54c1")),p.a.createElement("div",{className:"dd-common-alignside",style:{height:50}},p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1,backgroundColor:"rgb(226, 223, 223)",color:"gray"}},"+ \u52a0\u5165\u4e66\u67b6"),p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1,backgroundColor:"red",color:"white"},onClick:Object(o.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.firstLoading=!0,t.next=4,pe.getBookFirstChapter({params:{id:a.id}});case 4:n=t.sent,e.pushView("/root/book/".concat(a.id,"/chapter/").concat(n.item.id),null,{hideMenu:!0,bid:a.id,id:n.item.id}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.prev=10,a.firstLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,8,10,13]])})))},p.a.createElement(B,{visible:a.firstLoading},p.a.createElement(h.e,{type:"loading"})),"\u7acb\u5373\u9605\u8bfb"))))}))}},{pathname:"/root/book/:id([0-9a-zA-Z-]+)/catalog",component:function(){var e=rt(),t=$(je,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.getBookCatalog(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).create(),n=e.params,a=Object(y.b)((function(){return{loading:!1,sortASC:!0,id:n.id}}));return Object(d.useEffect)((function(){t.isEmpty&&t.refresh({params:{id:a.id}})})),p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-height"},p.a.createElement("div",{className:"dd-common-alignside",style:{height:45,padding:"0 15px"}},p.a.createElement(T,{type:"FaChevronLeft",onClick:function(){e.back()}}),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",{style:{padding:"0 10px"}},"\u76ee\u5f55"),p.a.createElement("span",{style:{padding:"0 10px"}},"\u4e66\u7b7e")),p.a.createElement("div",{className:"dd-common-alignside",onClick:function(){a.sortASC=!a.sortASC,t.toggleSort()}},p.a.createElement(T,{type:a.sortASC?"FaSortNumericDown":"FaSortNumericUp"}),a.sortASC?"\u6b63\u5e8f":"\u5012\u5e8f")),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(xe,{loader:t,refresh:function(){var e={id:a.id};t.refresh({params:e})},loadMore:function(){var e={id:a.id};t.loadMore({params:e})},renderItem:function(n,r,o){return p.a.createElement(Oe,{nth:"asc"===t.sort?parseInt(o)+1:t.items.length-parseInt(o),item:n,router:e,sectionId:r,toggleLoading:function(){return a.loading=!a.loading}})}}))))}))}},{pathname:"/root/book/:bid([0-9a-zA-Z-]+)/chapter/:id([0-9a-zA-Z-]+)",component:function(){var e=rt(),t=Ce.create(),n=ye(t),a=e.params,r=Object(y.b)((function(){return{pop:!1,percent:0,id:a.id,bid:a.bid}})),o=Object(d.useRef)(null);return Object(d.useEffect)((function(){t.refresh({params:{id:r.id,bid:r.bid}}),setTimeout((function(){o.current.scrollTop=1}),100)})),p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(B,{visible:r.pop},p.a.createElement("div",{className:"dd-common-alignside",style:{position:"absolute",left:0,top:0,right:0,backgroundColor:"#eee",height:45,padding:"0 15px"}},p.a.createElement(T,{type:"FaChevronLeft",onClick:function(){e.back()}}),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(T,{type:"FaCloudDownloadAlt",style:{margin:"0 10px"}}),p.a.createElement(T,{type:"IoIosHeadset",style:{margin:"0 10px"}}),p.a.createElement(T,{type:"FaEllipsisH",style:{margin:"0 10px"}})))),p.a.createElement("div",{className:"full-height",style:{padding:"0 15px"},onClick:function(){r.pop=!r.pop}},p.a.createElement(B,{visible:t.isEmpty},p.a.createElement(V,null,p.a.createElement(h.b,{text:"\u52a0\u8f7d\u4e2d..."}))),!t.isEmpty&&p.a.createElement(d.Fragment,null,p.a.createElement("div",{style:{padding:"8px 0",color:"grey"}},t.item.title),p.a.createElement("div",{ref:o,className:"full-height-auto scroll-smooth smooth",style:{lineHeight:2,letterSpacing:2,fontSize:16,textIndent:20},onScroll:function(){var e=o.current.scrollHeight-o.current.offsetHeight;e<=0&&(e=1),o.current.scrollTop<1&&(o.current.scrollTop=1),o.current.scrollTop===e&&(o.current.scrollTop=e-1),r.percent=(100*o.current.scrollTop/e).toFixed(1)}},t.isEmpty?n:p.a.createElement("div",null,t.item.content)),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"8px 0",color:"grey"}},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",{style:{marginRight:10}},"2/12"),p.a.createElement("span",null,r.percent,"%")),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",{style:{marginRight:10}},"03:54"),p.a.createElement(T,{type:"FaBatteryHalf",style:{display:"inline-block",marginRight:10}}),p.a.createElement("span",null,t.isEmpty?0:t.item.content.length))))),p.a.createElement(B,{visible:r.pop},p.a.createElement("div",{style:{position:"absolute",left:0,right:0,bottom:0,fontSize:12,backgroundColor:"#eee",padding:"0 10px"}},p.a.createElement("div",{className:"full-width",style:{height:40}},p.a.createElement("span",{className:"full-width-fix",style:{opacity:t.isEmpty||""===t.item.preId?.5:1},onClick:function(){!t.isEmpty&&t.item.preId&&t.refresh({params:{bid:r.bid,id:t.item.preId}})}},"\u4e0a\u4e00\u7ae0"),p.a.createElement(h.l,{percent:r.percent,position:"normal",className:"full-width-auto",style:{margin:"0 10px"}}),p.a.createElement("span",{className:"full-width-fix",style:{opacity:t.isEmpty||""===t.item.nextId?.5:1},onClick:function(){!t.isEmpty&&t.item.nextId&&(r.id=t.item.nextId,t.refresh({params:{id:r.id,bid:r.bid}}),o.current.scrollTop=1)}},"\u4e0b\u4e00\u7ae0")),p.a.createElement("div",{className:"full-width",style:{height:50}},p.a.createElement("div",{className:"full-width-fix dd-common-centerXY",style:{flexDirection:"column"}},p.a.createElement(T,{type:"FaListUl"}),"\u76ee\u5f55"),p.a.createElement("div",{className:"full-width-auto dd-common-centerXY",style:{flexDirection:"column"}},p.a.createElement(T,{type:"FaCog"}),"\u8bbe\u7f6e"),p.a.createElement("div",{className:"full-width-fix dd-common-centerXY",style:{flexDirection:"column"}},p.a.createElement(T,{type:"FaEllipsisH"}),"\u5176\u4ed6")))))}))}},{pathname:"/root/book/search",component:function(){var e=M(),t=rt(),n=Me.create(),a=Te.create();return Object(d.useEffect)((function(){n.isEmpty&&n.refresh({params:{group_id:"D5698713D07045ADBBF5F0D5D09E53E4"}}),a.isEmpty&&a.refresh()})),p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:"\u5168\u90e8",router:t}),p.a.createElement("div",{className:"full-height-auto",style:{display:"flex",flexDirection:"column",flex:1}},p.a.createElement("div",null,p.a.createElement(qe,{loader:n,onQueryChange:function(e){a.refresh({query:e})}})),p.a.createElement("div",{style:{flex:1}},p.a.createElement(xe,{loader:a,renderItem:function(e,n,a){return p.a.createElement(Se,{item:e,router:t,selectionId:n})}}))))}))}},{pathname:"/root/group-tree/:group_id([0-9a-zA-Z-]+)",component:function(){var e=Me.create(),t=rt(),n=Object(y.b)((function(){return{title:t.getStateKey("title")}})),a=M(),r=t.params;return Object(Le.a)((function(){e.isEmpty&&e.refresh({params:{group_id:r.group_id}})})),p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(a,{title:n.title,router:t}),p.a.createElement(qe,{loader:e}))}))}},{pathname:"/root/groups",component:function(){var e=Ue.create(),t=rt();return Object(Le.a)((function(){e.isEmpty&&e.refresh()})),p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{style:{flex:1,height:"100%"}},p.a.createElement(xe,{loader:e,renderItem:function(e,n,a){return p.a.createElement(Ye,{item:e,selectionId:n,router:t})}}))}))}},{pathname:"/root/music",component:function(e){e.self,e.children;var t=M(),n=rt(),a=He.create(),r=Ge.create();return Object(Le.a)((function(){a.isEmpty&&a.refresh(),r.isEmpty&&r.refresh()})),p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(t,{title:"\u97f3\u4e50",router:n}),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(xe,{loader:a,renderItem:function(e,t,a){return p.a.createElement(Ke,{key:a,item:e,selectionId:t,router:n})}})),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(xe,{loader:r,renderItem:function(e){return p.a.createElement(Ze,{mode:"add",item:e,router:n})}})))}))}},{pathname:"/root/song-sheet/:id([0-9a-zA-Z-]+)",component:function(){var e=M(),t=rt(),n=k(),a=Qe.create(),i=Object(y.b)((function(){return{title:t.getStateKey("title")}}));return Object(Le.a)((function(){a.isEmpty&&a.refresh({params:{id:t.params.id}})})),p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:i.title,router:t}),p.a.createElement(T,{style:{justifyContent:"start"},type:"FaPlay",after:"\u64ad\u653e\u5168\u90e8",onClick:function(){var e=a.items.map((function(e){return e.value}));n.music.setSheet(e),a.items[0].toggleStatus(),n.music.playMusic(a.items[0].url,0)}}),p.a.createElement("div",{className:"full-height"},p.a.createElement(xe,{loader:a,renderItem:function(e,n,i){return p.a.createElement(Ze,{mode:"delete",item:e,router:t,remove:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.removeSheetSong({params:{id:t.id,ssid:t.ssid}});case 2:a.remove(i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}})))}))}},{pathname:"/root/my",component:function(){var e=k(),t=rt(),n=e.userLoader;return Object(d.useEffect)((function(){n.isEmpty})),p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"full-height",onTouchStart:function(e){return e.preventDefault()},onTouchMove:function(e){return e.preventDefault()}},p.a.createElement("div",{className:"full-width",style:{padding:"0 20px"}},p.a.createElement("div",{className:"full-width-fix dd-common-centerXY",style:{width:35,height:35,margin:"10px 0"}},n.isLoading?p.a.createElement(h.b,null):p.a.createElement("img",{src:"/logo.jpg",style:{borderRadius:"50%"},alt:""})),p.a.createElement("div",{className:"full-width-auto",style:{paddingLeft:10}},n.isEmpty?"---":n.item.name),p.a.createElement("div",{style:{color:"green"}},p.a.createElement(T,{type:"FaQrcode"})),p.a.createElement("div",{className:"full-width-fix",onClick:function(){return t.pushView("/root/user-setting",null)}},p.a.createElement(T,{type:"FaAngleRight"}))),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"10px 50px"}},p.a.createElement("div",null,p.a.createElement(T,{type:"FaStar"}),"\u6536\u85cf"),p.a.createElement("div",null,p.a.createElement(T,{type:"FaHistory"}),"\u5386\u53f2"),p.a.createElement("div",null,p.a.createElement(T,{type:"FaEllipsisV"}),"\u5176\u4ed6")),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"10px 50px"}},p.a.createElement("div",{onClick:function(){return t.pushView("/root/secure",null,{title:"\u5b89\u5168"})}},p.a.createElement(T,{type:"FaLock"}),"\u5b89\u5168"),p.a.createElement("div",{onClick:function(){return window.location.reload()}},p.a.createElement(T,{type:"FaSyncAlt"}),"\u5237\u65b0"),p.a.createElement("div",{onClick:function(){return t.pushView("/root/category",null,{hideMenu:!0})}},p.a.createElement(T,{type:"FaListAlt"}),"\u5206\u7c7b")))}))}},{pathname:"/root/shelf",component:function(){var e=rt(),t=le.bookShelfLoader,n=Object(y.b)((function(){return{loading:!1}}));return Object(Le.a)((function(){t.isEmpty&&t.refresh()})),p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(xe,{loader:t,renderItem:function(t,a,r){return p.a.createElement(Se,{item:t,router:e,sectionId:a,toggleLoading:function(){return n.loading=!n.loading}})}}))}))}},{pathname:"/root/secure",component:function(){var e=at(),t=M();return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(t,{title:"\u5b89\u5168",router:e}),p.a.createElement("div",{className:"full-height"},p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"15px 20px",backgroundColor:"white"}},"\u5bc6\u7801\u9501",p.a.createElement(h.n,{checked:le.app.config.isLockerOpen,onChange:function(e){return le.app.setLocker(e)}}))))}))}},{pathname:"/root/todos",component:function(){var e=M(),t=rt(),n=_e.create(),a=Object(y.b)((function(){return{type:"1"}}));return Object(d.useEffect)((function(){n.isEmpty&&n.refresh({query:{type:a.type}})})),p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(e,{title:"TODO",router:t},p.a.createElement(T,{type:"FaPlus",style:{display:"inline-block"},onClick:function(){t.pushView("/root/add-todo")}})),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(xe,{loader:n,renderItem:function(e,n,a){return p.a.createElement(We,{item:e,selectionId:n,router:t})}})),p.a.createElement("div",{className:"full-height-fix"},p.a.createElement(h.c,{type:"primary",onClick:function(){a.type="1"===a.type?"":"1",n.refresh({query:{type:a.type}})}},""===a.type?"\u9690\u85cf\u5df2\u5b8c\u6210":"\u663e\u793a\u5df2\u5b8c\u6210")))}))}},{pathname:"/root/add-todo",component:Xe},{pathname:"/root/todo/:id([0-9a-zA-Z-]+)",component:Xe},{pathname:"/root/user-setting",component:function(){var e=k(),t=rt(),n=M();return Object(d.useEffect)((function(){})),p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(n,{title:"\u8bbe\u7f6e",router:t}),p.a.createElement("div",null,p.a.createElement(h.g,{renderHeader:function(){return"\u8bbe\u7f6e"}},p.a.createElement(h.g.Item,null,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",null,"\u8d26\u53f7\u8bbe\u7f6e"),p.a.createElement(T,{type:"FaAngleRight"})))),p.a.createElement("div",{style:{padding:10}},p.a.createElement(h.c,{type:"primary",onClick:function(){e.app.setAccessToken(""),t.pushView("/")}},"\u9000\u51fa"))))}))}}];function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach((function(t){Object(w.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=p.a.createContext(null),nt=Je.map((function(e){var t=e.pathname,n={reg:x(t),params:[]};return x.parse(t).forEach((function(e){"object"===typeof e&&n.params.push(e.name)})),n}));function at(e){var t=Object(d.useState)((function(){var t={history:e,get params(){for(var t={},n=function(n){var a=nt[n],r=a.reg.exec(e.location.pathname);if(r)return a.params.forEach((function(e,n){t[e]=r[n+1]})),"break"},a=0;a<nt.length;a++){if("break"===n(a))break}return t},get hideMenu(){return!(!e.location.state||!e.location.state.hideMenu)},getStateKey:function(t){return e.location.state&&e.location.state[t]},back:function(){var n=e.location.state||{userClick:!0},a=n.userClick;n.login?t.backToRoot():a?t.history.goBack():t.backToRoot()},backToRoot:function(t,n){var a=(void 0).pathname,r=(void 0).search;e.push({pathname:a,search:r,state:et({login:!0,userClick:!0},n)})},gotoLoginTarget:function(){},pushView:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;(a=a||{}).userClick=!0,a.hideMenu=!1!==a.hideMenu;var r="";for(var o in n)r+="".concat(o,"=").concat(n[o]);e.push({pathname:t,search:r,state:a})},replaceView:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;(a=a||{}).userClick=!0;var r="";for(var o in n)r+="".concat(o,"=").concat(n[o]);e.replace({pathname:t,search:r,state:a})}};return t}));return[Object(m.a)(t,1)[0],tt]}function rt(){return Object(d.useContext)(tt)}function ot(e){var t=e.children,n=e.cb,a=(Object(O.a)(e,["children","cb"]),Object(d.useRef)(null)),r=Object(y.b)((function(){return{started:!1,top:0,left:0,offsetLeft:0,offsetTop:0}}));return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{ref:function(e){e&&(a.current=e,e.addEventListener("touchstart",(function(t){r.started=TextTrackCue,t=t.touches[0],r.left=t.clientX-e.offsetLeft,r.top=t.clientY-e.offsetTop,r.left<0&&(r.left=0),r.top<0&&(r.top=0),r.offsetLeft=0,r.offsetTop=0})),e.addEventListener("touchmove",(function(e){e.stopPropagation(),e.preventDefault(),e=e.touches[0],r.started&&(r.offsetLeft=e.clientX-r.left,r.offsetTop=e.clientY-r.top),n&&n(r)})),e.addEventListener("touchend",(function(e){r.started=!1})))}},t))}))}var it=p.a.createContext(null);function ct(){var e=Object(d.useRef)(null),t=le.music,n=t.type,a=t.event,r=_.a.getValue("music"),o=Object(y.b)((function(){return{showModePop:!1,url:"",top:r?r.top:210,left:r?r.left:100}})),i=null;return H.on(a.PLAY,(function(n,a){t.setUrl(n,a),o.url=le.app.baseURL+n,setTimeout((function(){e.current&&e.current.play()}),100)})),H.on(a.PLAY_SINGLE,(function(n,a){t.setUrl(n,a),o.url=le.app.baseURL+n,setTimeout((function(){e.current&&e.current.play()}),100)})),H.on(a.PAUSE,(function(){e.current.pause()})),p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{style:{position:"fixed",zIndex:10,top:o.top,left:o.left},className:"full-width"},p.a.createElement(ot,{cb:function(e){o.left=Math.max(0,e.left+e.offsetLeft),o.top=Math.max(0,e.top+e.offsetTop),clearTimeout(i),i=null,i=setTimeout((function(){_.a.setValue("music",{left:o.left,top:o.top})}),100)}},p.a.createElement(T,{type:"FaArrowsAlt"})),p.a.createElement(h.k,{mask:!0,placement:"topLeft",visible:o.showModePop,overlay:[p.a.createElement(h.k.Item,{key:n.ONE,value:n.ONE},p.a.createElement(T,{type:"MdRepeatOne"}),"\u5355\u66f2"),p.a.createElement(h.k.Item,{key:n.RANDOM,value:n.RANDOM},p.a.createElement(T,{type:"MdShuffle"}),"\u968f\u673a"),p.a.createElement(h.k.Item,{key:n.LIST,value:n.LIST},p.a.createElement(T,{type:"MdTrendingFlat"}),"\u5217\u8868"),p.a.createElement(h.k.Item,{key:n.CIRCLE,value:n.CIRCLE},p.a.createElement(T,{type:"MdRepeat"}),"\u5faa\u73af")],onVisibleChange:function(e){o.showModePop=e},onSelect:function(e){t.setMode(e.props.value),o.showModePop=!1}},p.a.createElement("span",null,p.a.createElement(B,{visible:t.mode===n.RANDOM},p.a.createElement(T,{type:"MdShuffle"})),p.a.createElement(B,{visible:t.mode===n.ONE},p.a.createElement(T,{type:"MdRepeatOne"})),p.a.createElement(B,{visible:t.mode===n.LIST},p.a.createElement(T,{type:"MdTrendingFlat"})),p.a.createElement(B,{visible:t.mode===n.CIRCLE},p.a.createElement(T,{type:"MdRepeat"})))),p.a.createElement(T,{type:"MdSkipNext",onClick:function(){t.playNext()}}),p.a.createElement("audio",{ref:function(t){e.current=t},onCanPlay:function(){},onLoadedMetadata:function(){},onLoadedData:function(){},onProgress:function(){},onEnded:function(){t.mode===n.ONE&&e.current.play(),t.mode===n.RANDOM&&t.playRandom(),t.mode===n.LIST&&t.playNext(),t.mode===n.CIRCLE&&t.playNext()},src:o.url,controls:"controls",preload:"true"}))}))}var lt=p.a.createContext(null);function st(e){var t=le.debug,n=_.a.getValue("debug"),a=Object(y.b)((function(){return{top:n?n.top:300,left:n?n.left:0}})),r=null;return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{className:"full-height",style:{position:"fixed",color:"white",zIndex:10,width:300,height:150,top:a.top,left:a.left,padding:10,backgroundColor:"black",opacity:.5}},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(ot,{cb:function(e){a.left=Math.max(0,e.left+e.offsetLeft),a.top=Math.max(0,e.top+e.offsetTop),clearTimeout(r),r=null,r=setTimeout((function(){_.a.setValue("debug",{left:a.left,top:a.top})}),100)}},p.a.createElement(T,{type:"FaArrowsAlt"})),p.a.createElement(T,{type:t.showMap?"FaCaretDown":"FaCaretRight",onClick:function(){t.toggleMap()}}),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(T,{type:"FaRegTrashAlt",onClick:function(){t.clear()}}),p.a.createElement(T,{type:"FaSyncAlt",onClick:function(){window.location.reload()}}))),p.a.createElement(B,{visible:t.showMap},p.a.createElement("div",{className:"full-height-auto"},t.maps.map((function(e,t){return p.a.createElement("p",{key:t},e.key,":",e.value)})))),p.a.createElement("div",{className:"full-height-auto"},t.messages.map((function(e,t){return p.a.createElement("p",{key:t},e)}))))}))}n(227);var ut=function(e){var t=[{char:"1",name:"",className:""},{char:"2",name:"",className:"center"},{char:"3",name:"",className:""},{char:"4",name:"",className:""},{char:"5",name:"",className:"center"},{char:"6",name:"",className:""},{char:"7",name:"",className:""},{char:"8",name:"",className:"center"},{char:"9",name:"",className:""},{char:"",name:"\u6e05\u7a7a",className:""},{char:"0",name:"",className:"center"},{char:"x",name:"\u5220\u9664",className:""}];return p.a.createElement(y.a,null,(function(){return p.a.createElement("div",{style:{width:"100%",position:"relative",paddingTop:"100%",marginBottom:"35%"}},p.a.createElement("div",{className:"box",style:{position:"absolute",left:0,right:0,top:0,bottom:0}},t.map((function(t,n){return p.a.createElement("div",{key:n,className:["cell",t.className].join(" "),onClick:function(){return e.handler(t.char)}},t.name||t.char)}))))}))};n(228);function mt(){var e=Object(y.b)((function(){return{pin:[],animate:""}}));function t(t){"x"===t?e.pin.pop():""===t?e.pin=[]:(e.pin.push(t),e.pin.length>=le.app.config.lockerLength&&(e.pin.join("")===le.app.config.lockerPin?(e.animate="success",setTimeout((function(){le.app.setLocked(!1)}),1e3)):(e.animate="fail",setTimeout((function(){e.animate="",e.pin=[]}),1e3))))}return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"}},p.a.createElement("div",{style:{flex:"0 0 0%",width:"100%"}},p.a.createElement(T,{type:"FaLock",style:{width:"100%",margin:"40px 0 40px 0",color:"green"}}),p.a.createElement("p",null,"\u8bf7\u8f93\u5165\u9501\u5b9a\u7801"),p.a.createElement("div",{className:e.animate,style:{display:"flex",flexDirection:"row",justifyContent:"center",width:"80%",margin:"auto"}},le.app.config.lockerPin.split("").map((function(t,n){return n>=e.pin.length?p.a.createElement(T,{style:{margin:"0 8px"},key:n,type:"FaRegCircle"}):p.a.createElement(T,{style:{margin:"0 8px"},key:n,type:"FaCircle"})})))),p.a.createElement("div",{style:{flex:1,width:"70%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},p.a.createElement(ut,{handler:t}))))}))}var dt=function(e){var t=e.children,n=rt();return p.a.createElement(y.a,null,(function(){return n.hideMenu||!n.history.location.pathname.startsWith("/root")?t:p.a.createElement(d.Fragment,null,p.a.createElement(h.o,{tintColor:"#33A3F4",unselectedTintColor:"#888",tabBarPosition:"bottom",barTintColor:"white"},J.menus.map((function(e){return p.a.createElement(h.o.Item,{title:e.big?"":e.title,key:e.name,icon:p.a.createElement(T,{style:e.big?{marginTop:-20,zIndex:2,fontSize:"3rem"}:{margin:3},type:e.icon}),selectedIcon:p.a.createElement(T,{style:{margin:3},type:e.icon}),selected:e.name===le.app.selectedMenu,onPress:function(){le.app.setMenu(e.name),n.pushView(e.path,null,{title:e.title,hideMenu:!!e.hideMenu})}},t)}))))}))};function pt(e){var t=k(),n=at(e.history),a=Object(m.a)(n,2),r=a[0],o=a[1],i=[A,F],c=Object(m.a)(i,2),l=c[0],s=c[1],u=[ct,it],f=Object(m.a)(u,1)[0],g=[st,lt],h=Object(m.a)(g,1)[0],v=e.location.pathname.split("/").pop();return t.app.selectedMenu!==v&&t.app.setMenu(v),p.a.createElement(o.Provider,{value:r},p.a.createElement(s.Provider,{value:l},p.a.createElement(y.a,null,(function(){return!t.app.isLogin&&e.location.pathname.startsWith("/root")?p.a.createElement(b.a,{to:"/auth/login"}):t.app.isLogin&&t.app.config.isLockerOpen&&t.app.config.isLockerLocked?p.a.createElement(mt,null):p.a.createElement(d.Fragment,null,p.a.createElement(f,null),p.a.createElement(h,null),p.a.createElement(dt,null,p.a.createElement(b.d,null,Je.map((function(e){return p.a.createElement(b.b,{key:e.pathname,path:e.pathname,component:e.component})})),p.a.createElement(b.b,{component:ft}))))}))))}function ft(){return k().app.isLogin?p.a.createElement(b.a,{to:"/root/home"}):p.a.createElement(b.a,{to:"/auth/login"})}function gt(){return p.a.createElement(v.a,{basename:"/"},p.a.createElement(b.b,{path:"/*",component:pt}))}n(231);var ht=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function bt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var vt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={hasError:!1,error:null,info:null,isLoading:!1,lastTS:Date.now(),isDesktop:!0},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("start-loading").style.display="none",document.getElementById("box").className="box-app",window.addEventListener("resize",(function(){document.getElementById("box").className="box-app",e.setState({isDeskTop:!0})})),document.addEventListener("visibilitychange",function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.hidden?le.app.resetLeaveTS():!1===le.app.config.isLockerLocked&&le.app.setLocked(Date.now()-le.app.leaveTS>le.app.config.lockerSeconds);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return this.state.hasError?p.a.createElement(d.Fragment,null,p.a.createElement("div",null,"\u7a0b\u5e8f\u5d29\u6e83\u4e86,",p.a.createElement("div",{onClick:function(){e.setState({isLoading:!0},Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({isLoading:!1}),e.setState({hasError:!1},(function(){window.location.reload()}));case 2:case"end":return t.stop()}}),t)}))))}},"\u70b9\u6211\u91cd\u8bd5")),p.a.createElement(h.b,{toast:!0,text:"\u6b63\u5728\u5237\u65b0...",animating:this.state.isLoading})):this.state.isDesktop?p.a.createElement(d.Fragment,null,this.props.children,p.a.createElement(h.b,{toast:!0,text:"\u6b63\u5728\u5237\u65b0...",animating:this.state.isLoading})):p.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"\u7a0b\u5e8f\u6b63\u5728\u5f00\u53d1\u4e2d...")}}]),t}(p.a.Component);g.a.render(p.a.createElement(vt,null,p.a.createElement((function(){var e=function(e){var t=Object(d.useState)(e);return[Object(m.a)(t,1)[0],E]}(le),t=Object(m.a)(e,2),n=t[0],a=t[1];return p.a.createElement(y.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(a.Provider,{value:n},p.a.createElement(gt,null)))}))}),null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/custom-sw.js");ht?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):bt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):bt(t,e)}))}}()}},[[127,1,2]]]);
//# sourceMappingURL=main.63b332a8.chunk.js.map