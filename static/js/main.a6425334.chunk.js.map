{"version":3,"sources":["utils/storage.js","contexts/store/index.js","components/MIconView/index.js","contexts/navi/index.js","pages/CategoryPage/index.js","components/AutoCenterView/index.js","components/VisualBoxView/index.js","models/AppModel.js","models/DebugModel.js","utils/events.js","models/SongSheetSongModel.js","models/MusicPlayerModel.js","models/SpeakerModel.js","models/UserModel.js","config.js","loader/BaseLoader.js","loader/UserLoader.js","loader/LineLoader.js","models/LineModel.js","models/CategoryModel.js","loader/CategoryLoader.js","models/BookModel.js","loader/BookShelfLoader.js","global-state.js","utils/shttp.js","utils/utils.js","services/index.js","services/user.js","services/public.js","loader/BookLoader.js","components/EmptyView/index.js","components/SwitchView/index.js","components/LoaderListView/index.js","business/ChapterItemView/index.js","models/ChapterModel.js","loader/ChapterLoader.js","pages/AuthLoginPage/index.js","business/ResourceItem/BookItem.js","loader/BookListLoader.js","models/GroupTreeModel.js","loader/GroupTreeLoader.js","group/FilterTag/index.js","group/FitlerRow/index.js","business/ResourceItem/BookItemPick.js","group/TreeNode/index.js","group/TabPane/index.js","group/index.js","group/Filter/index.js","group/Picker/index.js","group/Tab/index.js","loader/GroupListLoader.js","business/GroupItemView/index.js","models/TodoModel.js","loader/TodoListLoader.js","business/TodoItemView/index.js","pages/TodoAddPage/index.js","models/SongSheetModel.js","loader/SongSheetLoader.js","models/ResourceModel.js","loader/SongListLoader.js","business/ResourceItem/SongItemOnSheet.js","loader/SongSheetSongLoader.js","business/ResourceItem/SongItem.js","pages/SongsPage/index.js","loader/ImageListLoader.js","business/ResourceItem/ImageItem.js","pages/index.js","pages/HomePage/index.js","pages/BookInfoPage/index.js","pages/BookCatalogPage/index.js","pages/BookChapterPage/index.js","pages/BookSearchPage/index.js","pages/GroupTreePage/index.js","pages/GroupListPage/index.js","pages/MusicPage/index.js","pages/SongSheetPage/index.js","pages/GalleryPage/index.js","pages/UserCenterPage/index.js","pages/UserShelfPage/index.js","pages/SecurePage/index.js","pages/TodoPage/index.js","pages/UserSettingPage/index.js","contexts/router/index.js","components/Dragger/index.js","contexts/music/index.js","contexts/debug/index.js","contexts/speaker/index.js","components/SudokuView/index.js","components/LockerView/index.js","layout.js","router.js","service-worker.js","index.js"],"names":["module","exports","setValue","key","value","type","getTime","window","localStorage","setItem","JSON","stringify","getValue","str","getItem","test","o","parse","Date","err","this","removeKey","removeItem","Context","React","createContext","useStoreContext","useReactContext","className","inline","size","style","after","before","restProps","Icon","startsWith","Faicons","Mdicons","IOicons","display","fontSize","alignItems","justifyContent","margin","Navi","prop","height","padding","backgroundColor","borderBottom","flex","flexDirection","onClick","router","back","showBack","left","textAlign","fontWeight","title","children","useNaviContext","styles","bigCate","borderLeftWidth","borderLeftStyle","borderLeftColor","choosed","subCate","width","float","boxSizing","SubCate","cates","map","cate","id","src","poster","alt","paddingLeft","color","paddingBottom","name","count","visible","Model","types","model","selectedMenu","optional","string","fullScreen","boolean","accessTokenName","refreshTokenName","lockerName","baseURL","account","accessToken","refreshToken","musicModeName","showMusic","showDebug","leaveTS","number","now","showSpeaker","config","isLockerOpen","isLockerLocked","lockerLength","lockerSeconds","lockerPin","views","self","actions","initLocker","opt","k","setLocker","lock","storage","setLocked","locked","setLockerPin","pin","setLockerLength","len","setLockerSeconds","seconds","setMenu","setBaseURL","url","shttp","defaults","resetLeaveTS","logout","setAccessToken","token","setRefreshToken","setMusicModeName","toggleDebug","toggleMusic","toggleSpeaker","maps","array","frozen","messages","showMap","append","message","push","update","found","find","item","clear","toggleMap","EventEmitter","SongSheetSongModel","ssid","uid","uname","order","toJSON","getSnapshot","currentPlayId","mode","single","songs","SongModel","mPlayer","CIRCLE","RANDOM","ONE","LIST","event","PLAY","PLAY_SINGLE","PAUSE","setId","setSheet","items","setMode","store","app","getUrlById","forEach","playByIndex","index","events","emit","playMusic","playNext","findIndex","song","length","playRandom","Math","round","random","pauseMusic","cfg","top","rate","pitch","_","avatar","process","console","production","host","development","menus","path","icon","big","hideMenu","cache","book","catalog","chapter","tree","createItemsLoader","fn","customs","unionModel","page","isEnded","isLoading","state","enumeration","sort","error","maybe","code","nw","call","arguments","setData","data","request","flow","option","query","params","undefined","res","ended","Config","isDebug","log","toString","toggleSort","remove","slice","filter","idx","refresh","loadMore","createItemLoader","maybeNull","UserModel","a","services","getUserInfo","desc","enabled","getLines","getHostByType","pid","tid","late","getCategoryList","tags","status","createdAt","words","comments","collections","chapters","BookModel","getMybooks","AppModel","create","music","MusicPlayerModel","speaker","SpeakerModel","debug","DebugModel","target","userLoader","UserLoader","lineLoader","LineLoader","categoryLoader","CategoryLoader","bookShelfLoader","BookShelfLoader","axios","withCredentials","timeout","interceptors","use","globalStore","method","headers","Promise","resolve","response","authorization","result","refresh_token","try","newResult","stringfyQuery","search","substr","login","password","register","getBookFirstChapter","getBookChapter","bid","getTodos","d","startedAt","endedAt","createTodo","updateTodo","destroyTodo","addSongToSheet","removeSheetSong","getBookInfo","getBookCatalog","getBookList","c","getGroupTree","group_id","getGroups","getSongSheets","getSongSheet","it","getSongs","getImages","renderEmpty","loader","options","isEmpty","text","holder","loading","dataProvider","ListView","DataSource","rowHasChanged","row1","row2","MyBody","props","renderItem","onScroll","dataSource","cloneWithRows","EmptyView","renderEmptyView","SwitchView","AutoCenterView","overflow","renderRow","rowData","sectionId","rowId","renderBodyComponent","initialListSize","Infinity","onEndReachedThreshold","onEndReached","pullToRefresh","refreshing","onRefresh","renderFooter","renderList","nth","pushView","isApproved","content","preId","nextId","Chapter","Toast","info","history","pathname","imageHost","marginRight","GroupModel","tree_id","parent_id","view","refs","attrs","hide_title","allowChange","selected","columns","showCount","more","channel_id","keyword","GroupTreeModel","FilterTag","selectTag","FilterRow","onQueryChange","child","whiteSpace","overflowX","overflowY","useRouterContext","Node","isChild","useLocalStore","showMenu","showChildren","position","onContextMenu","e","preventDefault","marginLeft","border","borderRadius","zIndex","right","bottom","openGroupEdit","destroyGroup","borderTopLeftRadius","borderLeft","transform","borderBottomLeftRadius","marginTop","borderColor","borderStyle","borderTopWidth","borderRightWidth","borderBottomWidth","TabPane","AutoView","booksLoader","BookListLoader","useEffect","tag","Object","assign","LoaderListView","selectionId","BookItem","VisualBoxView","BookItemPick","tabs","ch","sub","View","RenderGroups","emptyView","priority","isFinish","isDelay","notify","giveup","deletedAt","finishToggle","then","TodoAddPage","todo","getStateKey","onChange","extra","label","Item","autoHeight","checked","animating","borderTop","playing","toggleStatus","clone","stopPropagation","list","ActionSheet","showActionSheetWithOptions","maskClosable","cancelButtonIndex","ResourceModel","component","isLogin","isRegister","Modal","prompt","onPress","val","placeholder","defaultValue","onBlur","disabled","localStore","selectIndex","borderRight","minWidth","BookLoader","firstLoading","shouldFix","dangerouslySetInnerHTML","__html","ChapterModel","sortASC","ChapterItemView","parseInt","toggleLoading","ChapterLoader","pop","percent","container","useRef","setTimeout","current","scrollTop","ref","lineHeight","letterSpacing","textIndent","scrollHeight","offsetHeight","toFixed","opacity","GroupTreeLoader","useEffectOnce","GroupListLoader","GroupItemView","SongSheetLoader","songListLoader","SongListLoader","SongItemOnSheet","SongItem","gStore","SongSheetSongLoader","imagesLoader","ImageListLoader","ImageItem","onTouchStart","onTouchMove","showNavi","location","reload","todoLoader","TodoListLoader","TodoItemView","renderHeader","rules","pages","reg","path2reg","Dragger","cb","dragger","started","offsetLeft","offsetTop","node","addEventListener","TextTrackCue","touches","clientX","clientY","MusicPlayer","player","MODE","EVENT","pos","musicStore","showModePop","timer","on","play","pause","sstore","max","clearTimeout","mask","placement","overlay","onVisibleChange","onSelect","onCanPlay","onLoadedMetadata","onLoadedData","onProgress","onEnded","controls","preload","Debug","debugStore","Speaker","synth","speechSynthesis","voices","getVoices","voice","v","lang","speakerStore","utter","SpeechSynthesisUtterance","onend","onerror","speaking","speak","marginBottom","min","step","keys","char","paddingTop","join","handler","Locker","animate","split","tintColor","unselectedTintColor","tabBarPosition","barTintColor","menu","selectedIcon","App","useState","route","i","rule","m","exec","userClick","backToRoot","goBack","getBackToRootLocation","gotoLoginTarget","replaceView","replace","useProvider","RouterContext","navi","NaviContext","Provider","NoMatch","to","Index","basename","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ErrorBoundary","hasError","lastTS","isDesktop","setState","document","getElementById","isDeskTop","hidden","toast","Component","ReactDOM","render","StoreContext","URL","href","origin","fetch","contentType","get","indexOf","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.a6425334.chunk.js","sourcesContent":["module.exports = {\n  setValue(key, value) {\n    let type = 'string'\n    switch (typeof value) {\n      case 'number': type = 'number'; break\n      case 'date': type = 'date'; value = value.getTime(); break\n      case 'object': type = 'json'; break\n      default: break\n    }\n    window.localStorage.setItem(key, JSON.stringify({ type, value }))\n  },\n  getValue(key) {\n    let str = window.localStorage.getItem(key)\n    let value = null\n    if (str !== null && /^\\{.*\\}$/.test(str)) {\n      try {\n        const o = JSON.parse(str)\n        if (o.type === 'date') {\n          value = new Date(o.value)\n        } else {\n          value = o.value\n        }\n      } catch (err) {\n        this.removeKey(key)\n      }\n    } else {\n      this.removeKey(key)\n    }\n    return value\n  },\n  removeKey(key) {\n    window.localStorage.removeItem(key)\n  }\n}","import React, { useContext as useReactContext, useState } from 'react'\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nexport function useProvider(store) {\r\n  let [state] = useState(store)\r\n  return [state, Context]\r\n}\r\n\r\nexport function useStoreContext() {\r\n  return useReactContext(Context)\r\n}","import React from 'react'\nimport * as IOicons from 'react-icons/io'\nimport * as Faicons from 'react-icons/fa'\nimport * as Mdicons from 'react-icons/md'\nimport './index.css'\n\n// https://react-icons.netlify.com/#/icons/fa\n\n// const types = {\n//   home: require('./home.svg'),\n//   user: require('./user.svg'),\n//   map: require('./map.svg'),\n//   fire: require('./fire.svg'),\n//   search: require('./search.svg'),\n//   setting: require('./setting.svg'),\n// };\n\n// export default function ({ type, className = '', size = 'md', ...restProps }) {\n//   return (<svg className={`am-icon am-icon-${type.substr(1)} am-icon-${size} ${className}`} {...restProps}>\n//     <use xlinkHref={require('./home.svg')} />\n//   </svg>)\n// }\n\nexport default function ({ type, className = '', inline = false, size = 'sm', style = {}, after = '', before = '', ...restProps }) {\n  const Icon = type.startsWith('Fa') ? Faicons[type] : (type.startsWith('Md') ? Mdicons[type] : IOicons[type])\n  return <div style={{ display: inline ? 'inline-block' : 'flex', fontSize: size === 'md' ? '1.5rem' : (size === 'bg' ? '2rem' : '1.1rem'), alignItems: 'center', justifyContent: 'center', ...style, }} className={`${className}`} {...restProps}>\n    {before}<Icon style={{ margin: '0 4px', }} />{after}\n  </div>\n}","import React, { useContext as useReactContext } from 'react'\r\nimport MIconView from 'components/MIconView'\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nfunction Navi(prop) {\r\n  return (\r\n    <div className=\"dd-common-alignside\" style={{ height: 45, padding: '0 15px', backgroundColor: 'white', borderBottom: '1px solid #eee' }}>\r\n      <div style={{ flex: 1, display: 'flex', flexDirection: 'row', }} onClick={() => { prop.router.back() }}>\r\n        <div style={{ display: prop.showBack === false ? 'none' : 'flex' }}>\r\n          <MIconView type=\"FaChevronLeft\" />\r\n        </div>\r\n        <div>{prop.left}</div>\r\n      </div>\r\n      <div style={{ flex: 1, textAlign: 'center', fontSize: 16, fontWeight: '600' }}>{prop.title}</div>\r\n      <div style={{ flex: 1, textAlign: 'right' }}>{prop.children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function createNaviProvider() {\r\n  return [Navi, Context]\r\n}\r\n\r\nexport function useNaviContext() {\r\n  return useReactContext(Context)\r\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport { useStoreContext } from 'contexts/store'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport 'components/common.css'\r\n\r\nconst styles = {\r\n  bigCate: {\r\n    margin: '10px 0',\r\n    padding: '0 20px',\r\n    borderLeftWidth: 2,\r\n    borderLeftStyle: 'solid',\r\n    borderLeftColor: 'transparent',\r\n  },\r\n  choosed: {\r\n    borderLeftColor: 'red',\r\n  },\r\n  subCate: {\r\n    width: '50%',\r\n    float: 'left',\r\n    padding: '10px',\r\n    boxSizing: 'border-box',\r\n  }\r\n}\r\n\r\nfunction SubCate({ cates, router }) {\r\n  if (cates) {\r\n    return cates.children.map(cate => <div key={cate.id} className=\"full-width\" style={styles.subCate}>\r\n      <img src={cate.poster} alt=\"\" style={{ width: 60, height: 70, backgroundColor: '#bbb' }} />\r\n      <div className=\"dd-common-centerXY\" style={{ flexDirection: 'column', alignItems: 'start', paddingLeft: 10, }}>\r\n        <div style={{ fontSize: '1.2em', color: 'black', fontWeight: 'bold', paddingBottom: 5 }}>{cate.name}</div>\r\n        <div>{cate.count}部</div>\r\n      </div>\r\n    </div>)\r\n  } else {\r\n    return null\r\n  }\r\n}\r\nexport default function () {\r\n  const Navi = useNaviContext()\r\n  const store = useStoreContext()\r\n  const router = useRouterContext()\r\n  const loader = store.categoryLoader\r\n  const localStore = useLocalStore(() => ({\r\n    selectIndex: 0,\r\n    count: 0,\r\n  }))\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title=\"分类\" router={router}>\r\n        <div style={{ flex: 1, textAlign: 'right' }} onClick={() => router.pushView('/root/book/search', null, { hideMenu: true, })}>全部作品</div>\r\n      </Navi>\r\n      <div className=\"full-height-auto\" style={{ display: 'flex', flexDirection: 'row', flex: 1 }}>\r\n        <div style={{ borderRight: '1px solid #ccc', minWidth: 80 }}>\r\n          {loader.items.map((item, index) => <div\r\n            key={item.id}\r\n            style={{ ...styles.bigCate, ...(index === localStore.selectIndex ? styles.choosed : {}) }}\r\n            onClick={() => localStore.selectIndex = index}\r\n          >\r\n            {item.name}\r\n          </div>)}\r\n        </div>\r\n        <div style={{ flex: 1, height: '100%', overflow: 'auto' }} className=\"smooth\">\r\n          <div style={{ padding: 20 }}>总共{localStore.count}部</div>\r\n          <SubCate router={router} cates={loader.items[localStore.selectIndex]} />\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport 'components/common.css'\r\n\r\nexport default function ({ children }) {\r\n  return <div className=\"dd-common-centerXY\">\r\n    {children}\r\n  </div>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\n\r\nexport default function ({ visible, children }) {\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        {visible && children}\r\n      </Fragment>\r\n    }}\r\n  </Observer>\r\n}","import { types } from 'mobx-state-tree'\nimport shttp from '../utils/shttp'\nimport storage from '../utils/storage'\n\nconst Model = types.model({\n  selectedMenu: types.optional(types.string, 'book-shelf'),\n  fullScreen: types.optional(types.boolean, false),\n  accessTokenName: types.optional(types.string, 'access-token'),\n  refreshTokenName: types.optional(types.string, 'refresh-token'),\n  lockerName: types.optional(types.string, 'locker'),\n  baseURL: types.optional(types.string, '/'),\n  // 账号相关\n  account: types.optional(types.string, ''),\n  accessToken: types.optional(types.string, ''),\n  refreshToken: types.optional(types.string, ''),\n  // 音乐播放器相关\n  musicModeName: types.optional(types.string, 'music-mode'),\n  showMusic: false,\n  // 调试\n  showDebug: types.optional(types.boolean, false),\n  leaveTS: types.optional(types.number, Date.now() - 60 * 6),\n  // 语音测试\n  showSpeaker: types.optional(types.boolean, false),\n  // 软件锁相关\n  config: types.model({\n    isLockerOpen: types.optional(types.boolean, true),\n    isLockerLocked: types.optional(types.boolean, false),\n    lockerLength: types.optional(types.number, 6),\n    lockerSeconds: types.optional(types.number, 1000 * 60 * 30),\n    lockerPin: types.optional(types.string, '789654'),\n  }, {}),\n}).views(self => ({\n  get isLogin() {\n    return !!self.accessToken\n  },\n})).actions(self => {\n  // locker相关操作\n  return {\n    initLocker(opt = {}) {\n      for (let k in opt) {\n        self.config[k] = opt[k]\n      }\n    },\n    setLocker(lock) {\n      self.config.isLockerOpen = lock\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLocked(locked) {\n      self.config.isLockerLocked = locked\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLockerPin(pin) {\n      self.config.lockerPin = pin\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLockerLength(len) {\n      self.config.lockerLength = len\n      storage.setValue(self.lockerName, self.config)\n    },\n    setLockerSeconds(seconds) {\n      self.config.lockerSeconds = seconds\n      storage.setValue(self.lockerName, self.config)\n    },\n  }\n}).actions(self => {\n  return {\n    setMenu(name) {\n      self.selectedMenu = name\n    },\n    setBaseURL(url) {\n      self.baseURL = url\n      shttp.defaults.baseURL = url\n      storage.setValue('baseURL', url)\n    },\n    resetLeaveTS() {\n      self.leaveTS = Date.now()\n    }\n  }\n}).actions(self => {\n  // 用户相关配置\n  return {\n    logout() {\n      self.accessToken = ''\n      self.refreshToken = ''\n      storage.removeKey(self.accessTokenName)\n      storage.removeKey(self.refreshTokenName)\n    },\n    setAccessToken(token) {\n      // {\"type\":\"string\",\"value\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoidXNlciIsImlkIjoxLCJ0b2tlbiI6ImIyNGE3MjFhMGZkZDEzZmYwNTc2OTMzMzUyZGMwNzhiYmM3NTUxNGMiLCJpYXQiOjE1NjU1MjAxMDYsImV4cCI6MTU2NTYwNjUwNn0.FxS0gcrtuNkpCPM6LQ1Al7DLUWEEW7v77IKEitXORN4\"}\n      self.accessToken = token\n      storage.setValue(self.accessTokenName, token)\n    },\n    setRefreshToken(token) {\n      self.refreshToken = token\n      storage.setValue(self.refreshTokenName, token)\n    }\n  }\n}).actions(self => ({\n  setMusicModeName(type) {\n    storage.setValue(self.musicModeName, type)\n  },\n  toggleDebug() {\n    self.showDebug = !self.showDebug\n  },\n  toggleMusic() {\n    self.showMusic = !self.showMusic\n  },\n  toggleSpeaker() {\n    self.showSpeaker = !self.showSpeaker\n  },\n}))\n\nexport default Model","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  maps: types.array(types.frozen({})),\r\n  messages: types.array(types.string),\r\n  showMap: types.optional(types.boolean, false),\r\n}).actions(self => ({\r\n  append(message) {\r\n    self.messages.push(message)\r\n  },\r\n  update(key, value) {\r\n    const found = self.maps.find(item => item.key === key)\r\n    if (found) {\r\n      found.value = value\r\n    } else {\r\n      self.maps.push({ key, value })\r\n    }\r\n  },\r\n  clear() {\r\n    self.messages = []\r\n    self.map = {}\r\n  },\r\n  toggleMap() {\r\n    self.showMap = !self.showMap\r\n  }\r\n}))\r\n\r\nexport default Model","import { EventEmitter } from 'events'\r\n\r\nexport default new EventEmitter()","import { types, getSnapshot } from 'mobx-state-tree'\r\n\r\nconst SongSheetSongModel = types.model('SongSheetSong', {\r\n  id: types.string,\r\n  ssid: types.string,\r\n  uid: types.optional(types.string, ''),\r\n  uname: types.string,\r\n  title: types.string,\r\n  url: types.string,\r\n  poster: types.string,\r\n  // playing: types.optional(types.boolean, false),\r\n  order: types.optional(types.number, 0),\r\n}).views(self => ({\r\n  \r\n})).actions(self => ({\r\n  // toggleStatus(status) {\r\n  //   if (status !== undefined) {\r\n  //     self.playing = status\r\n  //   } else {\r\n  //     self.playing = !self.playing\r\n  //   }\r\n  // },\r\n})).actions(self => ({\r\n  toJSON() {\r\n    let node = getSnapshot(self)\r\n    return node\r\n  }\r\n}))\r\n\r\nexport default SongSheetSongModel","import { types } from 'mobx-state-tree'\r\nimport events from 'utils/events'\r\nimport SongModel from './SongSheetSongModel'\r\nimport store from '../global-state'\r\n\r\nconst Model = types.model('musicPlayer', {\r\n  currentPlayId: types.optional(types.string, ''),\r\n  mode: types.optional(types.string, 'list'),\r\n  single: false,\r\n  songs: types.array(SongModel),\r\n  mPlayer: types.frozen(),\r\n  type: types.optional(types.frozen(), {\r\n    CIRCLE: 'circle',\r\n    RANDOM: 'random',\r\n    ONE: 'one',\r\n    LIST: 'list',\r\n  }),\r\n  event: types.optional(types.frozen(), {\r\n    PLAY: 'music-play',\r\n    PLAY_SINGLE: 'music-play-single',\r\n    PAUSE: 'music-pause',\r\n  }),\r\n}).views(self => ({\r\n\r\n})).actions(self => {\r\n  // 音乐播放器相关\r\n  return {\r\n    setId(id) {\r\n      self.currentPlayId = id\r\n    },\r\n    setSheet(items) {\r\n      self.songs = items.map(item => item.toJSON())\r\n    },\r\n    setMode(type) {\r\n      store.app.setMusicModeName(type)\r\n      self.mode = type\r\n    },\r\n    getUrlById(id) {\r\n      let url = ''\r\n      self.songs.forEach(item => {\r\n        if (item.id === id) {\r\n          url = item.url\r\n        }\r\n      })\r\n      return url\r\n    },\r\n    // 1.1播放全部\r\n    playByIndex(index, mode) {\r\n      if (mode) {\r\n        this.setMode(mode)\r\n      }\r\n      if (self.songs[index]) {\r\n        let id = self.songs[index].id\r\n        self.currentPlayId = id\r\n        events.emit(self.event.PLAY, id)\r\n      }\r\n    },\r\n    // 1.2播放列表某个\r\n    playMusic(id) {\r\n      self.currentPlayId = id\r\n      events.emit(self.event.PLAY, id)\r\n    },\r\n    // 2.1播放当前id的下一个 顺序和循环模式调用(可以处理额外的逻辑)\r\n    playNext() {\r\n      let id = self.currentPlayId\r\n      let order = self.songs.findIndex(song => song.id === id)\r\n      if (order === -1) {\r\n        if (self.songs.length === 0) {\r\n          return\r\n        } else {\r\n          order = 0\r\n        }\r\n      }\r\n      if (self.mode === 'circle') {\r\n        if (order + 1 === self.songs.length) {\r\n          id = self.songs[0].id\r\n        } else {\r\n          id = self.songs[order + 1].id\r\n        }\r\n        self.currentPlayId = id\r\n        events.emit(self.event.PLAY, id)\r\n      } else if (order + 1 < self.songs.length) {\r\n        id = self.songs[order + 1].id\r\n        self.currentPlayId = id\r\n        events.emit(self.event.PLAY, id)\r\n      } else {\r\n        // 顺序到了最后就停了\r\n      }\r\n    },\r\n    // 2.2也是播放下一曲 不过是随机模式 才调用\r\n    playRandom() {\r\n      let order = Math.round(Math.random() * self.songs.length)\r\n      events.emit(self.event.PLAY, self.songs[order].id)\r\n    },\r\n    // 3 暂停\r\n    pauseMusic() {\r\n      events.emit(self.event.PAUSE)\r\n    },\r\n  }\r\n})\r\n\r\nexport default Model","import { types, getSnapshot } from 'mobx-state-tree'\nimport storage from '../utils/storage'\nimport * as _ from 'lodash'\n\nconst cfg = storage.getValue('speaker')\nconst Model = types.model('musicPlayer', {\n  left: types.optional(types.number, cfg ? cfg.left : 100),\n  top: types.optional(types.number, cfg ? cfg.top : 410),\n  rate: types.optional(types.number, cfg ? cfg.rate : 1.2),\n  pitch: types.optional(types.number, cfg ? cfg.pitch : 0.8),\n}).views(self => ({\n\n})).actions(self => {\n  // 音乐播放器相关\n  return {\n    store(value) {\n      storage.setValue('speaker', _.pick(value, ['left', 'top', 'rate', 'pitch']))\n    },\n    toJSON() {\n      return getSnapshot(self)\n    }\n  }\n})\n\nexport default Model","import { types } from 'mobx-state-tree'\n\nconst Model = types.model({\n  avatar: types.optional(types.string, ''),\n  name: types.optional(types.string, ''),\n  id: types.optional(types.string, ''),\n})\n\nexport default Model","export default {\n  get isDebug() {\n    return process.env.NODE_ENV !== 'production'\n  },\n  console: true,\n  config: {\n    production: {\n      host: '/',\n    },\n    development: {\n      host: '/',\n    }\n  },\n  menus: [\n    {\n      name: 'shelf',\n      path: '/root/shelf',\n      title: '书架',\n      icon: 'FaBook'\n    },\n    {\n      name: 'groups',\n      path: '/root/groups',\n      title: '频道',\n      icon: 'FaList'\n    },\n    {\n      name: 'music',\n      path: '/root/music',\n      title: '音乐',\n      big: true,\n      hideMenu: true,\n      icon: 'FaPlayCircle'\n    },\n    {\n      name: 'todos',\n      path: '/root/todos',\n      title: '任务',\n      hideMenu: true,\n      icon: 'FaTasks'\n    },\n    {\n      name: 'my',\n      path: '/root/my',\n      title: '我的',\n      icon: 'FaUserAlt'\n    },\n  ],\n  cache: {\n    book: {},\n    catalog: {},\n    chapter: {},\n    tree: {},\n  }\n}","import { flow, types } from 'mobx-state-tree'\nimport Config from 'config'\n\nfunction createItemsLoader(model, fn, customs = {}) {\n  const unionModel = types.model({\n    // 数据数组\n    items: types.optional(types.array(model), []),\n    // 当前页码\n    page: types.optional(types.number, 1),\n    // 是否完毕\n    isEnded: types.optional(types.boolean, false),\n    // 是否加载中\n    isLoading: types.optional(types.boolean, false),\n    // 请求状态\n    state: types.optional(types.enumeration(['success', 'fail']), 'success'),\n    // 操作类型\n    type: types.optional(types.enumeration(['refresh', 'more']), 'refresh'),\n    // 排列方向\n    sort: types.optional(types.enumeration(['asc', 'desc']), 'asc'),\n    // 错误信息\n    error: types.maybe(types.model({\n      code: types.maybe(types.string),\n      message: types.maybe(types.string)\n    })),\n  }).views(self => {\n    return {\n      get isEmpty() {\n        return !(self.items && self.items.length > 0)\n      },\n      get length() {\n        return self.items.length\n      },\n    }\n  }).actions(self => {\n    const nw = {}\n    for (let k in customs) {\n      nw[k] = function () { return customs[k].call(self, ...arguments) }\n    }\n    return {\n      setData(data) {\n        self.items = data || []\n      },\n      ...nw\n    }\n  }).actions(self => {\n    const request = flow(function* (option = {}, type = 'refresh') {\n      const { query = {}, params = {}, data = {} } = option\n      if (self.isLoading || (self.isEnded && type === 'more')) {\n        return\n      }\n      self.type = type\n      self.error = undefined\n      self.isLoading = true\n      self.state = 'success'\n      query.page = self.page\n      let res = null\n      try {\n        res = yield fn({ query, params, data }, type)\n        let { ended, items } = res\n        self.isEnded = !!ended\n        if (type === 'refresh') {\n          // 刷新\n          self.page = 1\n          self.items = items\n        } else if (items.length > 0) {\n          // 加载更多\n          self.page = params.page\n          self.items.push(...items)\n        } else {\n          self.state = 'fail'\n          self.error = { code: 1, message: 'x' }\n        }\n      } catch (err) {\n        if (Config.isDebug && Config.console) {\n          console.log(err, 'loader')\n        }\n        // 加载失败\n        self.state = 'fail'\n        if (err.code) {\n          self.error = { code: err.code, message: err.message || err.toString() }\n        } else {\n          self.error = { code: 'unknown', message: '未知错误' }\n        }\n      } finally {\n        self.isLoading = false\n      }\n      return res\n    })\n    return {\n      clear() {\n        self.page = 1\n        self.items = []\n      },\n      toggleSort() {\n        self.sort = self.sort === 'asc' ? 'desc' : 'asc'\n      },\n      remove(index) {\n        self.items = self.items.slice().filter((item, idx) => +index !== +idx)\n      },\n      append(item) {\n        self.items.push(item)\n      },\n      async refresh(option) {\n        return await request(option, 'refresh')\n      },\n      async loadMore(option) {\n        self.page++\n        return await request(option, 'more')\n      }\n    }\n  })\n\n  return types.optional(unionModel, {})\n}\n\nfunction createItemLoader(model, fn) {\n  const unionModel = types.model({\n    item: types.maybeNull(model),\n    // 是否加载中\n    isLoading: types.optional(types.boolean, false),\n    // 请求状态\n    state: types.optional(types.enumeration(['success', 'fail']), 'success'),\n    // 操作类型\n    type: types.optional(types.enumeration(['refresh']), 'refresh'),\n    error: types.maybe(types.model({\n      code: types.maybe(types.string),\n      message: types.maybe(types.string),\n    }))\n  }).views(self => {\n    return {\n      get isEmpty() {\n        return !self.item\n      },\n      get fn() {\n        return fn\n      }\n    }\n  }).actions(self => {\n    return {\n      setData(data) {\n        self.item = data\n      },\n    }\n  }).actions(self => {\n    const request = flow(function* (option = {}, type = 'refresh') {\n      const { query, params, data } = option\n      if (self.isLoading || (self.isEnded && type === 'more')) {\n        return\n      }\n      if (self.isLoading) {\n        return\n      }\n      self.type = type\n      self.error = undefined\n      self.isLoading = true\n      self.state = 'success'\n      let res = null\n      try {\n        res = yield fn({ query, params, data }, type)\n        let { item } = res\n        if (item) {\n          self.item = item\n        } else {\n          self.state = 'fail'\n          self.error = { code: 1, message: 'x' }\n        }\n      } catch (err) {\n        if (Config.isDebug && Config.console) {\n          console.log(err, 'loader')\n        }\n        self.state = 'fail'\n        if (err.code) {\n          self.error = { code: err.code, message: err.message }\n        } else {\n          self.error = { code: 'unknown', message: '未知错误' }\n        }\n      } finally {\n        self.isLoading = false\n      }\n      return res\n    })\n    return {\n      clear() {\n        self.item = null\n      },\n      async refresh(option) {\n        return await request(option, 'refresh')\n      }\n    }\n  })\n  return types.optional(unionModel, {})\n}\nexport {\n  createItemsLoader,\n  createItemLoader,\n}","import services from '../services/index'\r\nimport UserModel from '../models/UserModel'\r\nimport { createItemLoader } from './BaseLoader'\r\n\r\nexport default createItemLoader(UserModel, async (params) => {\r\n    return services.getUserInfo(params)\r\n})","import services from '../services/index'\nimport LineModel from '../models/LineModel'\nimport { createItemsLoader } from './BaseLoader'\nimport Config from 'config'\n\nexport default createItemsLoader(LineModel, async (params) => {\n  return services.getLines(params)\n}, {\n    getHostByType(type) {\n      let host = ''\n      type = Config.isDebug ? 'dev-' + type : type\n      this.items.forEach(item => {\n        if (item.type === type) {\n          host = item.host\n        }\n      })\n      return host\n    }\n  })","import { types } from 'mobx-state-tree'\n\nconst LineModel = types.model('Line', {\n  id: types.string,\n  name: types.string,\n  desc: types.string,\n  enabled: types.boolean,\n  type: types.string,\n  host: types.string,\n}).views(self => ({\n\n})).actions(self => ({\n  \n}))\n\nexport default LineModel","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  id: types.string,\r\n  pid: types.string,\r\n  tid: types.string,\r\n  name: types.string,\r\n  sort: types.number,\r\n  poster: types.optional(types.string, ''),\r\n  count: types.optional(types.number, 0),\r\n  children: types.maybe(types.late(() => types.array(Model)), []),\r\n})\r\n\r\nexport default Model","import services from 'services'\r\nimport CategoryModel from 'models/CategoryModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(CategoryModel, async (params) => {\r\n  return services.getCategoryList(params)\r\n})","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  id: types.string,\r\n  uid: types.string,\r\n  uname: types.string,\r\n  // avatar: types.string,\r\n  title: types.string,\r\n  poster: types.string,\r\n  desc: types.string,\r\n  tags: types.array(types.string),\r\n  status: types.enumeration(['loading','finished']),\r\n  createdAt: types.string,\r\n  words: types.number,\r\n  comments: types.number,\r\n  collections: types.number,\r\n  chapters: types.number,\r\n})\r\n\r\nexport default Model","import services from 'services/index'\r\nimport BookModel from 'models/BookModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(BookModel, async (params) => {\r\n  return services.getMybooks(params)\r\n})","import AppModel from 'models/AppModel'\nimport DebugModel from 'models/DebugModel'\nimport MusicPlayerModel from 'models/MusicPlayerModel'\nimport SpeakerModel from 'models/SpeakerModel'\nimport UserLoader from 'loader/UserLoader'\nimport LineLoader from 'loader/LineLoader'\nimport CategoryLoader from 'loader/CategoryLoader'\nimport BookShelfLoader from 'loader/BookShelfLoader'\n\nimport Config from 'config.js'\nimport storage from './utils/storage'\n// 全局状态.\nconst app = AppModel.create({\n  baseURL: storage.getValue('baseURL') || (Config.isDebug ? Config.config.development.host : Config.config.production) || '',\n  config: {},\n  music: { url: '' },\n})\napp.setAccessToken(storage.getValue(app.accessTokenName) || '')\napp.setRefreshToken(storage.getValue(app.refreshTokenName) || '')\napp.initLocker(storage.getValue(app.lockerName) || {})\nconst target = {}\n// TODO: 记录mode\nconst music = MusicPlayerModel.create({\n  mode: storage.getValue(app.musicModeName) || 'circle',\n})\nconst speaker = SpeakerModel.create({})\nconst debug = DebugModel.create({})\n// loader\nconst userLoader = UserLoader.create()\nconst lineLoader = LineLoader.create()\nconst categoryLoader = CategoryLoader.create()\nconst bookShelfLoader = BookShelfLoader.create()\n\nexport default {\n  app,\n  debug,\n  music,\n  speaker,\n  target,\n  userLoader,\n  lineLoader,\n  categoryLoader,\n  bookShelfLoader,\n}","import axios from 'axios'\nimport globalStore from '../global-state'\nimport Config from '../config'\nimport services from '../services'\nimport storage from './storage'\n\nconst shttp = axios.create({\n  baseURL: storage.getValue('baseURL') || (Config.isDebug ? Config.config.development.host : Config.config.production) || '',\n  withCredentials: false,\n  timeout: 5000\n})\n\nshttp.interceptors.request.use(\n  config => {\n    globalStore.debug.append(`${config.method} ${config.url}`)\n    if (Config.isDebug && Config.console) {\n      console.log(`${config.method} ${config.url}`)\n    }\n    config.headers['Authorization'] = globalStore.app.accessToken\n    // config.params = { token: globalStore.app.accessToken }\n    return config\n  },\n  error => {\n    if (Config.isDebug && Config.console) {\n      console.log(error, 'request error')\n    }\n    return Promise.resolve(error)\n  }\n)\n\nshttp.interceptors.response.use(\n  response => {\n    if (Config.isDebug && Config.console) {\n      console.log(response.status, response.data)\n    }\n    const res = response.data\n    // 干点什么\n    if (res.code !== 0) {\n      if (res.code === 10110 && response.config.url !== response.config.baseURL + '/v1/auth/user/refresh') {\n        globalStore.app.setAccessToken('')\n        return new Promise(async (resolve) => {\n          const result = await services.refresh({ authorization: globalStore.app.refreshToken })\n          if (result.data) {\n            globalStore.app.setAccessToken(result.data.token)\n            globalStore.app.setAccessToken(result.data.refresh_token)\n            response.config.headers['Authorization'] = result.data.token\n            response.config.try = true\n            const newResult = await shttp(response.config)\n            resolve(newResult)\n          } else {\n            resolve({})\n          }\n        })\n      } else {\n        globalStore.debug.append(res.message)\n        // Modal.alert('请求失败', res.message);\n      }\n\n    }\n    return res\n  },\n  error => {\n    globalStore.debug.append(error.message)\n    if (Config.isDebug && Config.console) {\n      console.log(error, 'response error')\n    }\n    const data = error.response.data\n    if (data.code === 101020) {\n      globalStore.app.setAccessToken('')\n    }\n    return Promise.resolve(error)\n  }\n)\n\nexport default shttp","// import * as bowser from 'bowser'\r\n\r\nexport function isDeskTop(dev) {\r\n    return true\r\n    // const browser = bowser.getParser(window.navigator.userAgent)\r\n    // const isChromeApp = (window.matchMedia('(display-mode: standalone)').matches)\r\n    // const isIosApp = window.navigator.standalone === true\r\n    // const isDev = dev === undefined ? process.env.NODE_ENV === 'development' : dev\r\n    // const platformType = browser.getPlatformType()\r\n    // return isDev || (platformType === 'mobile' && (isChromeApp || isIosApp)) ? true : false\r\n}\r\n\r\nexport function stringfyQuery(query = {}) {\r\n    let search = ''\r\n    for (let k in query) {\r\n        search += `&${k}=${query[k]}`\r\n    }\r\n    return search ? '?' + search.substr(1) : ''\r\n}","import user from './user'\nimport common from './public'\n\nexport default {\n  ...user,\n  ...common,\n}","import shttp from 'utils/shttp'\r\nimport { stringfyQuery } from 'utils/utils'\r\n\r\nexport default {\r\n  login({ query, params, data }) {\r\n    // crypto.createHash('md5').update(params.password).digest('hex').toUpperCase()\r\n    return shttp({\r\n      url: '/v1/auth/user/sign-in',\r\n      method: 'post',\r\n      data: { name: data.account, password: data.password },\r\n    })\r\n  },\r\n  register({ query, params, data }) {\r\n    return shttp({\r\n      url: '/v1/auth/user/sign-up',\r\n      method: 'post',\r\n      data: { name: params.account, password: params.password },\r\n    })\r\n  },\r\n  refresh({ query, params, data }) {\r\n    return shttp({\r\n      url: '/v1/auth/user/refresh',\r\n      method: 'post',\r\n      data: params,\r\n    })\r\n  },\r\n  async getUserInfo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/user/self',\r\n      method: 'get',\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getMybooks() {\r\n    const result = await shttp({\r\n      url: '/v1/user/my-books',\r\n    })\r\n    return { items: result.data, ended: true }\r\n  },\r\n  async getBookFirstChapter({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/book/${params.id}/first-chapter`\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getBookChapter({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/book/${params.bid}/chapter/${params.id}`\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getTodos({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/todos${stringfyQuery(query)}`\r\n    })\r\n    result.data.forEach(d => {\r\n      d.startedAt = new Date(d.startedAt)\r\n      d.endedAt = new Date(d.endedAt)\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async createTodo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/user/todo',\r\n      method: 'POST',\r\n      data\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async updateTodo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/user/todo/${params.id}`,\r\n      method: 'PUT',\r\n      data\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async destroyTodo({ query, params, data }) {\r\n    return shttp({\r\n      url: `/v1/user/todo/${params.id}`,\r\n      method: 'DELETE',\r\n      data\r\n    })\r\n  },\r\n  async addSongToSheet({ query, params, data }) {\r\n    return shttp({\r\n      url: `/v1/user/song-sheet/${params.ssid}/song/${params.id}`,\r\n      method: 'POST',\r\n    })\r\n  },\r\n  async removeSheetSong({ query, params, data }) {\r\n    return shttp({\r\n      url: `/v1/user/song-sheet/${params.ssid}/song/${params.id}`,\r\n      method: 'DELETE',\r\n    })\r\n  },\r\n}","import shttp from 'utils/shttp'\r\nimport { stringfyQuery } from 'utils/utils'\r\n\r\nexport default {\r\n  async getBookInfo({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/book/${params.id}`\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getBookCatalog({ query, params, data }) {\r\n    let search = ''\r\n    for (let k in params.query) {\r\n      search += `&${k}=${params.query[k]}`\r\n    }\r\n    const result = await shttp({\r\n      url: `/v1/public/book/${params.id}/catalog?${search}`\r\n    })\r\n    return { items: result.data, ended: result.data.length < 20 }\r\n  },\r\n  async getBookList({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/books${stringfyQuery(query)}`,\r\n    })\r\n    return { items: result.data, ended: result.data.length < 10 }\r\n  },\r\n  async getCategoryList() {\r\n    const result = await shttp({\r\n      url: '/v1/public/categories'\r\n    })\r\n    const tree = {}\r\n    result.data.forEach(c => {\r\n      c.children = []\r\n      if (c.pid === '') {\r\n        tree[c.tid] = c\r\n      }\r\n    })\r\n    result.data.forEach(c => {\r\n      if (c.pid !== '') {\r\n        tree[c.tid].children.push(c)\r\n      }\r\n    })\r\n    const items = []\r\n    for (let k in tree) {\r\n      items.push(tree[k])\r\n    }\r\n    return { items, ended: true }\r\n  },\r\n  async getGroupTree({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/group-tree/${params.group_id}`,\r\n    })\r\n    return { item: result.data }\r\n  },\r\n  async getGroups({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/public/groups',\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async getSongSheets({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/public/song-sheets',\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async getSongSheet({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/song-sheet/${params.id}`,\r\n    })\r\n    result.data.forEach((it, index) => {\r\n      it.order = index\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async getSongs({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/songs${stringfyQuery(query)}`,\r\n    })\r\n    return { items: result.data, ended: result.data.length < 10 ? true : false }\r\n  },\r\n  async getLines({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: '/v1/public/lines'\r\n    })\r\n    return { items: result.data }\r\n  },\r\n  async getImages({ query, params, data }) {\r\n    const result = await shttp({\r\n      url: `/v1/public/images${stringfyQuery(query)}`,\r\n    })\r\n    return { items: result.data, ended: result.data.length < 10 ? true : false }\r\n  },\r\n} ","import services from 'services'\r\nimport BookModel from 'models/BookModel'\r\nimport { createItemLoader } from './BaseLoader'\r\n\r\nexport default createItemLoader(BookModel, async (params) => {\r\n  const result = await services.getBookInfo(params)\r\n  return result\r\n})","import React from 'react'\nimport { ActivityIndicator } from 'antd-mobile'\n\nconst style = { textAlign: 'center' }\n\nexport default function renderEmpty(loader, options) {\n  if (loader.isEmpty) {\n    if (loader.isLoading) {\n      return <div style={style}><ActivityIndicator text=\"加载中...\" /></div>\n    } else if (loader.error) {\n      return <div style={style}>出错啦!{loader.error.message}<span onClick={() => loader.refresh()}>点我重试</span></div>\n    } else {\n      return <div style={style}>没有数据,<span onClick={() => loader.refresh()}>点我重试</span></div>\n    }\n  }\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\n\r\nexport default function ({ children, holder, loading }) {\r\n  return <Observer>\r\n    {() => {\r\n      if (loading) {\r\n        return holder\r\n      } else {\r\n        return children\r\n      }\r\n    }}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { ListView, PullToRefresh } from 'antd-mobile'\nimport renderEmptyView from '../EmptyView'\nimport AutoCenterView from '../AutoCenterView'\nimport SwitchView from '../SwitchView'\n\nconst dataProvider = new ListView.DataSource({\n  rowHasChanged: (row1, row2) => false\n})\n\nfunction MyBody(props) {\n  return <div className={`am-list-body ${props.className}`}>{props.children}</div>\n}\n\nfunction renderList({ loader, refresh, loadMore, renderItem, onScroll, className, renderEmpty }) {\n  const dataSource = dataProvider.cloneWithRows(loader.items.slice())\n  const EmptyView = renderEmptyView(loader)\n  // 必须要这样.不能直接用 loader.isLoading判断\n  const isLoading = loader.isLoading\n  return <Fragment>\n    <SwitchView\n      loading={loader.isEmpty}\n      holder={<AutoCenterView>{renderEmpty || EmptyView}</AutoCenterView>}>\n      <ListView\n        style={{ height: '100%', overflow: 'auto' }}\n        dataSource={dataSource}\n        // 自带的.没有写就默认滚到底部了\n        onScroll={onScroll}\n        renderRow={(rowData, sectionId, rowId) => renderItem(rowData, sectionId, rowId)}\n        renderBodyComponent={() => <MyBody className={className} />}\n        initialListSize={Infinity}\n        onEndReachedThreshold={10}\n        onEndReached={loadMore ? loadMore : loader.loadMore}\n        pullToRefresh={<PullToRefresh refreshing={false} onRefresh={refresh ? refresh : loader.refresh} />}\n        /**\n         * useBodyScroll\n         * onScroll\n         */\n        renderFooter={() => <div style={{ textAlign: 'center', padding: 5 }}>{isLoading ? '正在加载更多数据...' : '已全部加载完毕'}</div>}\n      />\n    </SwitchView>\n\n  </Fragment>\n}\n\nexport default function (props) {\n  // const { loader } = props;\n  // useEffectOnce(() => {\n  //   if (loader.isEmpty) {\n  //     loader.refresh();\n  //   }\n  // });\n  return <div style={{ display: 'flex', flex: '1 1', height: '100%', flexDirection: 'column' }}>\n    <Observer>\n      {() => {\n        return renderList(props)\n      }}\n    </Observer>\n  </div>\n}\n","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\n\r\nexport default function ({ item, router, nth }) {\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        <div style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} onClick={() => { router.pushView(`/root/book/${item.bid}/chapter/${item.id}`, null, { hideMenu: true }) }}>\r\n          <div style={{ fontSize: '1.2rem' }}>第{nth}章 {item.title}</div>\r\n          <div style={{ color: 'grey', padding: '5px 0' }}>{item.createdAt}</div>\r\n        </div>\r\n      </Fragment>\r\n    }\r\n    }\r\n  </Observer>\r\n\r\n}","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model({\r\n  id: types.string,\r\n  bid: types.string,\r\n  title: types.optional(types.string, ''),\r\n  createdAt: types.optional(types.string, ''),\r\n  // 特殊部分\r\n  isApproved: types.optional(types.boolean, true),\r\n  order: types.optional(types.number, 1),\r\n  words: types.optional(types.number, 0),\r\n  comments: types.optional(types.number, 0),\r\n  content: types.optional(types.string, ''),\r\n  preId: types.maybe(types.string),\r\n  nextId: types.maybe(types.string),\r\n})\r\n\r\nexport default Model","import services from 'services/index'\r\nimport Chapter from 'models/ChapterModel'\r\nimport { createItemLoader } from './BaseLoader'\r\n// import caches from 'utils/cache'\r\n\r\n// const chapterCache = caches.getCache('chapter')\r\nexport default createItemLoader(Chapter, async (params) => {\r\n  return services.getBookChapter(params)\r\n  // let item = await chapterCache.getValue(params.id)\r\n  // if (item) {\r\n  //   return { item }\r\n  // } else {\r\n  //   const result = await services.getBookChapter(params)\r\n  //   item = result.item\r\n  //   if (item) {\r\n  //     chapterCache.setValue(params.id, item)\r\n  //   }\r\n  // }\r\n  // return { item }\r\n})","import React from 'react'\nimport { Observer, useLocalStore } from 'mobx-react-lite'\nimport { InputItem, List, Button, Toast, Modal } from 'antd-mobile'\n\nimport { useRouterContext } from 'contexts/router'\nimport { useNaviContext } from 'contexts/navi'\nimport services from 'services'\nimport globalStore from 'global-state'\nimport MIconView from 'components/MIconView'\n\nimport './index.css'\n\nasync function login(router, store) {\n  if (store.account && store.password) {\n    store.isLoading = true\n    let res = await services.login({ data: store })\n    store.isLoading = false\n    if (!res || !res.data) {\n      return Toast.info('请求失败!')\n    }\n    if (res.code !== 0) {\n      return Toast.info(res.message)\n    } else {\n      globalStore.app.setAccessToken(res.data.token)\n      globalStore.app.setRefreshToken(res.data.refresh_token)\n      router.history.push({\n        pathname: '/'\n      })\n    }\n  } else {\n    Toast.info('请输入账号密码!')\n  }\n}\n\n// eslint-disable-next-line\nasync function register(router, store) {\n  if (store.account && store.password) {\n    store.isLoading = true\n    let res = await services.register(store)\n    store.isLoading = false\n    if (!res) {\n      return Toast.info('请求失败!')\n    }\n    if (res.code !== 0) {\n      return Toast.info(res.message)\n    } else {\n      Toast.info('注册成功!')\n    }\n  } else {\n    Toast.info('请输入账号密码!')\n  }\n}\n\nexport default function ({ self }) {\n  let Navi = useNaviContext()\n  let router = useRouterContext()\n  let store = useLocalStore(() => ({\n    isLoading: false,\n    isLogin: false,\n    isRegister: false,\n    account: '',\n    password: ''\n  }))\n  return <Observer>\n    {() => {\n      return (\n        <div className=\"full-height\">\n          <Navi left=\"返回\" title=\"账号登录\" router={router} />\n          <div className=\"full-height-auto\">\n            <div className=\"dd-common-centerXY\" style={{ position: 'relative' }}>\n              <div style={{ position: 'absolute', right: 0, top: 0, padding: 5 }}>\n                <MIconView type=\"FaCog\" onClick={() => {\n                  Modal.prompt('地址', '', [\n                    { text: '取消' },\n                    {\n                      text: '确定', onPress: val => {\n                        globalStore.app.setBaseURL(val)\n                      }\n                    }\n                  ], 'default', '')\n                }} />\n              </div>\n              <List>\n                <List.Item>\n                  <InputItem\n                    type=\"text\"\n                    placeholder=\"用户名\"\n                    style={{ border: '0 none' }}\n                    defaultValue={store.account}\n                    onBlur={value => store.account = value}\n                  >\n                    用户名\n            </InputItem>\n                </List.Item>\n                <List.Item>\n                  <InputItem\n                    type=\"password\"\n                    placeholder=\"密码\"\n                    defaultValue=\"\"\n                    style={{ border: '0 none' }}\n                    onBlur={value => store.password = value}\n                  >\n                    密码\n            </InputItem>\n                </List.Item>\n                <List.Item style={{ display: 'flex' }}>\n                  <Button loading={store.isLogin} disabled={store.isLogin || store.isRegister} type=\"primary\" onClick={() => login(router, store)}>登录</Button>\n                  {/* <div style={{ display: 'flex', alignItems: 'center', flexDirection: 'row', justifyContent: 'space-around' }}>\n              <Button loading={store.isLogin} disabled={store.isLogin || store.isRegister} type=\"primary\" onClick={() => login(router, store)}>登录</Button>\n              <Button loading={store.isRegister} inline disabled={store.isLogin || store.isRegister} type=\"primary\" onClick={() => register(router, store)}>注册</Button>\n            </div> */}\n                </List.Item>\n              </List>\n            </div>\n          </div>\n        </div>\n      )\n\n    }}\n  </Observer>\n}","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport 'components/common.css'\nimport MIconView from 'components/MIconView'\nimport store from '../../global-state'\n// import config from 'config'\n\nexport default function ({ item, router }) {\n  let imageHost = store.lineLoader.getHostByType('image')\n  return <Observer>\n    {() => {\n      return <Fragment>\n        <div className=\"full-width\" style={{ padding: 10 }} onClick={() => { router.pushView(`/root/book/${item.id}/info`, null, { hideMenu: true, id: item.id }) }}>\n          <div className=\"full-width-fix\" style={{ width: 60, height: 80, backgroundColor: 'green', marginRight: 20 }}>\n            <img style={{ width: '100%', height: '100%' }} src={imageHost + (item.poster ? item.poster : '/poster/nocover.jpg')} alt=\"\" />\n          </div>\n          <div className=\"full-width-auto full-height\">\n            <div className=\"dd-common-alignside\">\n              <div style={{ fontSize: '1.2rem' }}>{item.title}</div>\n              <MIconView type=\"FaEllipsisH\" />\n            </div>\n\n            <div style={{ padding: '4px 0', color: 'rgb(146, 145, 145)' }}>{item.uname} · {'xxxxxx'}</div>\n            <div style={{ color: 'rgb(146, 145, 145)' }}>17小时前 · 第八百零六章 翻车了</div>\n          </div>\n        </div>\n      </Fragment>\n    }\n    }\n  </Observer>\n\n}","import services from 'services/index'\r\nimport BookModel from 'models/BookModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(BookModel, async (params) => {\r\n  return services.getBookList(params)\r\n})","import { types } from 'mobx-state-tree'\r\n\r\nconst GroupModel = types.model('Group', {\r\n  tree_id: types.string,\r\n  group_id: types.string,\r\n  parent_id: types.string,\r\n  title: types.string,\r\n  name: types.string,\r\n  desc: types.string,\r\n  view: types.string,\r\n  refs: types.array(types.string),\r\n  data: types.optional(types.frozen([]), []),\r\n  attrs: types.model({\r\n    hide_title: types.boolean,\r\n    allowChange: types.boolean,\r\n    selected: types.maybeNull(types.boolean),\r\n    timeout: types.maybeNull(types.number),\r\n    columns: types.maybeNull(types.number),\r\n    showCount: types.maybeNull(types.number),\r\n  }),\r\n  params: types.frozen(null, {}),\r\n  more: types.model({\r\n    channel_id: types.string,\r\n    keyword: types.string,\r\n    type: types.string,\r\n  }),\r\n  nth: types.number,\r\n  children: types.optional(types.array(types.late(() => GroupModel)), []),\r\n}).views(self => ({\r\n  get id() {\r\n    return self.group_id\r\n  },\r\n})).actions(self => ({\r\n  selected(status) {\r\n    if (self.attrs.selected !== status) {\r\n      self.attrs.selected = status\r\n    }\r\n  },\r\n}))\r\n\r\nexport default GroupModel","import services from 'services/index'\r\nimport { createItemLoader } from './BaseLoader'\r\nimport GroupTreeModel from 'models/GroupTreeModel'\r\n\r\nexport default createItemLoader(GroupTreeModel, async (params) => {\r\n  return services.getGroupTree(params)\r\n})","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport '../group.css'\r\n\r\nexport default function FilterTag({ self, selectTag }) {\r\n  return <Observer>{() => (\r\n    <span className={`comp-tag ${self.attrs.selected ? 'selected' : ''}`} onClick={() => selectTag(self.group_id)}>{self.name}</span>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport FilterTag from '../FilterTag'\r\nimport '../group.css'\r\n\r\nexport default function FilterRow({ self, onQueryChange }) {\r\n  function selectTag(group_id) {\r\n    if (self.group_id === group_id) {\r\n      self.selected(true)\r\n    } else {\r\n      self.selected(false)\r\n    }\r\n    self.children.forEach(child => {\r\n      if (child.group_id === group_id) {\r\n        child.selected(true)\r\n      } else {\r\n        child.selected(false)\r\n      }\r\n    })\r\n    onQueryChange()\r\n  }\r\n  return <Observer>{() => (\r\n    <div style={{ margin: '5px 10px', whiteSpace: 'nowrap', overflowX: 'hidden', overflowY: 'hidden' }}><span className={`comp-tag ${self.attrs.selected ? 'selected' : ''}`} onClick={() => selectTag(self.group_id)}>{self.name}</span>{self.children.map(child => (<FilterTag self={child} key={child.id} selectTag={selectTag} />))}</div>\r\n  )}</Observer>\r\n}","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport 'components/common.css'\nimport store from '../../global-state'\nimport config from 'config'\nimport { useRouterContext } from 'contexts/router'\n\nexport default function ({ item }) {\n  let imageHost = store.lineLoader.getHostByType('image')\n  const router = useRouterContext()\n  return <Observer>\n    {() => {\n      return <Fragment>\n        <div className=\"full-width\" style={{ margin: 10 }} onClick={() => { router.pushView(`/root/book/${item.id}/info`, null, { hideMenu: true, id: item.id }) }}>\n          <div className=\"full-width-fix\" style={{ width: 60, height: 80, backgroundColor: 'green', marginRight: 20 }}>\n            <img style={{ width: '100%', height: '100%' }} src={imageHost + (item.poster ? item.poster : '/poster/nocover.jpg')} alt=\"\" />\n          </div>\n          <div className=\"full-width-auto full-height\">\n            <div className=\"dd-common-alignside\">\n              <div style={{ fontSize: '1.2rem' }}>{item.title}</div>\n            </div>\n            <div style={{ padding: '4px 0', color: 'rgb(146, 145, 145)' }}>{item.uname} · {item.catalog} · {item.status === 'loading' ? '连载' : '完结'} · {item.words}</div>\n            <div style={{ color: 'rgb(146, 145, 145)' }} className=\"line2\">{item.desc}</div>\n          </div>\n        </div>\n      </Fragment>\n    }\n    }\n  </Observer>\n\n}","import React from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { Button } from 'antd-mobile'\r\nimport VisualBox from 'components/VisualBoxView'\r\nimport MIcon from 'components/MIconView'\r\n\r\nfunction Node({ self, isChild = false, ...props }) {\r\n  const store = useLocalStore(() => ({\r\n    showMenu: false,\r\n    showChildren: false,\r\n  }))\r\n  return <Observer>{() => (\r\n    <div className=\"full-width\" style={{ padding: '5px 0', }}>\r\n      <div style={{ position: 'relative', display: 'inline-block', }} onContextMenu={(e) => {\r\n        store.showMenu = true\r\n        e.preventDefault()\r\n      }}>\r\n        <span style={{ display: 'flex', marginLeft: 5, backgroundColor: '#eaeaea', border: '1px solid #666', padding: 3, borderRadius: 5, zIndex: store.showMenu ? 100 : 98, position: 'relative', }}>\r\n          {self.title}\r\n          <VisualBox visible={self.children.length !== 0}>\r\n            <MIcon type={store.showChildren ? 'FaMinusCircle' : 'FaPlusCircle'} onClick={() => store.showChildren = !store.showChildren} />\r\n          </VisualBox>\r\n        </span>\r\n        <div onClick={() => store.showMenu = false} style={{ display: store.showMenu && props.mode === 'edit' ? 'block' : 'none', position: 'fixed', left: 0, top: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.5)', zIndex: 99 }}></div>\r\n        <div style={{ zIndex: 100, display: store.showMenu && props.mode === 'edit' ? 'flex' : 'none', whiteSpace: 'nowrap', position: 'absolute', top: '100%', left: '100%', backgroundColor: 'white', border: '1px solid #bbb', borderRadius: 5, padding: 5 }}>\r\n          <div style={{ textAlign: 'right' }}>\r\n            <Button type=\"primary\" onClick={() => {\r\n              props.openGroupEdit({ parent_id: self.group_id, tree_id: self.tree_id, view: 'tree-node' })\r\n            }}>添加</Button>\r\n            <Button onClick={() => { props.destroyGroup(self) }}>删除</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"full-height\" style={{ display: store.showChildren ? 'block' : 'none', position: 'relative', margin: '10px 0 10px 10px', paddingLeft: 10, }}>\r\n        <VisualBox visible={self.children.length !== 0}>\r\n          <span style={{ width: '100%', position: 'absolute', top: 0, left: 0, height: '50%', borderTopLeftRadius: '10%', borderLeft: '1px solid #999', transform: 'translateY(-7px)' }}></span>\r\n          <span style={{ width: '100%', position: 'absolute', bottom: 0, left: 0, height: '50%', borderBottomLeftRadius: '10%', borderLeft: '1px solid #999', transform: 'translateY(7px)' }}></span>\r\n          <span style={{ position: 'absolute', top: '50%', left: -5, marginTop: -5, borderColor: '#333', borderStyle: 'solid', borderTopWidth: 1, borderLeftWidth: 1, borderRightWidth: 0, borderBottomWidth: 0, width: 10, height: 10, transform: 'rotate(-45deg)' }}></span>\r\n        </VisualBox>\r\n        {self.children.map(child => <Node key={child.id} self={child} isChild={true} {...props} />)}\r\n      </div>\r\n    </div>\r\n  )}</Observer>\r\n}\r\n\r\nexport default function Tree(props) {\r\n  return <Node {...props} />\r\n}","import React from 'react'\r\nimport { AutoView } from '../index'\r\n\r\nexport default function TabPane({ self, children, ...props }) {\r\n  return self.children.map(child => (\r\n    <AutoView key={child.id} self={child} {...props} />\r\n  ))\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport renderEmptyView from 'components/EmptyView'\r\nimport AutoCenterView from 'components/AutoCenterView'\r\nimport Filter from './Filter'\r\nimport FilterRow from './FitlerRow'\r\nimport FilterTag from './FilterTag'\r\nimport Picker from './Picker'\r\nimport TreeNode from './TreeNode'\r\nimport Tab from './Tab'\r\nimport TabPane from './TabPane'\r\n\r\nconst views = {\r\n  'filter': Filter,\r\n  'filter-tag': FilterTag,\r\n  'filter-row': FilterRow,\r\n  'picker': Picker,\r\n  'tab': Tab,\r\n  'tab-pane': TabPane,\r\n  'tree-node': TreeNode,\r\n  view(name) {\r\n    if (this[name]) {\r\n      return this[name]\r\n    }\r\n  }\r\n}\r\n\r\nexport function AutoView({ self, ...props }) {\r\n  return <Observer>{() => {\r\n    if (self.parent_id === '') {\r\n      return self.children.map(child => (\r\n        <AutoView key={child.group_id} self={child} {...props} />\r\n      ))\r\n    } else {\r\n      let View = views.view(self.view)\r\n      if (View) {\r\n        return <View self={self} {...props} />\r\n      } else {\r\n        return <div>?</div>\r\n      }\r\n    }\r\n  }\r\n  }</Observer>\r\n}\r\nexport function RenderGroups({ loader, ...props }) {\r\n  const emptyView = renderEmptyView(loader)\r\n  return <Observer>{() => {\r\n    if (loader.item && loader.item.children.length !== 0) {\r\n      return <div style={{ height: '100%', overflow: 'auto' }}>\r\n        <AutoView self={loader.item} {...props} />\r\n      </div>\r\n    } else {\r\n      return <AutoCenterView>{emptyView}fuck</AutoCenterView>\r\n    }\r\n  }}</Observer>\r\n}","import React, { useEffect } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport FilterRow from '../FitlerRow'\r\nimport { useRouterContext } from 'contexts/router'\r\n\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport BookListLoader from 'loader/BookListLoader'\r\nimport BookItem from 'business/ResourceItem/BookItem'\r\n\r\nexport default function Filter({ self, ...props }) {\r\n  const router = useRouterContext()\r\n  const booksLoader = BookListLoader.create()\r\n  useEffect(() => {\r\n    if (booksLoader.isEmpty) {\r\n      booksLoader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <div className=\"full-height\">\r\n      <div style={{ padding: 5 }}>{self.children.map(child => (<FilterRow self={child} key={child.id} onQueryChange={() => {\r\n        let query = {}\r\n        self.children.forEach(child => {\r\n          child.children.forEach(tag => {\r\n            if (tag.attrs.selected) {\r\n              Object.assign(query, tag.params)\r\n            }\r\n          })\r\n        })\r\n        booksLoader.refresh({ query })\r\n      }} />))}</div>\r\n      <div className=\"full-height-auto\">\r\n        <LoaderListView\r\n          loader={booksLoader}\r\n          renderItem={(item, selectionId, index) => <BookItem\r\n            item={item}\r\n            router={router}\r\n            selectionId={selectionId}\r\n          />}\r\n        />\r\n      </div>\r\n    </div>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\nimport MIconView from 'components/MIconView'\r\nimport BookItemPick from 'business/ResourceItem/BookItemPick'\r\n\r\nexport default function Picker({ self }) {\r\n  return <Observer>{() => (\r\n    <div>\r\n      {self.attrs.hide_title === false && <div className=\"dd-common-alignside\" style={{ borderLeft: '5px solid #ff9999', paddingLeft: 10 }}>\r\n        <span>{self.name}</span>\r\n        <VisualBoxView visible={self.more.channel_id !== ''}>\r\n          <span style={{ fontSize: 16, color: '#888' }}>\r\n            <MIconView type=\"FaAngleRight\" before=\"更多\" />\r\n          </span>\r\n        </VisualBoxView>\r\n      </div>}\r\n      <div>\r\n        {self.data.map((d, index) => (<BookItemPick key={index} item={d} />))}\r\n      </div>\r\n      <VisualBoxView visible={self.attrs.allowChange === true}>\r\n        <div style={{ textAlign: 'center' }}>\r\n          <MIconView type=\"FaRedo\" after=\"换一换\" />\r\n        </div>\r\n      </VisualBoxView>\r\n    </div>\r\n  )}</Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Tabs } from 'antd-mobile'\r\nimport TabPane from '../TabPane'\r\n\r\nexport default function Tab({ self, children, ...props }) {\r\n  return (\r\n    <Fragment>\r\n      <Tabs tabs={self.children.map((ch, index) => ({ title: ch.title, sub: index }))}>{\r\n        self.children.map((child, index) => (\r\n          <TabPane key={index} self={child} {...props} />\r\n        ))\r\n      }</Tabs>\r\n    </Fragment>)\r\n}","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport GroupTreeModel from 'models/GroupTreeModel'\r\n\r\nexport default createItemsLoader(GroupTreeModel, async (params) => {\r\n  return services.getGroups(params)\r\n})","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport 'components/common.css'\r\nimport MIconView from 'components/MIconView'\r\n\r\nexport default function ({ item, router }) {\r\n  return <Observer>\r\n    {() => (\r\n      <Fragment>\r\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} onClick={() => { router.pushView(`/root/group-tree/${item.group_id}`, null, { title: item.title, hideMenu: true }) }}>\r\n          {item.title}\r\n          <MIconView type=\"FaAngleRight\" />\r\n        </div>\r\n      </Fragment>\r\n    )}\r\n  </Observer>\r\n}","import { types } from 'mobx-state-tree'\r\n\r\nconst TodoModel = types.model('Todo', {\r\n  id: types.string,\r\n  title: types.string,\r\n  content: types.string,\r\n  priority: types.number,\r\n  isFinish: types.boolean,\r\n  isDelay: types.boolean,\r\n  notify: types.boolean,\r\n  giveup: types.boolean,\r\n  startedAt: types.Date,\r\n  endedAt: types.maybeNull(types.Date),\r\n  deletedAt: types.maybeNull(types.Date),\r\n  type: types.string,\r\n}).views(self => ({\r\n\r\n})).actions(self => ({\r\n  finishToggle() {\r\n    self.isFinish = !self.isFinish\r\n  }\r\n}))\r\n\r\nexport default TodoModel","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport TodoModel from 'models/TodoModel'\r\n\r\nexport default createItemsLoader(TodoModel, async (params) => {\r\n  return services.getTodos(params)\r\n})","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport MIconView from 'components/MIconView'\r\nimport services from 'services'\r\n\r\nexport default function ({ item, router }) {\r\n  return <Observer>\r\n    {() => (\r\n      <Fragment>\r\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }}>\r\n          <MIconView size=\"md\" type={item.isFinish ? 'FaRegCheckCircle' : 'FaRegCircle'} onClick={e => {\r\n            item.finishToggle()\r\n            services.updateTodo({ params: { id: item.id }, data: item }).then(res => {\r\n            })\r\n          }} />\r\n          <span style={{ flex: 1, padding: '5px 10px' }} onClick={() => {\r\n            router.pushView(`/root/todo/${item.id}`, null, { data: item })\r\n          }}>{item.title}</span>\r\n          <MIconView type=\"FaAngleLeft\" onClick={() => {\r\n\r\n          }} />\r\n        </div>\r\n      </Fragment>\r\n    )}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer, useLocalStore, } from 'mobx-react-lite'\r\nimport { ActivityIndicator, Toast, List, InputItem, TextareaItem, DatePicker, Picker, Switch } from 'antd-mobile'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport services from 'services'\r\n\r\nexport default function TodoAddPage() {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const params = router.params\r\n  const todo = router.getStateKey('data')\r\n  const store = useLocalStore(() => ({\r\n    loading: false,\r\n    title: params.id ? todo.title : '',\r\n    content: params.id ? todo.content : '',\r\n    type: params.id ? todo.type : 'work',\r\n    priority: params.id ? todo.priority : '',\r\n    startedAt: params.id ? todo.startedAt : null,\r\n    endedAt: params.id ? todo.endedAt : null,\r\n    isDelay: params.id ? todo.isDelay : false,\r\n    isFinish: params.id ? todo.isFinish : false,\r\n  }))\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title={params.id ? '修改' : '添加'} router={router} />\r\n      <div className=\"full-height-auto\">\r\n        <List>\r\n          <InputItem type=\"text\" value={store.title} onChange={value => store.title = value}>标题</InputItem>\r\n          <Picker extra={'请选择'} value={[store.type]} data={[\r\n            { label: '生活', value: 'life' },\r\n            { label: '工作', value: 'work' },\r\n            { label: '设计', value: 'design' },\r\n          ]} onChange={value => store.type = value[0]}>\r\n            <List.Item>类型</List.Item>\r\n          </Picker>\r\n          <TextareaItem title=\"详情\" value={store.content} autoHeight onChange={value => store.content = value}></TextareaItem>\r\n          <Picker extra={'请选择'} value={[store.priority]} data={[\r\n            { label: '不重要不紧急', value: 1 },\r\n            { label: '重要不紧急', value: 2 },\r\n            { label: '不重要紧急', value: 3 },\r\n            { label: '重要紧急', value: 4 },\r\n          ]} onChange={value => {\r\n            store.priority = value[0]\r\n          }}>\r\n            <List.Item>优先级</List.Item>\r\n          </Picker>\r\n          <DatePicker value={store.startedAt} onChange={value => store.startedAt = value}>\r\n            <List.Item>开始时间</List.Item>\r\n          </DatePicker>\r\n          <DatePicker value={store.endedAt} onChange={value => store.endedAt = value}>\r\n            <List.Item>结束时间</List.Item>\r\n          </DatePicker>\r\n          <List.Item>\r\n            <div className=\"dd-common-alignside\">\r\n              <span>是否推迟</span>\r\n              <Switch checked={store.isDelay} onChange={value => store.isDelay = value} />\r\n            </div>\r\n          </List.Item>\r\n          <List.Item>\r\n            <div className=\"dd-common-alignside\">\r\n              <span>是否完成</span>\r\n              <Switch checked={store.isFinish} onChange={value => store.isFinish = value} />\r\n            </div>\r\n          </List.Item>\r\n        </List>\r\n      </div>\r\n      <ActivityIndicator animating={store.loading} />\r\n      <div className=\"full-width\" style={{ height: 40, borderTop: '1px solid #eee' }}>\r\n        <div className=\"full-width-auto dd-common-centerXY\" style={{ backgroundColor: 'white' }}>取消</div>\r\n        <div className=\"full-width-auto dd-common-centerXY\" style={{ backgroundColor: '#30a6fb', color: 'white' }} onClick={async () => {\r\n          store.loading = true\r\n          try {\r\n            if (params.id) {\r\n              await services.updateTodo({ params, data: store })\r\n            } else {\r\n              await services.createTodo({\r\n                data: {\r\n                  title: store.title,\r\n                  content: store.content,\r\n                  type: store.type,\r\n                  priority: store.priority,\r\n                  startedAt: store.startedAt,\r\n                  endedAt: store.endedAt,\r\n                }\r\n              })\r\n            }\r\n          } catch (err) {\r\n\r\n          } finally {\r\n            store.loading = false\r\n            Toast.info('编辑成功', 2, () => {\r\n              router.back()\r\n            })\r\n          }\r\n        }}>{params.id ? '修改' : '添加'}</div>\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import { types } from 'mobx-state-tree'\r\n\r\nconst SongSheetModel = types.model('SongSheet', {\r\n  id: types.string,\r\n  uid: types.optional(types.string, ''),\r\n  title: types.string,\r\n  desc: types.string,\r\n  poster: types.string,\r\n  count: types.number\r\n}).views(self => ({\r\n\r\n})).actions(self => ({\r\n  \r\n}))\r\n\r\nexport default SongSheetModel","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport SongSheetModel from 'models/SongSheetModel'\r\n\r\nexport default createItemsLoader(SongSheetModel, async (params) => {\r\n  return services.getSongSheets(params)\r\n})","import { types } from 'mobx-state-tree'\r\n\r\nconst Model = types.model('resource', {\r\n  id: types.string,\r\n  uid: types.string,\r\n  uname: types.string,\r\n  title: types.string,\r\n  poster: types.string,\r\n  desc: types.string,\r\n  url: types.string,\r\n  tags: types.array(types.string),\r\n  status: types.enumeration(['loading', 'finished']),\r\n  createdAt: types.string,\r\n  words: types.number,\r\n  comments: types.number,\r\n  collections: types.number,\r\n  chapters: types.number,\r\n  playing: types.optional(types.boolean, false),\r\n}).actions(self=>({\r\n  toggleStatus() {\r\n    self.playing = !self.playing\r\n  }\r\n}))\r\n\r\nexport default Model","import services from 'services/index'\r\nimport { createItemsLoader } from './BaseLoader'\r\nimport SongModel from 'models/ResourceModel'\r\n\r\nexport default createItemsLoader(SongModel, async (params) => {\r\n  return services.getSongs(params)\r\n})","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport MIconView from 'components/MIconView'\n\nexport default function ({ item, router }) {\n  return <Observer>\n    {() => (\n      <Fragment>\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} onClick={() => { router.pushView(`/root/song-sheet/${item.id}`, null, { title: item.title, hideMenu: true }) }}>\n          {item.title}\n          <MIconView type=\"FaAngleRight\" />\n        </div>\n      </Fragment>\n    )}\n  </Observer>\n}","import services from 'services/index'\r\nimport SongSheetSongModel from 'models/SongSheetSongModel'\r\nimport { createItemsLoader } from './BaseLoader'\r\n\r\nexport default createItemsLoader(SongSheetSongModel, async (params) => {\r\n  return services.getSongSheet(params)\r\n}, {\r\n    clone(loader) {\r\n      this.items = []\r\n      loader.items.forEach(item => {\r\n        this.items.push(item.toJSON())\r\n      })\r\n    },\r\n    getUrlById(id) {\r\n      let url = ''\r\n      this.items.forEach(item => {\r\n        if (item.id === id) {\r\n          url = item.url\r\n        }\r\n      })\r\n      return url\r\n    },\r\n  })","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { ActionSheet } from 'antd-mobile'\nimport MIconView from 'components/MIconView'\nimport VisibleBoxView from 'components/VisualBoxView'\n// import events from 'utils/events'\nimport { useStoreContext } from 'contexts/store'\nimport services from 'services'\n\nexport default function ({ item, mode = 'normal', order, loader, router, remove, ...props }) {\n  const store = useStoreContext()\n  const music = store.music\n  return <Observer>\n    {() => (\n      <Fragment>\n        <div className=\"dd-common-alignside\" style={{ margin: '0 10px', padding: '10px  0 5px 0', borderBottom: '1px solid #eee' }} {...props} >\n          {item.title}\n          <div className=\"dd-common-alignside\">\n            <MIconView type={item.id === music.currentPlayId ? 'FaPause' : 'FaPlay'} onClick={() => {\n              if (item.id === music.currentPlayId) {\n                music.pauseMusic()\n              } else {\n                music.setSheet(loader.items)\n                music.playMusic(item.id)\n              }\n            }} />\n            <VisibleBoxView visible={mode === 'delete'}>\n              <MIconView type=\"MdDeleteForever\" onClick={() => remove(item)} />\n            </VisibleBoxView>\n            <VisibleBoxView visible={mode === 'add'}>\n              <MIconView type=\"FaPlus\" onClick={async (e) => {\n                e.preventDefault()\n                e.stopPropagation()\n                const result = await services.getSongSheets({})\n                const list = result.items.map(it => it.title)\n                ActionSheet.showActionSheetWithOptions({\n                  options: [...list, '取消'],\n                  message: '添加到歌单',\n                  maskClosable: true,\n                  cancelButtonIndex: list.length - 1\n                }, index => {\n                  if (index < list.length - 1) {\n                    let ssid = result.items[index].id\n                    let id = item.id\n                    services.addSongToSheet({ params: { ssid, id } })\n                  }\n                })\n              }} />\n            </VisibleBoxView>\n          </div>\n        </div>\n      </Fragment>\n    )}\n  </Observer>\n}","import React from 'react'\nimport { useEffectOnce } from 'react-use'\nimport { Observer } from 'mobx-react-lite'\nimport { useNaviContext } from 'contexts/navi'\nimport { useRouterContext } from 'contexts/router'\nimport SongSheetLoader from 'loader/SongSheetLoader'\nimport SongListLoader from 'loader/SongListLoader'\nimport LoaderListView from 'components/LoaderListView'\nimport SongItem from 'business/ResourceItem/SongItem'\n\nexport default ({ self, children }) => {\n  const Navi = useNaviContext()\n  const router = useRouterContext()\n  const loader = SongSheetLoader.create()\n  const songListLoader = SongListLoader.create()\n  useEffectOnce(() => {\n    if (loader.isEmpty) {\n      loader.refresh()\n    }\n    if (songListLoader.isEmpty) {\n      songListLoader.refresh()\n    }\n  })\n  return <Observer>\n    {() => (\n      <div className=\"full-height\">\n        <Navi title=\"全部歌曲\" router={router} />\n        <div className=\"full-height-auto\">\n          <LoaderListView\n            loader={songListLoader}\n            renderItem={(item) => (\n              <SongItem mode=\"add\" item={item} router={router} />\n            )}\n          />\n        </div>\n      </div>\n    )}\n  </Observer>\n}","import services from 'services/index'\nimport ResourceModel from 'models/ResourceModel'\nimport { createItemsLoader } from './BaseLoader'\n\nexport default createItemsLoader(ResourceModel, async (params) => {\n  return services.getImages(params)\n})","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport 'components/common.css'\nimport store from '../../global-state'\n\nexport default function ({ item, router }) {\n  let imageHost = store.lineLoader.getHostByType('image')\n  return <Observer>\n    {() => {\n      return <Fragment>\n        <div className=\"full-width-fix\" style={{ height: 320, backgroundColor: '#eee', }}>\n          <img src={imageHost + (item.poster ? item.poster : '/poster/nocover.jpg')} style={{ height: '100%' }} />\n        </div>\n      </Fragment>\n    }\n    }\n  </Observer>\n\n}","import CategoryPage from './CategoryPage'\r\nimport BookInfoPage from './BookInfoPage'\r\nimport BookCatalogPage from './BookCatalogPage'\r\nimport BookChapterPage from './BookChapterPage'\r\n\r\nimport HomePage from './HomePage'\r\nimport AuthLoginPage from './AuthLoginPage'\r\nimport BookShelfPage from './UserShelfPage'\r\nimport BookSearchPage from './BookSearchPage'\r\nimport GroupTreePage from './GroupTreePage'\r\nimport GroupListPage from './GroupListPage'\r\nimport UserCenterPage from './UserCenterPage'\r\nimport UserSettingPage from './UserSettingPage'\r\nimport SecurePage from './SecurePage'\r\nimport TodoPage from './TodoPage'\r\nimport TodoAddPage from './TodoAddPage'\r\nimport MusicPage from './MusicPage'\r\nimport SongSheetPage from './SongSheetPage'\r\nimport SongsPage from './SongsPage'\r\nimport GalleryPage from './GalleryPage'\r\n\r\nexport default [\r\n  {\r\n    pathname: '/auth/login',\r\n    component: AuthLoginPage,\r\n  },\r\n  {\r\n    pathname: '/root/home',\r\n    component: HomePage,\r\n  },\r\n  {\r\n    pathname: '/root/category',\r\n    component: CategoryPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/:id([0-9a-zA-Z-]+)/info',\r\n    component: BookInfoPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/:id([0-9a-zA-Z-]+)/catalog',\r\n    component: BookCatalogPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/:bid([0-9a-zA-Z-]+)/chapter/:id([0-9a-zA-Z-]+)',\r\n    component: BookChapterPage,\r\n  },\r\n  {\r\n    pathname: '/root/book/search',\r\n    component: BookSearchPage,\r\n  },\r\n  {\r\n    pathname: '/root/group-tree/:group_id([0-9a-zA-Z-]+)',\r\n    component: GroupTreePage,\r\n  },\r\n  {\r\n    pathname: '/root/groups',\r\n    component: GroupListPage,\r\n  },\r\n  {\r\n    pathname: '/root/music',\r\n    component: MusicPage,\r\n  },\r\n  {\r\n    pathname: '/root/music-songs',\r\n    component: SongsPage,\r\n  },\r\n  {\r\n    pathname: '/root/song-sheet/:id([0-9a-zA-Z-]+)',\r\n    component: SongSheetPage,\r\n  },\r\n  {\r\n    pathname: '/root/gallery',\r\n    component: GalleryPage,\r\n  },\r\n  // 用户部分\r\n  {\r\n    pathname: '/root/my',\r\n    component: UserCenterPage,\r\n  },\r\n  {\r\n    pathname: '/root/shelf',\r\n    component: BookShelfPage,\r\n  },\r\n  {\r\n    pathname: '/root/secure',\r\n    component: SecurePage,\r\n  },\r\n  {\r\n    pathname: '/root/todos',\r\n    component: TodoPage,\r\n  },\r\n  {\r\n    pathname: '/root/add-todo',\r\n    component: TodoAddPage,\r\n  },\r\n  {\r\n    pathname: '/root/todo/:id([0-9a-zA-Z-]+)',\r\n    component: TodoAddPage,\r\n  },\r\n  {\r\n    pathname: '/root/user-setting',\r\n    component: UserSettingPage,\r\n  }\r\n]\r\n","import React from 'react'\nimport { Observer } from 'mobx-react-lite'\n\nexport default ({ self, children }) => {\n  return <Observer>\n    {() => {\n      return <div className=\"dd-common-centerXY\">\n        Hello World!{children}\n      </div>\n    }}\n  </Observer>\n\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { ActivityIndicator, Icon } from 'antd-mobile'\r\n\r\nimport { useRouterContext } from 'contexts/router'\r\nimport 'components/common.css'\r\nimport MIconView from 'components/MIconView'\r\nimport AutoCenerView from 'components/AutoCenterView'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\nimport BookLoader from 'loader/BookLoader'\r\nimport services from 'services'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = BookLoader.create()\r\n  const params = router.params\r\n  const localStore = useLocalStore(() => ({\r\n    loading: false,\r\n    firstLoading: false,\r\n    shouldFix: false,\r\n    id: params.id,\r\n  }))\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { id: localStore.id } })\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      if (loader.isEmpty) {\r\n        return <AutoCenerView>\r\n          <ActivityIndicator text=\"加载中...\" />\r\n        </AutoCenerView>\r\n      } else {\r\n        return <Fragment>\r\n          <div className=\"full-height\">\r\n            <div className=\"dd-common-alignside\" style={{ position: 'absolute', width: '100%', boxSizing: 'border-box', height: 45, padding: '0 15px' }}>\r\n              <MIconView type=\"FaChevronLeft\" onClick={() => { router.back() }} />\r\n              <div>\r\n                <VisualBoxView visible={localStore.shouldFix}>\r\n                  <div>我的机器人女友</div>\r\n                  <div>松下中二 · 科幻</div>\r\n                </VisualBoxView>\r\n              </div>\r\n              <MIconView type=\"FaEllipsisH\" />\r\n            </div>\r\n            <div className=\"full-height-auto\">\r\n              <div style={{ padding: '20px 0 10px 0', textAlign: 'center', backgroundColor: '#666', color: 'white' }}>\r\n                <img src={loader.item.poster} alt=\"\" width={100} height={120} />\r\n                <div style={{ fontSize: 20, padding: 5 }}>{loader.item.title}</div>\r\n                <div>{loader.item.uname} · 科幻</div>\r\n              </div>\r\n              <div style={{ padding: '0 20px', borderBottom: '1px solid #ccc', backgroundColor: 'snow' }}>\r\n                <div className=\"dd-common-alignside\" style={{ height: 50, borderBottom: '1px solid #ccc' }}>\r\n                  <div className=\"dd-common-centerXY\" style={{ flex: 1 }}>\r\n                    {loader.item.words}万字\r\n                  </div>\r\n                  <div className=\"dd-common-centerXY\" style={{ flex: 1 }}>\r\n                    {loader.item.chapters}章\r\n                  </div>\r\n                  <div className=\"dd-common-centerXY\" style={{ flex: 1 }}>\r\n                    {loader.item.comments}评论\r\n                  </div>\r\n                </div>\r\n                <div style={{ padding: '10px 0', borderBottom: '1px solid #ccc' }} dangerouslySetInnerHTML={{ __html: loader.item.desc }}>\r\n                </div>\r\n                <div className=\"full-width\" style={{ height: 40 }} onClick={() => { router.pushView(`/root/book/${localStore.id}/catalog`, null, { hideMenu: true }) }}>\r\n                  <span className=\"full-width-auto\" style={{ fontWeight: 'bolder' }}>目录</span>\r\n                  <span className=\"full-width-fix\">连载至 729章 · 两小时前更新</span>\r\n                  <MIconView style={{ marginLeft: 10 }} className=\"full-width-fix\" type=\"FaAngleRight\" />\r\n                </div>\r\n              </div>\r\n              <p>TODO:作者 名称 头像 几部作品</p>\r\n            </div>\r\n            <div className=\"dd-common-alignside\" style={{ height: 50 }}>\r\n              <div className=\"dd-common-centerXY\" style={{ flex: 1, backgroundColor: 'rgb(226, 223, 223)', color: 'gray' }}>+ 加入书架</div>\r\n              <div className=\"dd-common-centerXY\" style={{ flex: 1, backgroundColor: 'red', color: 'white' }} onClick={async () => {\r\n                try {\r\n                  localStore.firstLoading = true\r\n                  const info = await services.getBookFirstChapter({ params: { id: localStore.id } })\r\n                  router.pushView(`/root/book/${localStore.id}/chapter/${info.item.id}`, null, { hideMenu: true, bid: localStore.id, id: info.item.id })\r\n                } catch (err) {\r\n\r\n                } finally {\r\n                  localStore.firstLoading = false\r\n                }\r\n              }}><VisualBoxView visible={localStore.firstLoading}><Icon type=\"loading\" /></VisualBoxView>立即阅读</div>\r\n            </div>\r\n          </div>\r\n        </Fragment>\r\n      }\r\n    }\r\n  }</Observer>\r\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useRouterContext } from 'contexts/router'\r\n\r\nimport 'components/common.css'\r\nimport MIconView from 'components/MIconView'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport ChapterItemView from 'business/ChapterItemView'\r\n\r\nimport services from 'services'\r\nimport ChapterModel from 'models/ChapterModel'\r\nimport { createItemsLoader } from 'loader/BaseLoader'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = createItemsLoader(ChapterModel, async (option) => services.getBookCatalog(option)).create()\r\n  const params = router.params\r\n  const localStore = useLocalStore(() => ({\r\n    loading: false,\r\n    sortASC: true,\r\n    id: params.id,\r\n  }))\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { id: localStore.id } })\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <Fragment>\r\n        <div className=\"full-height\">\r\n          <div className=\"dd-common-alignside\" style={{ height: 45, padding: '0 15px' }}>\r\n            <MIconView type=\"FaChevronLeft\" onClick={() => { router.back() }} />\r\n            <div className=\"dd-common-alignside\">\r\n              <span style={{ padding: '0 10px' }}>目录</span>\r\n              <span style={{ padding: '0 10px' }}>书签</span>\r\n            </div>\r\n            <div className=\"dd-common-alignside\" onClick={() => {\r\n              localStore.sortASC = !localStore.sortASC\r\n              loader.toggleSort()\r\n            }}>\r\n              <MIconView type={localStore.sortASC ? 'FaSortNumericDown' : 'FaSortNumericUp'} />\r\n              {localStore.sortASC ? '正序' : '倒序'}\r\n            </div>\r\n\r\n          </div>\r\n          <div className=\"full-height-auto\">\r\n            <LoaderListView\r\n              loader={loader}\r\n              refresh={() => {\r\n                const params = { id: localStore.id }\r\n                loader.refresh({ params })\r\n              }}\r\n              renderItem={(item, sectionId, index) => (\r\n                <ChapterItemView\r\n                  nth={loader.sort === 'asc' ? parseInt(index) + 1 : loader.items.length - parseInt(index)}\r\n                  item={item}\r\n                  router={router}\r\n                  sectionId={sectionId}\r\n                  toggleLoading={() => localStore.loading = !localStore.loading}\r\n                />\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    }\r\n  }</Observer>\r\n}","import React, { Fragment, useEffect, useRef } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { ActivityIndicator, Progress } from 'antd-mobile'\r\n\r\nimport { useRouterContext } from 'contexts/router'\r\nimport 'components/common.css'\r\nimport renderEmpty from 'components/EmptyView'\r\nimport AutoCenterView from 'components/AutoCenterView'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\nimport MIconView from 'components/MIconView'\r\nimport ChapterLoader from 'loader/ChapterLoader'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = ChapterLoader.create()\r\n  const emptyView = renderEmpty(loader)\r\n  const params = router.params\r\n  const localStore = useLocalStore(() => ({\r\n    pop: false,\r\n    percent: 0,\r\n    id: params.id,\r\n    bid: params.bid,\r\n  }))\r\n  const container = useRef(null)\r\n  useEffect(() => {\r\n    loader.refresh({ params: { id: localStore.id, bid: localStore.bid } })\r\n    setTimeout(() => {\r\n      container.current.scrollTop = 1\r\n    }, 100)\r\n  })\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        {/* 顶部导航动态 */}\r\n        <VisualBoxView visible={localStore.pop}>\r\n          <div className=\"dd-common-alignside\" style={{ position: 'absolute', left: 0, top: 0, right: 0, backgroundColor: '#eee', height: 45, padding: '0 15px' }}>\r\n            <MIconView type=\"FaChevronLeft\" onClick={() => { router.back() }} />\r\n            <div className=\"dd-common-alignside\">\r\n              <MIconView type={'FaCloudDownloadAlt'} style={{ margin: '0 10px' }} />\r\n              <MIconView type={'IoIosHeadset'} style={{ margin: '0 10px' }} />\r\n              <MIconView type={'FaEllipsisH'} style={{ margin: '0 10px' }} />\r\n            </div>\r\n          </div>\r\n        </VisualBoxView>\r\n        {/* 内部文字 */}\r\n        <div className=\"full-height\" style={{ padding: '0 15px' }} onClick={() => { localStore.pop = !localStore.pop }}>\r\n          <VisualBoxView visible={loader.isEmpty}>\r\n            <AutoCenterView>\r\n              <ActivityIndicator text=\"加载中...\" />\r\n            </AutoCenterView>\r\n          </VisualBoxView>\r\n          {!loader.isEmpty && <Fragment>\r\n            <div style={{ padding: '8px 0', color: 'grey' }}>{loader.item.title}</div>\r\n            <div\r\n              ref={container}\r\n              className=\"full-height-auto scroll-smooth smooth\"\r\n              style={{ lineHeight: 2, letterSpacing: 2, fontSize: 16, textIndent: 20 }}\r\n              onScroll={() => {\r\n                // container.current.offsetHeight = container.current.scrollHeight - container.current.scrollTop;\r\n                let height = container.current.scrollHeight - container.current.offsetHeight\r\n                if (height <= 0) {\r\n                  height = 1\r\n                }\r\n                if (container.current.scrollTop < 1) {\r\n                  container.current.scrollTop = 1\r\n                }\r\n                if (container.current.scrollTop === height) {\r\n                  container.current.scrollTop = height - 1\r\n                }\r\n                localStore.percent = (100 * container.current.scrollTop / height).toFixed(1)\r\n              }}\r\n            >\r\n              {loader.isEmpty ? emptyView : <div>{loader.item.content}</div>}\r\n            </div>\r\n            <div className=\"dd-common-alignside\" style={{ padding: '8px 0', color: 'grey' }}>\r\n              <div className=\"dd-common-alignside\">\r\n                <span style={{ marginRight: 10 }}>2/12</span>\r\n                <span>{localStore.percent}%</span>\r\n              </div>\r\n              <div className=\"dd-common-alignside\">\r\n                <span style={{ marginRight: 10 }}>03:54</span>\r\n                <MIconView type=\"FaBatteryHalf\" style={{ display: 'inline-block', marginRight: 10 }} />\r\n                <span>{loader.isEmpty ? 0 : loader.item.content.length}</span>\r\n              </div>\r\n            </div>\r\n          </Fragment>}\r\n        </div>\r\n        {/* 底部动态菜单 */}\r\n        <VisualBoxView visible={localStore.pop}>\r\n          <div style={{ position: 'absolute', left: 0, right: 0, bottom: 0, fontSize: 12, backgroundColor: '#eee', padding: '0 10px' }}>\r\n            <div className=\"full-width\" style={{ height: 40 }}>\r\n              <span className=\"full-width-fix\" style={{ opacity: loader.isEmpty || loader.item.preId === '' ? 0.5 : 1 }} onClick={() => {\r\n                if (!loader.isEmpty && loader.item.preId) {\r\n                  loader.refresh({ params: { bid: localStore.bid, id: loader.item.preId } })\r\n                }\r\n              }}>上一章</span>\r\n              <Progress percent={localStore.percent} position={'normal'} className=\"full-width-auto\" style={{ margin: '0 10px' }} />\r\n              <span className=\"full-width-fix\" style={{ opacity: loader.isEmpty || loader.item.nextId === '' ? 0.5 : 1 }} onClick={() => {\r\n                if (!loader.isEmpty && loader.item.nextId) {\r\n                  localStore.id = loader.item.nextId\r\n                  loader.refresh({ params: { id: localStore.id, bid: localStore.bid } })\r\n                  container.current.scrollTop = 1\r\n                  // let id = loader.item.nextId\r\n                  // loader.clear()\r\n                  // router.replaceView(`/root/book/${localStore.bid}/chapter/${id}`, null, { hideMenu: true })\r\n                }\r\n              }}>下一章</span>\r\n            </div>\r\n            <div className=\"full-width\" style={{ height: 50 }}>\r\n              <div className=\"full-width-fix dd-common-centerXY\" style={{ flexDirection: 'column' }}>\r\n                <MIconView type=\"FaListUl\" />目录\r\n              </div>\r\n              <div className=\"full-width-auto dd-common-centerXY\" style={{ flexDirection: 'column' }}>\r\n                <MIconView type=\"FaCog\" />设置\r\n              </div>\r\n              <div className=\"full-width-fix dd-common-centerXY\" style={{ flexDirection: 'column' }}>\r\n                <MIconView type=\"FaEllipsisH\" />其他\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </VisualBoxView>\r\n      </Fragment>\r\n    }}\r\n  </Observer>\r\n}","import React, { Fragment, useEffect } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport 'components/common.css'\r\n\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport BookListLoader from 'loader/BookListLoader'\r\nimport BookItem from 'business/ResourceItem/BookItem'\r\nimport GroupTreeLoader from 'loader/GroupTreeLoader'\r\nimport { RenderGroups } from 'group'\r\n\r\nexport default function () {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const loader = GroupTreeLoader.create()\r\n  const booksLoader = BookListLoader.create()\r\n  useEffect(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { group_id: 'D5698713D07045ADBBF5F0D5D09E53E4' } })\r\n    }\r\n    if (booksLoader.isEmpty) {\r\n      booksLoader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => <Fragment>\r\n      <Navi title=\"全部\" router={router} />\r\n      <div className=\"full-height-auto\" style={{ display: 'flex', flexDirection: 'column', flex: 1 }}>\r\n        <div style={{ height: '100%' }}>\r\n          <RenderGroups loader={loader} onQueryChange={query => {\r\n            booksLoader.refresh({ query })\r\n          }} />\r\n        </div>\r\n      </div>\r\n    </Fragment>}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport GroupTreeLoader from 'loader/GroupTreeLoader'\r\nimport { RenderGroups } from 'group'\r\n\r\nexport default function GroupTreePage() {\r\n  const loader = GroupTreeLoader.create()\r\n  const router = useRouterContext()\r\n  const store = useLocalStore(() => ({\r\n    title: router.getStateKey('title')\r\n  }))\r\n  const Navi = useNaviContext()\r\n  const params = router.params\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { group_id: params.group_id } })\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title={store.title} router={router} />\r\n      <RenderGroups loader={loader} />\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport GroupListLoader from 'loader/GroupListLoader'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport GroupItemView from 'business/GroupItemView'\r\n\r\nexport default function GroupTreePage() {\r\n  const loader = GroupListLoader.create()\r\n  const router = useRouterContext()\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <div style={{ flex: 1, height: '100%' }}>\r\n      <LoaderListView\r\n        loader={loader}\r\n        renderItem={(item, selectionId, index) => (\r\n          <GroupItemView item={item} selectionId={selectionId} router={router} />\r\n        )}\r\n      />\r\n    </div>\r\n  )}</Observer>\r\n}","import React from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport SongSheetLoader from 'loader/SongSheetLoader'\r\nimport SongListLoader from 'loader/SongListLoader'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport SongItemOnSheet from 'business/ResourceItem/SongItemOnSheet'\r\n\r\nexport default ({ self, children }) => {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const loader = SongSheetLoader.create()\r\n  const songListLoader = SongListLoader.create()\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n    if (songListLoader.isEmpty) {\r\n      songListLoader.refresh()\r\n    }\r\n  })\r\n  return <Observer>\r\n    {() => (\r\n      <div className=\"full-height\">\r\n        <Navi title=\"音乐\" router={router}>\r\n          <span onClick={e=>router.pushView('/root/music-songs') }>全部歌曲</span>\r\n        </Navi>\r\n        <div className=\"full-height-auto\">\r\n          <LoaderListView\r\n            loader={loader}\r\n            renderItem={(item, selectionId, index) => (\r\n              <SongItemOnSheet key={index} item={item} selectionId={selectionId} router={router} />\r\n            )}\r\n          />\r\n        </div>\r\n      </div>\r\n    )}\r\n  </Observer>\r\n\r\n}","import React, { Fragment } from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport { useStoreContext } from 'contexts/store'\r\n\r\nimport SongSheetSongLoader from 'loader/SongSheetSongLoader'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport SongItem from 'business/ResourceItem/SongItem'\r\nimport MIconView from 'components/MIconView'\r\nimport services from 'services'\r\n\r\nexport default function SongSheetPage() {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const gStore = useStoreContext()\r\n  const loader = SongSheetSongLoader.create()\r\n  const store = useLocalStore(() => ({\r\n    title: router.getStateKey('title')\r\n  }))\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh({ params: { id: router.params.id } })\r\n    }\r\n  })\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title={store.title} router={router} />\r\n      <MIconView style={{ justifyContent: 'start' }} type=\"FaPlay\" after={'播放全部'} onClick={() => {\r\n        gStore.music.setSheet(loader.items)\r\n        gStore.music.playMusic(loader.items.length ? loader.items[0].id : '')\r\n      }} />\r\n      <div className=\"full-height\">\r\n        <LoaderListView\r\n          loader={loader}\r\n          renderItem={(item, selectionId, index) => (\r\n            <SongItem mode={'delete'} order={index} item={item} loader={loader} router={router} remove={async (data) => {\r\n              await services.removeSheetSong({ params: { id: data.id, ssid: data.ssid } })\r\n              loader.remove(index)\r\n            }} />\r\n          )}\r\n        />\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React, { Fragment, useEffect } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { useNaviContext } from 'contexts/navi'\nimport { useRouterContext } from 'contexts/router'\nimport 'components/common.css'\n\nimport LoaderListView from 'components/LoaderListView'\nimport ImageListLoader from 'loader/ImageListLoader'\nimport ImageItem from 'business/ResourceItem/ImageItem'\nimport GroupTreeLoader from 'loader/GroupTreeLoader'\nimport { RenderGroups } from 'group'\n\nexport default function () {\n  const Navi = useNaviContext()\n  const router = useRouterContext()\n  const loader = GroupTreeLoader.create()\n  const imagesLoader = ImageListLoader.create()\n  useEffect(() => {\n    if (loader.isEmpty) {\n      loader.refresh({ params: { group_id: 'D5698713D07045ADBBF5F0D5D09E53E4' } })\n    }\n    if (imagesLoader.isEmpty) {\n      imagesLoader.refresh()\n    }\n  })\n  return <Observer>{\n    () => <Fragment>\n      <Navi title=\"全部\" router={router} />\n      <div className=\"full-height-auto\" style={{ display: 'flex', flexDirection: 'column', flex: 1 }}>\n        <div>\n          <RenderGroups loader={loader} onQueryChange={query => {\n            imagesLoader.refresh({ query })\n          }} />\n        </div>\n        <div style={{ flex: 1 }}>\n          <LoaderListView\n            loader={imagesLoader}\n            renderItem={(item, selectionId, index) => <ImageItem\n              item={item}\n              router={router}\n              selectionId={selectionId}\n            />}\n          />\n        </div>\n      </div>\n    </Fragment>}\n  </Observer>\n}","import React, { useEffect } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { ActivityIndicator, Card, WingBlank, Button } from 'antd-mobile'\r\nimport MIconView from 'components/MIconView'\r\nimport { useStoreContext } from 'contexts/store'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport SwitchView from 'components/SwitchView'\r\n\r\nexport default function () {\r\n  const store = useStoreContext()\r\n  const router = useRouterContext()\r\n  const userLoader = store.userLoader\r\n  useEffect(() => {\r\n    if (userLoader.isEmpty) {\r\n      // userLoader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <div className=\"full-height\" onTouchStart={e => e.preventDefault()} onTouchMove={e => e.preventDefault()}>\r\n        <div className=\"full-width\" style={{ padding: '0 20px' }}>\r\n          <div className=\"full-width-fix dd-common-centerXY\" style={{ width: 35, height: 35, margin: '10px 0' }}>\r\n            {/* TODO: 测试 */}\r\n            {/* <img src={userLoader.isEmpty ? '' : userLoader.item.avater} /> */}\r\n            {userLoader.isLoading ? <ActivityIndicator /> : <img src=\"/logo.jpg\" style={{ borderRadius: '50%' }} alt=\"\" />}\r\n          </div>\r\n          <div className=\"full-width-auto\" style={{ paddingLeft: 10 }}>\r\n            <SwitchView loading={!store.app.isLogin} holder={<Button type=\"ghost\" inline size=\"small\" onClick={() => { router.pushView('/auth/login', null, { hideMenu: true, showNavi: true }) }}>登录</Button>}>\r\n              {userLoader.isEmpty ? '---' : userLoader.item.name}\r\n            </SwitchView>\r\n          </div>\r\n          <div style={{ color: 'green' }}>\r\n            <MIconView type=\"FaQrcode\" />\r\n          </div>\r\n          {/* TODO: 个人信息页面 */}\r\n\r\n          <div className=\"full-width-fix\" onClick={() => router.pushView('/root/user-setting', null)}><MIconView type=\"FaAngleRight\" /></div>\r\n        </div>\r\n        <WingBlank>\r\n          <Card>\r\n            <div className=\"dd-common-alignside\" style={{ padding: '10px 50px' }}>\r\n              <div style={{ color: '#f97a90' }}>\r\n                <MIconView type=\"FaStar\" />收藏\r\n              </div>\r\n              <div>\r\n                <MIconView type=\"FaHistory\" style={{ color: '#14b2f7' }} />历史\r\n              </div>\r\n              <div>\r\n                <MIconView type=\"FaEllipsisV\" />其他\r\n              </div>\r\n            </div>\r\n            <div className=\"dd-common-alignside\" style={{ padding: '10px 50px' }}>\r\n              <div onClick={() => {\r\n                router.pushView('/root/secure', null, { title: '安全' })\r\n              }}>\r\n                <MIconView type=\"FaLock\" style={{ color: '#236f07' }} />安全\r\n              </div>\r\n              <div onClick={() => window.location.reload()}>\r\n                <MIconView type=\"FaSyncAlt\" />刷新\r\n              </div>\r\n              <div onClick={() => {\r\n                router.pushView('/root/category', null, { hideMenu: true })\r\n              }}>\r\n                <MIconView type=\"FaListAlt\" style={{ color: '#ff5b05' }} />分类\r\n          </div>\r\n            </div>\r\n            <div className=\"dd-common-alignside\" style={{ padding: '10px 50px' }}>\r\n              <div onClick={() => {\r\n                if (store.app.isLogin) {\r\n                  router.pushView('/root/gallery', null, { hideMenu: true })\r\n                } else {\r\n                  router.pushView('/auth/login', null, { hideMenu: true, showNavi: true })\r\n                }\r\n              }} style={{ color: 'red' }}>\r\n                <MIconView type=\"FaListAlt\" />图片\r\n          </div>\r\n            </div>\r\n          </Card>\r\n        </WingBlank>\r\n      </div>\r\n    }\r\n  }</Observer >\r\n}","import React, { Fragment } from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\n\r\nimport { useRouterContext } from 'contexts/router'\r\nimport BookItem from 'business/ResourceItem/BookItem'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport AutoCenterView from 'components/AutoCenterView'\r\nimport globalStore from 'global-state'\r\n\r\nimport { Button } from 'antd-mobile'\r\n\r\nexport default function () {\r\n  const router = useRouterContext()\r\n  const loader = globalStore.bookShelfLoader\r\n  const localStore = useLocalStore(() => ({\r\n    loading: false,\r\n\r\n  }))\r\n  useEffectOnce(() => {\r\n    if (loader.isEmpty) {\r\n      loader.refresh()\r\n    }\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <Fragment>\r\n        <LoaderListView\r\n          loader={loader}\r\n          renderEmpty={(\r\n            <AutoCenterView>\r\n              <Button type=\"primary\" inline onClick={() => { router.pushView('/auth/login', null, { hideMenu: true, showNavi: true }) }}>登录</Button>\r\n            </AutoCenterView>\r\n          )}\r\n          renderItem={(item, sectionId, index) => (\r\n            <BookItem\r\n              item={item}\r\n              router={router}\r\n              sectionId={sectionId}\r\n              toggleLoading={() => localStore.loading = !localStore.loading}\r\n            />\r\n          )}\r\n        />\r\n      </Fragment>\r\n    }\r\n  }</Observer>\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport { Switch } from 'antd-mobile'\r\nimport globalStore from 'global-state'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport { useNaviContext } from 'contexts/navi'\r\n\r\nexport default function SecurePage() {\r\n  const router = useRouterContext()\r\n  const Navi = useNaviContext()\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <Navi title=\"安全\" router={router} />\r\n      <div className=\"full-height\">\r\n        <div className=\"dd-common-alignside\" style={{ padding: '15px 20px', backgroundColor: 'white' }}>\r\n          密码锁\r\n        <Switch checked={globalStore.app.config.isLockerOpen} onChange={checked => globalStore.app.setLocker(checked)} />\r\n        </div>\r\n        <div className=\"dd-common-alignside\" style={{ padding: '15px 20px', backgroundColor: 'white' }}>\r\n          调试\r\n        <Switch checked={globalStore.app.showDebug} onChange={checked => globalStore.app.toggleDebug()} />\r\n        </div>\r\n        <div className=\"dd-common-alignside\" style={{ padding: '15px 20px', backgroundColor: 'white' }}>\r\n          语音\r\n        <Switch checked={globalStore.app.showSpeaker} onChange={checked => globalStore.app.toggleSpeaker()} />\r\n        </div>\r\n        <div className=\"dd-common-alignside\" style={{ padding: '15px 20px', backgroundColor: 'white' }}>\r\n          音乐\r\n        <Switch checked={globalStore.app.showMusic} onChange={checked => globalStore.app.toggleMusic()} />\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React, { useEffect } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { Button, } from 'antd-mobile'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport MIconView from 'components/MIconView'\r\nimport LoaderListView from 'components/LoaderListView'\r\nimport AutoCenterView from 'components/AutoCenterView'\r\nimport TodoListLoader from 'loader/TodoListLoader'\r\nimport TodoItemView from 'business/TodoItemView'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\nimport globalStore from 'global-state'\r\n\r\nexport default function SecurePage() {\r\n  const Navi = useNaviContext()\r\n  const router = useRouterContext()\r\n  const todoLoader = TodoListLoader.create()\r\n  const localStore = useLocalStore(() => ({\r\n    type: '1'\r\n  }))\r\n  useEffect(() => {\r\n    if (todoLoader.isEmpty) {\r\n      todoLoader.refresh({ query: { type: localStore.type } })\r\n    }\r\n  })\r\n\r\n  return <Observer>{() => (\r\n    <div className=\"full-height\">\r\n      <Navi title=\"TODO\" router={router}>\r\n        <VisualBoxView visible={globalStore.app.isLogin}>\r\n          <MIconView\r\n            type=\"FaPlus\"\r\n            style={{ display: 'inline-block' }}\r\n            onClick={() => {\r\n              router.pushView('/root/add-todo')\r\n            }}\r\n          />\r\n        </VisualBoxView>\r\n      </Navi>\r\n      <div className=\"full-height-auto\">\r\n        <LoaderListView\r\n          loader={todoLoader}\r\n          renderEmpty={(\r\n            <AutoCenterView>\r\n              <Button type=\"primary\" inline onClick={() => { router.pushView('/auth/login', null, { hideMenu: true, showNavi: true }) }}>登录</Button>\r\n            </AutoCenterView>\r\n          )}\r\n          renderItem={(item, selectionId, index) => (\r\n            <TodoItemView item={item} selectionId={selectionId} router={router} />\r\n          )}\r\n        />\r\n      </div>\r\n      <div className=\"full-height-fix\">\r\n        <VisualBoxView visible={globalStore.app.isLogin}>\r\n          <Button type=\"primary\" onClick={() => {\r\n            localStore.type = localStore.type === '1' ? '' : '1'\r\n            todoLoader.refresh({ query: { type: localStore.type } })\r\n          }}>{localStore.type === '' ? '隐藏已完成' : '显示已完成'}</Button>\r\n        </VisualBoxView>\r\n\r\n      </div>\r\n    </div>\r\n  )}</Observer>\r\n}","import React, { useEffect } from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\nimport MIconView from 'components/MIconView'\r\nimport { useStoreContext } from 'contexts/store'\r\nimport { useRouterContext } from 'contexts/router'\r\nimport { useNaviContext } from 'contexts/navi'\r\nimport { List, Button } from 'antd-mobile'\r\n\r\nexport default function () {\r\n  const store = useStoreContext()\r\n  const router = useRouterContext()\r\n  const Navi = useNaviContext()\r\n  useEffect(() => {\r\n\r\n  })\r\n  return <Observer>{\r\n    () => {\r\n      return <div className=\"full-height\">\r\n\r\n        <Navi title=\"设置\" router={router} />\r\n        <div>\r\n          <List renderHeader={() => '设置'}>\r\n            <List.Item>\r\n              <div className=\"dd-common-alignside\">\r\n                <span>账号设置</span>\r\n                <MIconView type=\"FaAngleRight\" />\r\n              </div>\r\n            </List.Item>\r\n          </List>\r\n          <div style={{ padding: 10 }}>\r\n            <Button type=\"primary\" onClick={() => { store.app.setAccessToken(''); router.pushView('/') }}>退出</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    }\r\n  }</Observer >\r\n}","import React, { useContext as useReactContext, useState } from 'react'\nimport * as path2reg from 'path-to-regexp'\nimport pages from '../../pages'\n\n// 上下文context.避免react多级一直传props\nconst Context = React.createContext(null)\nconst rules = pages.map(page => {\n  let url = page.pathname\n  let res = { reg: path2reg(url), params: [] }\n  path2reg.parse(url).forEach(it => {\n    if (typeof it === 'object') {\n      res.params.push(it.name)\n    }\n  })\n  return res\n})\n/**\n * 使用:\n * 创建上下文\n * import useProvider from this\n * const [router, routerContext]=useProvider(history,location);\n * <routerContext.Provider value={router}>\n *   ...\n * </routerContext.Provider>\n * 使用上下文\n * import {useRouterContext} from this\n * let router = useRouterContext();\n * router.goto(...);\n */\nexport function useProvider(history) {\n  let [state] = useState(() => {\n    let route = {\n      history,\n      get params() {\n        let res = {}\n        for (let i = 0; i < rules.length; i++) {\n          let rule = rules[i]\n          let m = rule.reg.exec(history.location.pathname)\n          if (m) {\n            rule.params.forEach((name, index) => {\n              res[name] = m[index + 1]\n            })\n            break\n          }\n        }\n        return res\n      },\n      get hideMenu() {\n        return history.location.state && history.location.state.hideMenu ? true : false\n      },\n      getStateKey(key) {\n        return history.location.state && history.location.state[key]\n      },\n      back() {\n        const { userClick, login } = history.location.state || { userClick: true }\n        if (login) {\n          // 登录跳转进来的页面\n          route.backToRoot()\n        } else if (userClick) {\n          // 正常操作进入\n          route.history.goBack()\n        } else {\n          // 可能是直接通过URL进来的\n          route.backToRoot()\n        }\n      },\n      backToRoot(params, state) {\n        const { pathname, search } = getBackToRootLocation(params)\n        history.push({\n          pathname,\n          search,\n          state: {\n            login: true,\n            userClick: true,\n            ...state\n          }\n        })\n      },\n      gotoLoginTarget() {\n        // target 存于全局store中\n        // 因为某种原因被强制跳到login,登录后返回原来的位置\n        // getStore => 如果有则跳转,否则到首页\n        // TODO:\n      },\n      pushView(pathname, params = {}, state) {\n        state = state || {}\n        state.userClick = true\n        state.hideMenu = state.hideMenu === false ? false : true\n        let search = ''\n        for (let k in params) {\n          search += `${k}=${params[k]}`\n        }\n        history.push({\n          pathname,\n          search,\n          state\n        })\n      },\n      replaceView(pathname, params = {}, state) {\n        state = state || {}\n        state.userClick = true\n        let search = ''\n        for (let k in params) {\n          search += `${k}=${params[k]}`\n        }\n        history.replace({\n          pathname,\n          search,\n          state\n        })\n      }\n    }\n    return route\n  })\n  return [state, Context]\n}\n\nexport function useRouterContext() {\n  return useReactContext(Context)\n}\n\nfunction getBackToRootLocation() {\n\n}\n","import React, { Fragment, useRef } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\n\r\nexport default function Dragger({ children, cb, ...props }) {\r\n  const dragger = useRef(null)\r\n  const store = useLocalStore(() => ({\r\n    started: false,\r\n    top: 0,\r\n    left: 0,\r\n    offsetLeft: 0,\r\n    offsetTop: 0,\r\n    // mode ...\r\n  }))\r\n  return <Observer>{() => (\r\n    <Fragment>\r\n      <div ref={node => {\r\n        if (node) {\r\n          dragger.current = node\r\n          node.addEventListener('touchstart', e => {\r\n            store.started = TextTrackCue\r\n            e = e.touches[0]\r\n            store.left = e.clientX - node.offsetLeft\r\n            store.top = e.clientY - node.offsetTop\r\n            if (store.left < 0) {\r\n              store.left = 0\r\n            }\r\n            if (store.top < 0) {\r\n              store.top = 0\r\n            }\r\n            store.offsetLeft = 0\r\n            store.offsetTop = 0\r\n          })\r\n          node.addEventListener('touchmove', e => {\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n            e = e.touches[0]\r\n            if (store.started) {\r\n              store.offsetLeft = e.clientX - store.left\r\n              store.offsetTop = e.clientY - store.top\r\n            }\r\n            // 控制可拖动范围\r\n            if (cb) {\r\n              cb(store)\r\n            }\r\n          })\r\n          node.addEventListener('touchend', e => {\r\n            store.started = false\r\n          })\r\n        }\r\n      }}>\r\n        {children}\r\n      </div>\r\n    </Fragment>\r\n  )}</Observer>\r\n}","import React, { useContext, useRef } from 'react'\r\nimport store from '../../global-state'\r\nimport storage from 'utils/storage'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport { Popover } from 'antd-mobile'\r\nimport events from 'utils/events'\r\nimport MIconView from 'components/MIconView'\r\nimport VisibleBoxView from 'components/VisualBoxView'\r\nimport Dragger from 'components/Dragger'\r\n\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nfunction MusicPlayer() {\r\n  const player = useRef(null)\r\n  const music = store.music\r\n  const MODE = music.type\r\n  const EVENT = music.event\r\n  const pos = storage.getValue('music')\r\n  const musicStore = useLocalStore(() => ({\r\n    url: '',\r\n    showModePop: false,\r\n    top: pos ? pos.top : 210,\r\n    left: pos ? pos.left : 100,\r\n  }))\r\n  let timer = null\r\n  events.on(EVENT.PLAY, (id) => {\r\n    if (id === '') {\r\n      return\r\n    }\r\n    musicStore.url = store.app.baseURL + music.getUrlById(id)\r\n    setTimeout(() => {\r\n      // TODO: 请求中间态处理 不停重试,除非遇到错误\r\n      if (player.current) {\r\n        player.current.play()\r\n      }\r\n    }, 100)\r\n  })\r\n  events.on(EVENT.PAUSE, () => {\r\n    player.current.pause()\r\n  })\r\n  return <Observer>\r\n    {() => (\r\n      <div style={{\r\n        position: 'fixed',\r\n        zIndex: 10,\r\n        top: store.app.showMusic ? musicStore.top : -100,\r\n        left: store.app.showMusic ? musicStore.left : -100,\r\n      }} className=\"full-width\">\r\n        <Dragger cb={sstore => {\r\n          musicStore.left = Math.max(0, sstore.left + sstore.offsetLeft)\r\n          musicStore.top = Math.max(0, sstore.top + sstore.offsetTop)\r\n          clearTimeout(timer)\r\n          timer = null\r\n          timer = setTimeout(() => {\r\n            storage.setValue('music', { left: musicStore.left, top: musicStore.top })\r\n          }, 100)\r\n        }}>\r\n          <MIconView type=\"FaArrowsAlt\" />\r\n        </Dragger>\r\n        <Popover mask\r\n          placement={'topLeft'}\r\n          visible={musicStore.showModePop}\r\n          overlay={[\r\n            (<Popover.Item key={MODE.ONE} value={MODE.ONE}><MIconView type=\"MdRepeatOne\" />单曲</Popover.Item>),\r\n            (<Popover.Item key={MODE.RANDOM} value={MODE.RANDOM}><MIconView type=\"MdShuffle\" />随机</Popover.Item>),\r\n            (<Popover.Item key={MODE.LIST} value={MODE.LIST}><MIconView type=\"MdTrendingFlat\" />列表</Popover.Item>),\r\n            (<Popover.Item key={MODE.CIRCLE} value={MODE.CIRCLE}><MIconView type=\"MdRepeat\" />循环</Popover.Item>),\r\n          ]}\r\n          onVisibleChange={visible => {\r\n            musicStore.showModePop = visible\r\n          }}\r\n          onSelect={opt => {\r\n            music.setMode(opt.props.value)\r\n            musicStore.showModePop = false\r\n          }}\r\n        >\r\n          <span>\r\n            <VisibleBoxView visible={music.mode === MODE.RANDOM}>\r\n              <MIconView type=\"MdShuffle\" />\r\n            </VisibleBoxView>\r\n            <VisibleBoxView visible={music.mode === MODE.ONE}>\r\n              <MIconView type=\"MdRepeatOne\" />\r\n            </VisibleBoxView>\r\n            <VisibleBoxView visible={music.mode === MODE.LIST}>\r\n              <MIconView type=\"MdTrendingFlat\" />\r\n            </VisibleBoxView>\r\n            <VisibleBoxView visible={music.mode === MODE.CIRCLE}>\r\n              <MIconView type=\"MdRepeat\" />\r\n            </VisibleBoxView>\r\n          </span>\r\n        </Popover>\r\n        <MIconView type=\"MdSkipNext\" onClick={() => {\r\n          if (music.mode === MODE.RANDOM) {\r\n            music.playRandom()\r\n          } else {\r\n            music.playNext()\r\n          }\r\n        }} />\r\n        <audio ref={value => { player.current = value }}\r\n          onCanPlay={() => {\r\n          }}\r\n          onLoadedMetadata={() => {\r\n          }\r\n          }\r\n          onLoadedData={() => {\r\n          }}\r\n          onProgress={() => {\r\n          }}\r\n          onEnded={() => {\r\n            if (music.mode === MODE.ONE) {\r\n              player.current.play()\r\n            }\r\n            if (music.mode === MODE.RANDOM) {\r\n              music.playRandom()\r\n            }\r\n            if (music.mode === MODE.LIST) {\r\n              music.playNext()\r\n            }\r\n            if (music.mode === MODE.CIRCLE) {\r\n              music.playNext()\r\n            }\r\n          }}\r\n          src={musicStore.url} controls=\"controls\" preload=\"true\"></audio>\r\n      </div>\r\n    )}\r\n  </Observer>\r\n}\r\n\r\nexport function createMusicPlayerProvider() {\r\n  return [MusicPlayer, Context]\r\n}\r\n\r\nexport function useMusicPlayerContext() {\r\n  return useContext(Context)\r\n}","import React, { useContext as useReactContext } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport store from '../../global-state'\r\nimport storage from 'utils/storage'\r\nimport MIconView from 'components/MIconView'\r\nimport Dragger from 'components/Dragger'\r\nimport VisualBoxView from 'components/VisualBoxView'\r\n// 上下文context.避免react多级一直传props\r\nconst Context = React.createContext(null)\r\n\r\nfunction Debug(prop) {\r\n  const debug = store.debug\r\n  const pos = storage.getValue('debug')\r\n  const debugStore = useLocalStore(() => ({\r\n    top: pos ? pos.top : 300,\r\n    left: pos ? pos.left : 0,\r\n  }))\r\n  let timer = null\r\n  return <Observer>{() => (\r\n    <VisualBoxView visible={store.app.showDebug}>\r\n      <div className=\"full-height\" style={{\r\n        position: 'fixed',\r\n        color: 'white',\r\n        zIndex: 10,\r\n        width: 300,\r\n        height: 150,\r\n        top: debugStore.top,\r\n        left: debugStore.left,\r\n        padding: 10,\r\n        backgroundColor: 'black',\r\n        opacity: 0.5\r\n      }}>\r\n        <div className=\"dd-common-alignside\">\r\n          <Dragger cb={sstore => {\r\n            debugStore.left = Math.max(0, sstore.left + sstore.offsetLeft)\r\n            debugStore.top = Math.max(0, sstore.top + sstore.offsetTop)\r\n            clearTimeout(timer)\r\n            timer = null\r\n            timer = setTimeout(() => {\r\n              storage.setValue('debug', { left: debugStore.left, top: debugStore.top })\r\n            }, 100)\r\n          }}>\r\n            <MIconView type=\"FaArrowsAlt\" />\r\n          </Dragger>\r\n          <MIconView type={debug.showMap ? 'FaCaretDown' : 'FaCaretRight'} onClick={() => {\r\n            debug.toggleMap()\r\n          }} />\r\n          <div className=\"dd-common-alignside\">\r\n            <MIconView type=\"FaRegTrashAlt\" onClick={() => { debug.clear() }} />\r\n            <MIconView type=\"FaSyncAlt\" onClick={() => { window.location.reload() }} />\r\n          </div>\r\n        </div>\r\n        <VisualBoxView visible={debug.showMap}>\r\n          <div className=\"full-height-auto\">\r\n            {debug.maps.map((item, index) => (<p key={index}>{item.key}:{item.value}</p>))}\r\n          </div>\r\n        </VisualBoxView>\r\n        <div className=\"full-height-auto\">\r\n          {debug.messages.map((message, index) => <p key={index}>{message}</p>)}\r\n        </div>\r\n      </div>\r\n    </VisualBoxView>\r\n\r\n  )}</Observer>\r\n}\r\n\r\nexport function createDebugProvider() {\r\n  return [Debug, Context]\r\n}\r\n\r\nexport function useDebugContext() {\r\n  return useReactContext(Context)\r\n}","import React, { useContext, useRef } from 'react'\nimport store from '../../global-state'\nimport { Observer, useLocalStore } from 'mobx-react-lite'\nimport MIconView from 'components/MIconView'\nimport Dragger from 'components/Dragger'\nimport { Slider } from 'antd-mobile'\nimport VisualBoxView from 'components/VisualBoxView'\n\n// 上下文context.避免react多级一直传props\nconst Context = React.createContext(null)\n\nfunction Speaker() {\n  const synth = window.speechSynthesis\n  const voices = synth.getVoices()\n  let voice = null\n  voices.forEach(v => {\n    if (v.lang === 'zh-CN') {\n      voice = v\n    }\n  })\n  const speakerStore = store.speaker\n  const localStore = useLocalStore(() => ({\n    left: speakerStore.left,\n    top: speakerStore.top,\n    rate: speakerStore.rate,\n    pitch: speakerStore.pitch,\n  }))\n  let timer\n  return <Observer>\n    {() => (\n      <VisualBoxView visible={store.app.showSpeaker}>\n        <div style={{\n          position: 'fixed',\n          zIndex: 10,\n          top: localStore.top,\n          left: localStore.left,\n          minWidth: 300,\n        }} className=\"full-width\">\n          <Dragger cb={sstore => {\n            localStore.left = Math.max(0, sstore.left + sstore.offsetLeft)\n            localStore.top = Math.max(0, sstore.top + sstore.offsetTop)\n            clearTimeout(timer)\n            timer = null\n            timer = setTimeout(() => {\n              speakerStore.store(localStore)\n            }, 100)\n          }}>\n            <MIconView type=\"FaArrowsAlt\" />\n          </Dragger>\n          <div onClick={e => {\n            const utter = new SpeechSynthesisUtterance('测试')\n            utter.onend = function () {\n              console.log('speak end')\n            }\n            utter.onerror = function () {\n              console.log('speak error')\n            }\n            utter.voice = voice\n            utter.pitch = localStore.pitch\n            utter.rate = localStore.rate\n            if (synth.speaking) {\n              console.log('is speaking')\n              return\n            }\n            synth.speak(utter)\n          }}>测试</div>\n          <div className=\"full-width-auto\">\n            <div className=\"full-width\" style={{ marginBottom: 10 }}>\n              <span>速度</span>\n              <div className=\"full-width-auto\">\n                <Slider min={0.5} max={2} step={0.1} value={localStore.rate} onChange={value => { localStore.rate = value; speakerStore.store(localStore) }} />\n              </div>\n            </div>\n            <div className=\"full-width\">\n              <span>声调</span>\n              <div className=\"full-width-auto\">\n                <Slider min={0} max={2} step={0.1} value={localStore.pitch} onChange={value => { localStore.pitch = value; speakerStore.store(localStore) }} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </VisualBoxView>\n    )}\n  </Observer>\n}\n\nexport function createSpeakerProvider() {\n  return [Speaker, Context]\n}\n\nexport function useSpeakerContext() {\n  return useContext(Context)\n}","import React from 'react'\r\nimport { Observer } from 'mobx-react-lite'\r\n\r\nimport './index.css'\r\n\r\nexport default function (props) {\r\n    const keys = [\r\n        { char: '1', name: '', className: '', },\r\n        { char: '2', name: '', className: 'center', },\r\n        { char: '3', name: '', className: '', },\r\n        { char: '4', name: '', className: '', },\r\n        { char: '5', name: '', className: 'center', },\r\n        { char: '6', name: '', className: '', },\r\n        { char: '7', name: '', className: '', },\r\n        { char: '8', name: '', className: 'center', },\r\n        { char: '9', name: '', className: '', },\r\n        { char: '', name: '清空', className: '', },\r\n        { char: '0', name: '', className: 'center', },\r\n        { char: 'x', name: '删除', className: '', },\r\n    ]\r\n    return <Observer>\r\n        {() => {\r\n            return <div style={{ width: '100%', position: 'relative', paddingTop: '100%', marginBottom: '35%' }}>\r\n                <div className=\"box\" style={{ position: 'absolute', left: 0, right: 0, top: 0, bottom: 0 }}>\r\n                    {\r\n                        keys.map((it, index) => <div key={index} className={['cell', it.className].join(' ')} onClick={()=>props.handler(it.char)}>{it.name || it.char}</div>)\r\n                    }\r\n                </div>\r\n            </div>\r\n        }}\r\n    </Observer>\r\n\r\n}","import React, { Fragment } from 'react'\r\nimport { Observer, useLocalStore } from 'mobx-react-lite'\r\nimport globalStore from 'global-state'\r\nimport MIconView from '../MIconView'\r\nimport Sudoku from '../SudokuView'\r\n\r\nimport './index.css'\r\n\r\nexport default function Locker() {\r\n  const store = useLocalStore(() => ({\r\n    pin: [],\r\n    animate: '',\r\n  }))\r\n  function handler(key) {\r\n    if (key === 'x') {\r\n      store.pin.pop()\r\n    } else if (key === '') {\r\n      store.pin = []\r\n    } else {\r\n      store.pin.push(key)\r\n      if (store.pin.length >= globalStore.app.config.lockerLength) {\r\n        if (store.pin.join('') === globalStore.app.config.lockerPin) {\r\n          store.animate = 'success'\r\n          setTimeout(() => {\r\n            globalStore.app.setLocked(false)\r\n          }, 1000)\r\n        } else {\r\n          store.animate = 'fail'\r\n          setTimeout(() => {\r\n            store.animate = ''\r\n            store.pin = []\r\n          }, 1000)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return <Observer>\r\n    {() => {\r\n      return <Fragment>\r\n        <div style={{ display: 'flex', flexDirection: 'column', height: '100%', justifyContent: 'center', alignItems: 'center', textAlign: 'center' }}>\r\n          <div style={{ flex: '0 0 0%', width: '100%', }}>\r\n            <MIconView type=\"FaLock\" style={{ width: '100%', margin: '40px 0 40px 0', color: 'green' }} />\r\n            <p>请输入锁定码</p>\r\n            <div className={store.animate} style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center', width: '80%', margin: 'auto' }}>\r\n              {\r\n                globalStore.app.config.lockerPin.split('').map((it, index) => {\r\n                  if (index >= store.pin.length) {\r\n                    return <MIconView style={{ margin: '0 8px' }} key={index} type=\"FaRegCircle\" />\r\n                  } else {\r\n                    return <MIconView style={{ margin: '0 8px' }} key={index} type=\"FaCircle\" />\r\n                  }\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n          <div style={{ flex: 1, width: '70%', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\r\n            <Sudoku handler={handler} />\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    }}\r\n  </Observer>\r\n}","import React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { TabBar } from 'antd-mobile'\nimport { useRouterContext } from 'contexts/router'\nimport MIconView from 'components/MIconView'\n\nimport config from 'config'\nimport store from 'global-state'\n\nexport default function ({ children }) {\n  let router = useRouterContext()\n  return <Observer>\n    {() => {\n      if (router.hideMenu || !router.history.location.pathname.startsWith('/root')) {\n        return children\n      } else {\n        return <Fragment>\n          <TabBar\n            tintColor=\"#33A3F4\"\n            unselectedTintColor=\"#555\"\n            tabBarPosition=\"bottom\"\n            barTintColor=\"white\"\n          >\n            {config.menus.map(menu => {\n              return <TabBar.Item\n                title={menu.big ? '' : menu.title}\n                key={menu.name}\n                icon={<MIconView style={menu.big ? { marginTop: -20, zIndex: 2, fontSize: '3rem' } : { margin: 3 }} type={menu.icon} />}\n                selectedIcon={<MIconView style={{ margin: 3 }} type={menu.icon} />}\n                selected={menu.name === store.app.selectedMenu}\n                onPress={() => {\n                  store.app.setMenu(menu.name)\n                  router.pushView(menu.path, null, { title: menu.title, hideMenu: menu.hideMenu ? true : false })\n                }}\n              >\n                {children}\n              </TabBar.Item>\n            })}\n          </TabBar>\n        </Fragment>\n      }\n    }}\n  </Observer>\n}","import { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom'\nimport React, { Fragment } from 'react'\nimport { Observer } from 'mobx-react-lite'\nimport { useStoreContext } from 'contexts/store'\nimport { useProvider } from 'contexts/router'\nimport { createNaviProvider } from 'contexts/navi'\nimport { createMusicPlayerProvider } from 'contexts/music'\nimport { createDebugProvider } from 'contexts/debug'\nimport { createSpeakerProvider } from 'contexts/speaker'\nimport Locker from 'components/LockerView'\nimport Layout from './layout'\n\nimport pages from 'pages'\n\n// 路由=>组件.没登录跳到登录.登录了匹配root.匹配失败就重定向route.\n\nfunction App(props) {\n  const store = useStoreContext()\n  const [router, RouterContext] = useProvider(props.history)\n  const [navi, NaviContext] = createNaviProvider()\n  const [MusicPlayer] = createMusicPlayerProvider()\n  const [Debug] = createDebugProvider()\n  const [Speaker] = createSpeakerProvider()\n  // 默认是home\n  const name = props.location.pathname.split('/').pop()\n  if (store.app.selectedMenu !== name) {\n    store.app.setMenu(name)\n  }\n  return <RouterContext.Provider value={router}>\n    <NaviContext.Provider value={navi}>\n      <Observer>{\n        () => {\n          // FIXME: 不再强制登录了\n          // if (!store.app.isLogin && props.location.pathname.startsWith('/root')) {\n          //   return <Redirect to={'/auth/login'}></Redirect>\n          // } else if (store.app.isLogin) {\n          //   if (store.app.config.isLockerOpen && store.app.config.isLockerLocked) {\n          //     return <Locker />\n          //   }\n          // }\n          if (store.app.config.isLockerOpen && store.app.config.isLockerLocked) {\n            return <Locker />\n          }\n          return <Fragment>\n            <MusicPlayer />\n            <Debug />\n            <Speaker />\n            <Layout>\n              <Switch>\n                {/* <Route path={'/root/*'} component={AppRoot}></Route> */}\n                {pages.map(page => <Route key={page.pathname} path={page.pathname} component={page.component}></Route>)}\n                <Route component={NoMatch}></Route>\n              </Switch>\n            </Layout>\n          </Fragment>\n        }\n      }</Observer>\n    </NaviContext.Provider>\n  </RouterContext.Provider>\n}\n\nfunction NoMatch() {\n  return <Redirect to={'/root/home'}></Redirect>\n  // FIXME: 不再强制登录了\n  // const store = useStoreContext()\n  // if (store.app.isLogin) {\n  //   return <Redirect to={'/root/home'}></Redirect>\n  // } else {\n  //   return <Redirect to={'/auth/login'}></Redirect>\n  // }\n}\n\nexport default function Index() {\n  return <BrowserRouter basename={'/'}>\n    <Route path={'/*'} component={App}></Route>\n  </BrowserRouter>\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n      // [::1] is the IPv6 localhost address.\r\n      window.location.hostname === '[::1]' ||\r\n      // 127.0.0.1/8 is considered localhost for IPv4.\r\n      window.location.hostname.match(\r\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n      )\r\n  )\r\n  \r\n  export function register(config) {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n      // The URL constructor is available in all browsers that support SW.\r\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\r\n      if (publicUrl.origin !== window.location.origin) {\r\n        // Our service worker won't work if PUBLIC_URL is on a different origin\r\n        // from what our page is served on. This might happen if a CDN is used to\r\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n        return\r\n      }\r\n  \r\n      window.addEventListener('load', () => {\r\n        const swUrl = `${process.env.PUBLIC_URL}/custom-sw.js`\r\n  \r\n        if (isLocalhost) {\r\n          // This is running on localhost. Let's check if a service worker still exists or not.\r\n          checkValidServiceWorker(swUrl, config)\r\n  \r\n          // Add some additional logging to localhost, pointing developers to the\r\n          // service worker/PWA documentation.\r\n          navigator.serviceWorker.ready.then(() => {\r\n            console.log(\r\n              'This web app is being served cache-first by a service ' +\r\n                'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n            )\r\n          })\r\n        } else {\r\n          // Is not localhost. Just register service worker\r\n          registerValidSW(swUrl, config)\r\n        }\r\n      })\r\n    }\r\n  }\r\n  \r\n  function registerValidSW(swUrl, config) {\r\n    navigator.serviceWorker\r\n      .register(swUrl)\r\n      .then(registration => {\r\n        registration.onupdatefound = () => {\r\n          const installingWorker = registration.installing\r\n          if (installingWorker == null) {\r\n            return\r\n          }\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the updated precached content has been fetched,\r\n                // but the previous service worker will still serve the older\r\n                // content until all client tabs are closed.\r\n                console.log(\r\n                  'New content is available and will be used when all ' +\r\n                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n                )\r\n  \r\n                // Execute callback\r\n                if (config && config.onUpdate) {\r\n                  config.onUpdate(registration)\r\n                }\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // \"Content is cached for offline use.\" message.\r\n                console.log('Content is cached for offline use.')\r\n  \r\n                // Execute callback\r\n                if (config && config.onSuccess) {\r\n                  config.onSuccess(registration)\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error during service worker registration:', error)\r\n      })\r\n  }\r\n  \r\n  function checkValidServiceWorker(swUrl, config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n      .then(response => {\r\n        // Ensure service worker exists, and that we really are getting a JS file.\r\n        const contentType = response.headers.get('content-type')\r\n        if (\r\n          response.status === 404 ||\r\n          (contentType != null && contentType.indexOf('javascript') === -1)\r\n        ) {\r\n          // No service worker found. Probably a different app. Reload the page.\r\n          navigator.serviceWorker.ready.then(registration => {\r\n            registration.unregister().then(() => {\r\n              window.location.reload()\r\n            })\r\n          })\r\n        } else {\r\n          // Service worker found. Proceed as normal.\r\n          registerValidSW(swUrl, config)\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.log(\r\n          'No internet connection found. App is running in offline mode.'\r\n        )\r\n      })\r\n  }\r\n  \r\n  export function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n      navigator.serviceWorker.ready.then(registration => {\r\n        registration.unregister()\r\n      })\r\n    }\r\n  }","// import App from './app';\nimport React, { Fragment, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport { ActivityIndicator } from 'antd-mobile'\nimport RouterRoot from './router'\nimport globalStore from './global-state'\nimport { isDeskTop } from './utils/utils'\nimport { Observer } from 'mobx-react-lite'\nimport { useProvider } from 'contexts/store'\nimport './components/common.css'\nimport 'antd-mobile/dist/antd-mobile.css'\n// https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/src/serviceWorker.js\nimport * as serviceWorker from './service-worker'\n\n// 引入router.顺便做点什么: loading/emptyView什么的\nfunction App() {\n  const [store, StoreContext] = useProvider(globalStore)\n  useEffect(() => {\n    if (store.lineLoader.isEmpty) {\n      store.lineLoader.refresh()\n    }\n  })\n  return <Observer>\n    {() => {\n      if (store.lineLoader.isEmpty) {\n        return <div className=\"dd-common-centerXY\">选择线路中...</div>\n      } else {\n        return (\n          <Fragment>\n            <StoreContext.Provider value={store}>\n              <RouterRoot></RouterRoot>\n            </StoreContext.Provider>\n          </Fragment>\n        )\n      }\n    }\n    }\n  </Observer>\n}\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      error: null,\n      info: null,\n      isLoading: false,\n      lastTS: Date.now(),\n      isDesktop: isDeskTop()\n    }\n  }\n\n  componentDidCatch(error, info) {\n    this.setState({ hasError: true, error, info })\n  }\n\n  componentDidMount() {\n    document.getElementById('start-loading').style.display = 'none'\n    document.getElementById('box').className = isDeskTop(false) ? 'box-app' : 'box-browser'\n    window.addEventListener('resize', () => {\n      let isApp = isDeskTop(false)\n      document.getElementById('box').className = isApp ? 'box-app' : 'box-browser'\n      this.setState({ isDeskTop: isApp })\n    })\n    document.addEventListener('visibilitychange', async (e) => {\n      // TODO: 时间过长处理.刷新\n      if (document.hidden) {\n        globalStore.app.resetLeaveTS()\n      } else if (globalStore.app.config.isLockerLocked === false) {\n        globalStore.app.setLocked(Date.now() - globalStore.app.leaveTS > globalStore.app.config.lockerSeconds)\n      }\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <Fragment>\n        <div>程序崩溃了,<div onClick={() => {\n          this.setState({ isLoading: true }, async () => {\n            // TODO: 防封处理 const result = await checkHost();\n            this.setState({ isLoading: false })\n            this.setState({ hasError: false }, () => {\n              window.location.reload()\n            })\n          })\n        }}>点我重试</div></div>\n        <ActivityIndicator\n          toast\n          text=\"正在刷新...\"\n          animating={this.state.isLoading}\n        />\n      </Fragment>\n    } else if (this.state.isDesktop) {\n      return <Fragment>\n        {this.props.children}\n        <ActivityIndicator\n          toast\n          text=\"正在刷新...\"\n          animating={this.state.isLoading}\n        />\n      </Fragment>\n    } else {\n      return <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>程序正在开发中...</div>\n    }\n  }\n}\n\n// 总入口: 将组件挂载到dom上\nReactDOM.render(<ErrorBoundary>\n  <App />\n</ErrorBoundary>, document.getElementById('root'))\n\n// serviceWorker.unregister();\nserviceWorker.register()"],"sourceRoot":""}