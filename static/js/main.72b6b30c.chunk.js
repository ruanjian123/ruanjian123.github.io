(window.webpackJsonpdemo=window.webpackJsonpdemo||[]).push([[0],{106:function(e,t,n){},127:function(e,t,n){e.exports=n(232)},17:function(e,t){e.exports={setValue:function(e,t){var n="string";switch(typeof t){case"number":n="number";break;case"date":n="date",t=t.getTime();break;case"object":n="json"}window.localStorage.setItem(e,JSON.stringify({type:n,value:t}))},getValue:function(e){var t=window.localStorage.getItem(e),n=null;if(null!==t&&/^\{.*\}$/.test(t))try{var a=JSON.parse(t);n="date"===a.type?new Date(a.value):a.value}catch(r){this.removeKey(e)}else this.removeKey(e);return n},removeKey:function(e){window.localStorage.removeItem(e)}}},20:function(e,t,n){},206:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n.n(a),o=n(14),c=n(108),i=n(109),l=n(125),s=n(110),u=n(126),m=n(25),d=n(1),p=n.n(d),f=n(16),h=n.n(f),g=n(13),v=n(37),y=n(124),E=n(12),b=p.a.createContext(null);function w(){return Object(d.useContext)(b)}var k=n(30),x=n(82),O=n(19),N=n(118),j=n(116),C=n(117);n(206);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.type,n=e.className,a=void 0===n?"":n,r=e.inline,o=void 0!==r&&r,c=e.size,i=void 0===c?"sm":c,l=e.style,s=void 0===l?{}:l,u=e.after,m=void 0===u?"":u,d=e.before,f=void 0===d?"":d,h=Object(O.a)(e,["type","className","inline","size","style","after","before"]),g=t.startsWith("Fa")?j[t]:t.startsWith("Md")?C[t]:N[t];return p.a.createElement("div",Object.assign({style:S({display:o?"inline-block":"flex",fontSize:"md"===i?"1.5rem":"bg"===i?"2rem":"1.1rem",alignItems:"center",justifyContent:"center"},s),className:"".concat(a)},h),f,p.a.createElement(g,{style:{margin:"0 4px"}}),m)},F=p.a.createContext(null);function M(e){return p.a.createElement("div",{className:"dd-common-alignside",style:{height:45,padding:"0 15px",backgroundColor:"white",borderBottom:"1px solid #eee"}},p.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row"},onClick:function(){e.router.back()}},p.a.createElement("div",{style:{display:!1===e.showBack?"none":"flex"}},p.a.createElement(T,{type:"FaChevronLeft"})),p.a.createElement("div",null,e.left)),p.a.createElement("div",{style:{flex:1,textAlign:"center",fontSize:16,fontWeight:"600"}},e.title),p.a.createElement("div",{style:{flex:1,textAlign:"right"}},e.children))}function I(){return Object(d.useContext)(F)}n(20);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={bigCate:{margin:"10px 0",padding:"0 20px",borderLeftWidth:2,borderLeftStyle:"solid",borderLeftColor:"transparent"},choosed:{borderLeftColor:"red"},subCate:{width:"50%",float:"left",padding:"10px",boxSizing:"border-box"}};function R(e){var t=e.cates;e.router;return t?t.children.map((function(e){return p.a.createElement("div",{key:e.id,className:"full-width",style:P.subCate},p.a.createElement("img",{src:e.poster,alt:"",style:{width:60,height:70,backgroundColor:"#bbb"}}),p.a.createElement("div",{className:"dd-common-centerXY",style:{flexDirection:"column",alignItems:"start",paddingLeft:10}},p.a.createElement("div",{style:{fontSize:"1.2em",color:"black",fontWeight:"bold",paddingBottom:5}},e.name),p.a.createElement("div",null,e.count,"\u90e8")))})):null}var B=function(e){var t=e.children;return p.a.createElement("div",{className:"dd-common-centerXY"},t)},V=function(e){var t=e.visible,n=e.children;return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,t&&n)}))},z=n(119),q=n.n(z),_=n(2),Y=n(17),U=n.n(Y),W=_.c.model({selectedMenu:_.c.optional(_.c.string,"book-shelf"),fullScreen:_.c.optional(_.c.boolean,!1),accessTokenName:_.c.optional(_.c.string,"access-token"),refreshTokenName:_.c.optional(_.c.string,"refresh-token"),lockerName:_.c.optional(_.c.string,"locker"),baseURL:_.c.optional(_.c.string,"/"),account:_.c.optional(_.c.string,""),accessToken:_.c.optional(_.c.string,""),refreshToken:_.c.optional(_.c.string,""),musicModeName:_.c.optional(_.c.string,"music-mode"),showMusic:!1,showDebug:_.c.optional(_.c.boolean,!1),leaveTS:_.c.optional(_.c.number,Date.now()-360),showSpeaker:_.c.optional(_.c.boolean,!1),config:_.c.model({isLockerOpen:_.c.optional(_.c.boolean,!0),isLockerLocked:_.c.optional(_.c.boolean,!1),lockerLength:_.c.optional(_.c.number,6),lockerSeconds:_.c.optional(_.c.number,18e5),lockerPin:_.c.optional(_.c.string,"789654")},{})}).views((function(e){return{get isLogin(){return!!e.accessToken}}})).actions((function(e){return{initLocker:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in t)e.config[n]=t[n]},setLocker:function(t){e.config.isLockerOpen=t,U.a.setValue(e.lockerName,e.config)},setLocked:function(t){e.config.isLockerLocked=t,U.a.setValue(e.lockerName,e.config)},setLockerPin:function(t){e.config.lockerPin=t,U.a.setValue(e.lockerName,e.config)},setLockerLength:function(t){e.config.lockerLength=t,U.a.setValue(e.lockerName,e.config)},setLockerSeconds:function(t){e.config.lockerSeconds=t,U.a.setValue(e.lockerName,e.config)}}})).actions((function(e){return{setMenu:function(t){e.selectedMenu=t},setBaseURL:function(t){e.baseURL=t,ge.defaults.baseURL=t,U.a.setValue("baseURL",t)},resetLeaveTS:function(){e.leaveTS=Date.now()}}})).actions((function(e){return{logout:function(){e.accessToken="",e.refreshToken="",U.a.removeKey(e.accessTokenName),U.a.removeKey(e.refreshTokenName)},setAccessToken:function(t){e.accessToken=t,U.a.setValue(e.accessTokenName,t)},setRefreshToken:function(t){e.refreshToken=t,U.a.setValue(e.refreshTokenName,t)}}})).actions((function(e){return{setMusicModeName:function(t){U.a.setValue(e.musicModeName,t)},toggleDebug:function(){e.showDebug=!e.showDebug},toggleMusic:function(){e.showMusic=!e.showMusic},toggleSpeaker:function(){e.showSpeaker=!e.showSpeaker}}})),H=_.c.model({maps:_.c.array(_.c.frozen({})),messages:_.c.array(_.c.string),showMap:_.c.optional(_.c.boolean,!1)}).actions((function(e){return{append:function(t){e.messages.push(t)},update:function(t,n){var a=e.maps.find((function(e){return e.key===t}));a?a.value=n:e.maps.push({key:t,value:n})},clear:function(){e.messages=[],e.map={}},toggleMap:function(){e.showMap=!e.showMap}}})),X=new(n(120).EventEmitter),K=_.c.model("SongSheetSong",{id:_.c.string,ssid:_.c.string,uid:_.c.optional(_.c.string,""),uname:_.c.string,title:_.c.string,url:_.c.string,poster:_.c.string,order:_.c.optional(_.c.number,0)}).views((function(e){return{}})).actions((function(e){return{}})).actions((function(e){return{toJSON:function(){return Object(_.b)(e)}}})),G=_.c.model("musicPlayer",{currentPlayId:_.c.optional(_.c.string,""),mode:_.c.optional(_.c.string,"list"),single:!1,songs:_.c.array(K),mPlayer:_.c.frozen(),type:_.c.optional(_.c.frozen(),{CIRCLE:"circle",RANDOM:"random",ONE:"one",LIST:"list"}),event:_.c.optional(_.c.frozen(),{PLAY:"music-play",PLAY_SINGLE:"music-play-single",PAUSE:"music-pause"})}).views((function(e){return{}})).actions((function(e){return{setId:function(t){e.currentPlayId=t},setSheet:function(t){e.songs=t.map((function(e){return e.toJSON()}))},setMode:function(t){fe.app.setMusicModeName(t),e.mode=t},getUrlById:function(t){var n="";return e.songs.forEach((function(e){e.id===t&&(n=e.url)})),n},playByIndex:function(t,n){if(n&&this.setMode(n),e.songs[t]){var a=e.songs[t].id;e.currentPlayId=a,X.emit(e.event.PLAY,a)}},playMusic:function(t){e.currentPlayId=t,X.emit(e.event.PLAY,t)},playNext:function(){var t=e.currentPlayId,n=e.songs.findIndex((function(e){return e.id===t}));if(-1===n){if(0===e.songs.length)return;n=0}"circle"===e.mode?(t=n+1===e.songs.length?e.songs[0].id:e.songs[n+1].id,e.currentPlayId=t,X.emit(e.event.PLAY,t)):n+1<e.songs.length&&(t=e.songs[n+1].id,e.currentPlayId=t,X.emit(e.event.PLAY,t))},playRandom:function(){var t=Math.round(Math.random()*e.songs.length);X.emit(e.event.PLAY,e.songs[t].id)},pauseMusic:function(){X.emit(e.event.PAUSE)}}})),J=n(121),Z=U.a.getValue("speaker"),Q=_.c.model("musicPlayer",{left:_.c.optional(_.c.number,Z?Z.left:100),top:_.c.optional(_.c.number,Z?Z.top:410),rate:_.c.optional(_.c.number,Z?Z.rate:1.2),pitch:_.c.optional(_.c.number,Z?Z.pitch:.8)}).views((function(e){return{}})).actions((function(e){return{store:function(e){U.a.setValue("speaker",J.pick(e,["left","top","rate","pitch"]))},toJSON:function(){return Object(_.b)(e)}}})),$=_.c.model({avatar:_.c.optional(_.c.string,""),name:_.c.optional(_.c.string,""),id:_.c.optional(_.c.string,"")}),ee=n(61),te={get isDebug(){return!1},console:!0,config:{production:{host:"/"},development:{host:"/"}},menus:[{name:"shelf",path:"/root/shelf",title:"\u4e66\u67b6",icon:"FaBook"},{name:"groups",path:"/root/groups",title:"\u9891\u9053",icon:"FaList"},{name:"music",path:"/root/music",title:"\u97f3\u4e50",big:!0,hideMenu:!0,icon:"FaPlayCircle"},{name:"todos",path:"/root/todos",title:"\u4efb\u52a1",hideMenu:!0,icon:"FaTasks"},{name:"my",path:"/root/my",title:"\u6211\u7684",icon:"FaUserAlt"}],cache:{book:{},catalog:{},chapter:{},tree:{}}};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=_.c.model({items:_.c.optional(_.c.array(e),[]),page:_.c.optional(_.c.number,1),isEnded:_.c.optional(_.c.boolean,!1),isLoading:_.c.optional(_.c.boolean,!1),state:_.c.optional(_.c.enumeration(["success","fail"]),"success"),type:_.c.optional(_.c.enumeration(["refresh","more"]),"refresh"),sort:_.c.optional(_.c.enumeration(["asc","desc"]),"asc"),error:_.c.maybe(_.c.model({code:_.c.maybe(_.c.string),message:_.c.maybe(_.c.string)}))}).views((function(e){return{get isEmpty(){return!(e.items&&e.items.length>0)},get length(){return e.items.length}}})).actions((function(e){var t={},a=function(a){t[a]=function(){var t;return(t=n[a]).call.apply(t,[e].concat(Array.prototype.slice.call(arguments)))}};for(var r in n)a(r);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({setData:function(t){e.items=t||[]}},t)})).actions((function(e){var n=Object(_.a)(r.a.mark((function n(){var a,o,c,i,l,s,u,m,d,p,f,h,g,v=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=v.length>0&&void 0!==v[0]?v[0]:{},o=v.length>1&&void 0!==v[1]?v[1]:"refresh",c=a.query,i=void 0===c?{}:c,l=a.params,s=void 0===l?{}:l,u=a.data,m=void 0===u?{}:u,!(e.isLoading||e.isEnded&&"more"===o)){n.next=5;break}return n.abrupt("return");case 5:return e.type=o,e.error=void 0,e.isLoading=!0,e.state="success",i.page=e.page,d=null,n.prev=11,n.next=14,t({query:i,params:s,data:m},o);case 14:d=n.sent,f=(p=d).ended,h=p.items,e.isEnded=!!f,"refresh"===o?(e.page=1,e.items=h):h.length>0?(e.page=s.page,(g=e.items).push.apply(g,Object(ee.a)(h))):(e.state="fail",e.error={code:1,message:"x"}),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(11),te.isDebug&&te.console&&console.log(n.t0,"loader"),e.state="fail",n.t0.code?e.error={code:n.t0.code,message:n.t0.message||n.t0.toString()}:e.error={code:"unknown",message:"\u672a\u77e5\u9519\u8bef"};case 25:return n.prev=25,e.isLoading=!1,n.finish(25);case 28:return n.abrupt("return",d);case 29:case"end":return n.stop()}}),n,null,[[11,20,25,28]])})));return{clear:function(){e.page=1,e.items=[]},toggleSort:function(){e.sort="asc"===e.sort?"desc":"asc"},remove:function(t){e.items=e.items.slice().filter((function(e,n){return+t!==+n}))},append:function(t){e.items.push(t)},refresh:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,"refresh");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loadMore:function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.page++,t.next=3,n(a,"more");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}));return _.c.optional(a,{})}function re(e,t){var n=_.c.model({item:_.c.maybeNull(e),isLoading:_.c.optional(_.c.boolean,!1),state:_.c.optional(_.c.enumeration(["success","fail"]),"success"),type:_.c.optional(_.c.enumeration(["refresh"]),"refresh"),error:_.c.maybe(_.c.model({code:_.c.maybe(_.c.string),message:_.c.maybe(_.c.string)}))}).views((function(e){return{get isEmpty(){return!e.item},get fn(){return t}}})).actions((function(e){return{setData:function(t){e.item=t}}})).actions((function(e){var n=Object(_.a)(r.a.mark((function n(){var a,o,c,i,l,s,u,m=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=m.length>0&&void 0!==m[0]?m[0]:{},o=m.length>1&&void 0!==m[1]?m[1]:"refresh",c=a.query,i=a.params,l=a.data,!(e.isLoading||e.isEnded&&"more"===o)){n.next=5;break}return n.abrupt("return");case 5:if(!e.isLoading){n.next=7;break}return n.abrupt("return");case 7:return e.type=o,e.error=void 0,e.isLoading=!0,e.state="success",s=null,n.prev=12,n.next=15,t({query:c,params:i,data:l},o);case 15:s=n.sent,(u=s.item)?e.item=u:(e.state="fail",e.error={code:1,message:"x"}),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(12),te.isDebug&&te.console&&console.log(n.t0,"loader"),e.state="fail",n.t0.code?e.error={code:n.t0.code,message:n.t0.message}:e.error={code:"unknown",message:"\u672a\u77e5\u9519\u8bef"};case 25:return n.prev=25,e.isLoading=!1,n.finish(25);case 28:return n.abrupt("return",s);case 29:case"end":return n.stop()}}),n,null,[[12,20,25,28]])})));return{clear:function(){e.item=null},refresh:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,"refresh");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}));return _.c.optional(n,{})}var oe=re($,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getUserInfo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ce=ae(_.c.model("Line",{id:_.c.string,name:_.c.string,desc:_.c.string,enabled:_.c.boolean,type:_.c.string,host:_.c.string}).views((function(e){return{}})).actions((function(e){return{}})),function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getLines(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{getHostByType:function(e){var t="";return e=te.isDebug?"dev-"+e:e,this.items.forEach((function(n){n.type===e&&(t=n.host)})),t}}),ie=_.c.model({id:_.c.string,pid:_.c.string,tid:_.c.string,name:_.c.string,sort:_.c.number,poster:_.c.optional(_.c.string,""),count:_.c.optional(_.c.number,0),children:_.c.maybe(_.c.late((function(){return _.c.array(ie)})),[])}),le=ae(ie,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getCategoryList(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),se=_.c.model({id:_.c.string,uid:_.c.string,uname:_.c.string,title:_.c.string,poster:_.c.string,desc:_.c.string,tags:_.c.array(_.c.string),status:_.c.enumeration(["loading","finished"]),createdAt:_.c.string,words:_.c.number,comments:_.c.number,collections:_.c.number,chapters:_.c.number}),ue=ae(se,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getMybooks(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),me=W.create({baseURL:U.a.getValue("baseURL")||(te.isDebug?te.config.development.host:te.config.production)||"",config:{},music:{url:""}});me.setAccessToken(U.a.getValue(me.accessTokenName)||""),me.setRefreshToken(U.a.getValue(me.refreshTokenName)||""),me.initLocker(U.a.getValue(me.lockerName)||{});var de=G.create({mode:U.a.getValue(me.musicModeName)||"circle"}),pe=Q.create({}),fe={app:me,debug:H.create({}),music:de,speaker:pe,target:{},userLoader:oe.create(),lineLoader:ce.create(),categoryLoader:le.create(),bookShelfLoader:ue.create()},he=q.a.create({baseURL:U.a.getValue("baseURL")||(te.isDebug?te.config.development.host:te.config.production)||"",withCredentials:!1,timeout:5e3});he.interceptors.request.use((function(e){return fe.debug.append("".concat(e.method," ").concat(e.url)),te.isDebug&&te.console&&console.log("".concat(e.method," ").concat(e.url)),e.headers.Authorization=fe.app.accessToken,e}),(function(e){return te.isDebug&&te.console&&console.log(e,"request error"),Promise.resolve(e)})),he.interceptors.response.use((function(e){te.isDebug&&te.console&&console.log(e.status,e.data);var t=e.data;if(0!==t.code){if(10110===t.code&&e.config.url!==e.config.baseURL+"/v1/auth/user/refresh")return fe.app.setAccessToken(""),new Promise(function(){var t=Object(o.a)(r.a.mark((function t(n){var a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee.refresh({authorization:fe.app.refreshToken});case 2:if(!(a=t.sent).data){t.next=14;break}return fe.app.setAccessToken(a.data.token),fe.app.setAccessToken(a.data.refresh_token),e.config.headers.Authorization=a.data.token,e.config.try=!0,t.next=10,he(e.config);case 10:o=t.sent,n(o),t.next=15;break;case 14:n({});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());fe.debug.append(t.message)}return t}),(function(e){return fe.debug.append(e.message),te.isDebug&&te.console&&console.log(e,"response error"),101020===e.response.data.code&&fe.app.setAccessToken(""),Promise.resolve(e)}));var ge=he;function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(var n in e)t+="&".concat(n,"=").concat(e[n]);return t?"?"+t.substr(1):""}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ee=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{login:function(e){e.query,e.params;var t=e.data;return ge({url:"/v1/auth/user/sign-in",method:"post",data:{name:t.account,password:t.password}})},register:function(e){e.query;var t=e.params;e.data;return ge({url:"/v1/auth/user/sign-up",method:"post",data:{name:t.account,password:t.password}})},refresh:function(e){e.query;var t=e.params;e.data;return ge({url:"/v1/auth/user/refresh",method:"post",data:t})},getUserInfo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,t.data,e.next=3,ge({url:"/v1/user/self",method:"get"});case 3:return n=e.sent,e.abrupt("return",{item:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMybooks:function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({url:"/v1/user/my-books"});case 2:return t=e.sent,e.abrupt("return",{items:t.data,ended:!0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getBookFirstChapter:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ge({url:"/v1/user/book/".concat(n.id,"/first-chapter")});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBookChapter:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ge({url:"/v1/user/book/".concat(n.bid,"/chapter/").concat(n.id)});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTodos:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,t.params,t.data,e.next=3,ge({url:"/v1/user/todos".concat(ve(n))});case 3:return(a=e.sent).data.forEach((function(e){e.startedAt=new Date(e.startedAt),e.endedAt=new Date(e.endedAt)})),e.abrupt("return",{items:a.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createTodo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,n=t.data,e.next=3,ge({url:"/v1/user/todo",method:"POST",data:n});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateTodo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,a=t.data,e.next=3,ge({url:"/v1/user/todo/".concat(n.id),method:"PUT",data:a});case 3:return o=e.sent,e.abrupt("return",{item:o.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),destroyTodo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,a=t.data,e.abrupt("return",ge({url:"/v1/user/todo/".concat(n.id),method:"DELETE",data:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addSongToSheet:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.abrupt("return",ge({url:"/v1/user/song-sheet/".concat(n.ssid,"/song/").concat(n.id),method:"POST"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeSheetSong:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.abrupt("return",ge({url:"/v1/user/song-sheet/".concat(n.ssid,"/song/").concat(n.id),method:"DELETE"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{},{getBookInfo:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ge({url:"/v1/public/book/".concat(n.id)});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBookCatalog:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t.query,n=t.params,t.data,a="",n.query)a+="&".concat(o,"=").concat(n.query[o]);return e.next=5,ge({url:"/v1/public/book/".concat(n.id,"/catalog?").concat(a)});case 5:return c=e.sent,e.abrupt("return",{items:c.data,ended:c.data.length<20});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBookList:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,t.params,t.data,e.next=3,ge({url:"/v1/public/books".concat(ve(n))});case 3:return a=e.sent,e.abrupt("return",{items:a.data,ended:a.data.length<10});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCategoryList:function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({url:"/v1/public/categories"});case 2:for(o in t=e.sent,n={},t.data.forEach((function(e){e.children=[],""===e.pid&&(n[e.tid]=e)})),t.data.forEach((function(e){""!==e.pid&&n[e.tid].children.push(e)})),a=[],n)a.push(n[o]);return e.abrupt("return",{items:a,ended:!0});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getGroupTree:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ge({url:"/v1/public/group-tree/".concat(n.group_id)});case 3:return a=e.sent,e.abrupt("return",{item:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getGroups:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,t.data,e.next=3,ge({url:"/v1/public/groups"});case 3:return n=e.sent,e.abrupt("return",{items:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongSheets:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,t.data,e.next=3,ge({url:"/v1/public/song-sheets"});case 3:return n=e.sent,e.abrupt("return",{items:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongSheet:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,n=t.params,t.data,e.next=3,ge({url:"/v1/public/song-sheet/".concat(n.id)});case 3:return(a=e.sent).data.forEach((function(e,t){e.order=t})),e.abrupt("return",{items:a.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSongs:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,t.params,t.data,e.next=3,ge({url:"/v1/public/songs".concat(ve(n))});case 3:return a=e.sent,e.abrupt("return",{items:a.data,ended:a.data.length<10});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLines:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query,t.params,t.data,e.next=3,ge({url:"/v1/public/lines"});case 3:return n=e.sent,e.abrupt("return",{items:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getImages:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,t.params,t.data,e.next=3,ge({url:"/v1/public/images".concat(ve(n))});case 3:return a=e.sent,e.abrupt("return",{items:a.data,ended:a.data.length<10});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),be=re(se,function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getBookInfo(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),we={textAlign:"center"};function ke(e,t){if(e.isEmpty)return e.isLoading?p.a.createElement("div",{style:we},p.a.createElement(g.b,{text:"\u52a0\u8f7d\u4e2d..."})):e.error?p.a.createElement("div",{style:we},"\u51fa\u9519\u5566!",e.error.message,p.a.createElement("span",{onClick:function(){return e.refresh()}},"\u70b9\u6211\u91cd\u8bd5")):p.a.createElement("div",{style:we},"\u6ca1\u6709\u6570\u636e,",p.a.createElement("span",{onClick:function(){return e.refresh()}},"\u70b9\u6211\u91cd\u8bd5"))}var xe=function(e){var t=e.children,n=e.holder,a=e.loading;return p.a.createElement(E.a,null,(function(){return a?n:t}))},Oe=new g.i.DataSource({rowHasChanged:function(e,t){return!1}});function Ne(e){return p.a.createElement("div",{className:"am-list-body ".concat(e.className)},e.children)}var je=function(e){return p.a.createElement("div",{style:{display:"flex",flex:"1 1",height:"100%",flexDirection:"column"}},p.a.createElement(E.a,null,(function(){return function(e){var t=e.loader,n=e.refresh,a=e.loadMore,r=e.renderItem,o=e.onScroll,c=e.className,i=e.renderEmpty,l=Oe.cloneWithRows(t.items.slice()),s=ke(t),u=t.isLoading;return p.a.createElement(d.Fragment,null,p.a.createElement(xe,{loading:t.isEmpty,holder:p.a.createElement(B,null,i||s)},p.a.createElement(g.i,{style:{height:"100%",overflow:"auto"},dataSource:l,onScroll:o,renderRow:function(e,t,n){return r(e,t,n)},renderBodyComponent:function(){return p.a.createElement(Ne,{className:c})},initialListSize:1/0,onEndReachedThreshold:10,onEndReached:a||t.loadMore,pullToRefresh:p.a.createElement(g.n,{refreshing:!1,onRefresh:n||t.refresh}),renderFooter:function(){return p.a.createElement("div",{style:{textAlign:"center",padding:5}},u?"\u6b63\u5728\u52a0\u8f7d\u66f4\u591a\u6570\u636e...":"\u5df2\u5168\u90e8\u52a0\u8f7d\u5b8c\u6bd5")}})))}(e)})))},Ce=function(e){var t=e.item,n=e.router,a=e.nth;return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"},onClick:function(){n.pushView("/root/book/".concat(t.bid,"/chapter/").concat(t.id),null,{hideMenu:!0})}},p.a.createElement("div",{style:{fontSize:"1.2rem"}},"\u7b2c",a,"\u7ae0 ",t.title),p.a.createElement("div",{style:{color:"grey",padding:"5px 0"}},t.createdAt)))}))},Le=_.c.model({id:_.c.string,bid:_.c.string,title:_.c.optional(_.c.string,""),createdAt:_.c.optional(_.c.string,""),isApproved:_.c.optional(_.c.boolean,!0),order:_.c.optional(_.c.number,1),words:_.c.optional(_.c.number,0),comments:_.c.optional(_.c.number,0),content:_.c.optional(_.c.string,""),preId:_.c.maybe(_.c.string),nextId:_.c.maybe(_.c.string)}),Se=re(Le,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getBookChapter(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());n(226);function Te(){return(Te=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.account||!n.password){e.next=17;break}return n.isLoading=!0,e.next=4,Ee.login({data:n});case 4:if(a=e.sent,n.isLoading=!1,a&&a.data){e.next=8;break}return e.abrupt("return",g.t.info("\u8bf7\u6c42\u5931\u8d25!"));case 8:if(0===a.code){e.next=12;break}return e.abrupt("return",g.t.info(a.message));case 12:fe.app.setAccessToken(a.data.token),fe.app.setRefreshToken(a.data.refresh_token),t.history.push({pathname:"/"});case 15:e.next=18;break;case 17:g.t.info("\u8bf7\u8f93\u5165\u8d26\u53f7\u5bc6\u7801!");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe=n(233),Me=function(e){var t=e.item,n=e.router,a=fe.lineLoader.getHostByType("image");return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-width",style:{padding:10},onClick:function(){n.pushView("/root/book/".concat(t.id,"/info"),null,{hideMenu:!0,id:t.id})}},p.a.createElement("div",{className:"full-width-fix",style:{width:60,height:80,backgroundColor:"green",marginRight:20}},p.a.createElement("img",{style:{width:"100%",height:"100%"},src:a+(t.poster?t.poster:"/poster/nocover.jpg"),alt:""})),p.a.createElement("div",{className:"full-width-auto full-height"},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("div",{style:{fontSize:"1.2rem"}},t.title),p.a.createElement(T,{type:"FaEllipsisH"})),p.a.createElement("div",{style:{padding:"4px 0",color:"rgb(146, 145, 145)"}},t.uname," \xb7 ","xxxxxx"),p.a.createElement("div",{style:{color:"rgb(146, 145, 145)"}},"17\u5c0f\u65f6\u524d \xb7 \u7b2c\u516b\u767e\u96f6\u516d\u7ae0 \u7ffb\u8f66\u4e86"))))}))},Ie=ae(se,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getBookList(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ae=_.c.model("Group",{tree_id:_.c.string,group_id:_.c.string,parent_id:_.c.string,title:_.c.string,name:_.c.string,desc:_.c.string,view:_.c.string,refs:_.c.array(_.c.string),data:_.c.optional(_.c.frozen([]),[]),attrs:_.c.model({hide_title:_.c.boolean,allowChange:_.c.boolean,selected:_.c.maybeNull(_.c.boolean),timeout:_.c.maybeNull(_.c.number),columns:_.c.maybeNull(_.c.number),showCount:_.c.maybeNull(_.c.number)}),params:_.c.frozen(null,{}),more:_.c.model({channel_id:_.c.string,keyword:_.c.string,type:_.c.string}),nth:_.c.number,children:_.c.optional(_.c.array(_.c.late((function(){return Ae}))),[])}).views((function(e){return{get id(){return e.group_id}}})).actions((function(e){return{selected:function(t){e.attrs.selected!==t&&(e.attrs.selected=t)}}})),De=Ae,Pe=re(De,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getGroupTree(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());n(106);function Re(e){var t=e.self,n=e.selectTag;return p.a.createElement(E.a,null,(function(){return p.a.createElement("span",{className:"comp-tag ".concat(t.attrs.selected?"selected":""),onClick:function(){return n(t.group_id)}},t.name)}))}function Be(e){var t=e.self,n=e.onQueryChange;function a(e){t.group_id===e?t.selected(!0):t.selected(!1),t.children.forEach((function(t){t.group_id===e?t.selected(!0):t.selected(!1)})),n()}return p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{style:{margin:"5px 10px",whiteSpace:"nowrap",overflowX:"hidden",overflowY:"hidden"}},p.a.createElement("span",{className:"comp-tag ".concat(t.attrs.selected?"selected":""),onClick:function(){return a(t.group_id)}},t.name),t.children.map((function(e){return p.a.createElement(Re,{self:e,key:e.id,selectTag:a})})))}))}var Ve=function(e){var t=e.item,n=fe.lineLoader.getHostByType("image"),a=st();return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-width",style:{margin:10},onClick:function(){a.pushView("/root/book/".concat(t.id,"/info"),null,{hideMenu:!0,id:t.id})}},p.a.createElement("div",{className:"full-width-fix",style:{width:60,height:80,backgroundColor:"green",marginRight:20}},p.a.createElement("img",{style:{width:"100%",height:"100%"},src:n+(t.poster?t.poster:"/poster/nocover.jpg"),alt:""})),p.a.createElement("div",{className:"full-width-auto full-height"},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("div",{style:{fontSize:"1.2rem"}},t.title)),p.a.createElement("div",{style:{padding:"4px 0",color:"rgb(146, 145, 145)"}},t.uname," \xb7 ",t.catalog," \xb7 ","loading"===t.status?"\u8fde\u8f7d":"\u5b8c\u7ed3"," \xb7 ",t.words),p.a.createElement("div",{style:{color:"rgb(146, 145, 145)"},className:"line2"},t.desc))))}))};function ze(e){var t=e.self,n=(e.isChild,Object(O.a)(e,["self","isChild"])),a=Object(E.b)((function(){return{showMenu:!1,showChildren:!1}}));return p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-width",style:{padding:"5px 0"}},p.a.createElement("div",{style:{position:"relative",display:"inline-block"},onContextMenu:function(e){a.showMenu=!0,e.preventDefault()}},p.a.createElement("span",{style:{display:"flex",marginLeft:5,backgroundColor:"#eaeaea",border:"1px solid #666",padding:3,borderRadius:5,zIndex:a.showMenu?100:98,position:"relative"}},t.title,p.a.createElement(V,{visible:0!==t.children.length},p.a.createElement(T,{type:a.showChildren?"FaMinusCircle":"FaPlusCircle",onClick:function(){return a.showChildren=!a.showChildren}}))),p.a.createElement("div",{onClick:function(){return a.showMenu=!1},style:{display:a.showMenu&&"edit"===n.mode?"block":"none",position:"fixed",left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:99}}),p.a.createElement("div",{style:{zIndex:100,display:a.showMenu&&"edit"===n.mode?"flex":"none",whiteSpace:"nowrap",position:"absolute",top:"100%",left:"100%",backgroundColor:"white",border:"1px solid #bbb",borderRadius:5,padding:5}},p.a.createElement("div",{style:{textAlign:"right"}},p.a.createElement(g.c,{type:"primary",onClick:function(){n.openGroupEdit({parent_id:t.group_id,tree_id:t.tree_id,view:"tree-node"})}},"\u6dfb\u52a0"),p.a.createElement(g.c,{onClick:function(){n.destroyGroup(t)}},"\u5220\u9664")))),p.a.createElement("div",{className:"full-height",style:{display:a.showChildren?"block":"none",position:"relative",margin:"10px 0 10px 10px",paddingLeft:10}},p.a.createElement(V,{visible:0!==t.children.length},p.a.createElement("span",{style:{width:"100%",position:"absolute",top:0,left:0,height:"50%",borderTopLeftRadius:"10%",borderLeft:"1px solid #999",transform:"translateY(-7px)"}}),p.a.createElement("span",{style:{width:"100%",position:"absolute",bottom:0,left:0,height:"50%",borderBottomLeftRadius:"10%",borderLeft:"1px solid #999",transform:"translateY(7px)"}}),p.a.createElement("span",{style:{position:"absolute",top:"50%",left:-5,marginTop:-5,borderColor:"#333",borderStyle:"solid",borderTopWidth:1,borderLeftWidth:1,borderRightWidth:0,borderBottomWidth:0,width:10,height:10,transform:"rotate(-45deg)"}})),t.children.map((function(e){return p.a.createElement(ze,Object.assign({key:e.id,self:e,isChild:!0},n))}))))}))}function qe(e){var t=e.self,n=(e.children,Object(O.a)(e,["self","children"]));return t.children.map((function(e){return p.a.createElement(Ye,Object.assign({key:e.id,self:e},n))}))}var _e={filter:function(e){var t=e.self,n=(Object(O.a)(e,["self"]),st()),a=Ie.create();return Object(d.useEffect)((function(){a.isEmpty&&a.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement("div",{style:{padding:5}},t.children.map((function(e){return p.a.createElement(Be,{self:e,key:e.id,onQueryChange:function(){var e={};t.children.forEach((function(t){t.children.forEach((function(t){t.attrs.selected&&Object.assign(e,t.params)}))})),a.refresh({query:e})}})}))),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(je,{loader:a,renderItem:function(e,t,a){return p.a.createElement(Me,{item:e,router:n,selectionId:t})}})))}))},"filter-tag":Re,"filter-row":Be,picker:function(e){var t=e.self;return p.a.createElement(E.a,null,(function(){return p.a.createElement("div",null,!1===t.attrs.hide_title&&p.a.createElement("div",{className:"dd-common-alignside",style:{borderLeft:"5px solid #ff9999",paddingLeft:10}},p.a.createElement("span",null,t.name),p.a.createElement(V,{visible:""!==t.more.channel_id},p.a.createElement("span",{style:{fontSize:16,color:"#888"}},p.a.createElement(T,{type:"FaAngleRight",before:"\u66f4\u591a"})))),p.a.createElement("div",null,t.data.map((function(e,t){return p.a.createElement(Ve,{key:t,item:e})}))),p.a.createElement(V,{visible:!0===t.attrs.allowChange},p.a.createElement("div",{style:{textAlign:"center"}},p.a.createElement(T,{type:"FaRedo",after:"\u6362\u4e00\u6362"}))))}))},tab:function(e){var t=e.self,n=(e.children,Object(O.a)(e,["self","children"]));return p.a.createElement(d.Fragment,null,p.a.createElement(g.r,{tabs:t.children.map((function(e,t){return{title:e.title,sub:t}}))},t.children.map((function(e,t){return p.a.createElement(qe,Object.assign({key:t,self:e},n))}))))},"tab-pane":qe,"tree-node":function(e){return p.a.createElement(ze,e)},view:function(e){if(this[e])return this[e]}};function Ye(e){var t=e.self,n=Object(O.a)(e,["self"]);return p.a.createElement(E.a,null,(function(){if(""===t.parent_id)return t.children.map((function(e){return p.a.createElement(Ye,Object.assign({key:e.group_id,self:e},n))}));var e=_e.view(t.view);return e?p.a.createElement(e,Object.assign({self:t},n)):p.a.createElement("div",null,"?")}))}function Ue(e){var t=e.loader,n=Object(O.a)(e,["loader"]),a=ke(t);return p.a.createElement(E.a,null,(function(){return t.item&&0!==t.item.children.length?p.a.createElement("div",{style:{height:"100%",overflow:"auto"}},p.a.createElement(Ye,Object.assign({self:t.item},n))):p.a.createElement(B,null,a,"fuck")}))}var We=ae(De,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getGroups(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),He=function(e){var t=e.item,n=e.router;return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"},onClick:function(){n.pushView("/root/group-tree/".concat(t.group_id),null,{title:t.title,hideMenu:!0})}},t.title,p.a.createElement(T,{type:"FaAngleRight"})))}))};var Xe=ae(_.c.model("Todo",{id:_.c.string,title:_.c.string,content:_.c.string,priority:_.c.number,isFinish:_.c.boolean,isDelay:_.c.boolean,notify:_.c.boolean,giveup:_.c.boolean,startedAt:_.c.Date,endedAt:_.c.maybeNull(_.c.Date),deletedAt:_.c.maybeNull(_.c.Date),type:_.c.string}).views((function(e){return{}})).actions((function(e){return{finishToggle:function(){e.isFinish=!e.isFinish}}})),function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getTodos(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ke=function(e){var t=e.item,n=e.router;return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"}},p.a.createElement(T,{size:"md",type:t.isFinish?"FaRegCheckCircle":"FaRegCircle",onClick:function(e){t.finishToggle(),Ee.updateTodo({params:{id:t.id},data:t}).then((function(e){}))}}),p.a.createElement("span",{style:{flex:1,padding:"5px 10px"},onClick:function(){n.pushView("/root/todo/".concat(t.id),null,{data:t})}},t.title),p.a.createElement(T,{type:"FaAngleLeft",onClick:function(){}})))}))};function Ge(){var e=I(),t=st(),n=t.params,a=t.getStateKey("data"),c=Object(E.b)((function(){return{loading:!1,title:n.id?a.title:"",content:n.id?a.content:"",type:n.id?a.type:"work",priority:n.id?a.priority:"",startedAt:n.id?a.startedAt:null,endedAt:n.id?a.endedAt:null,isDelay:!!n.id&&a.isDelay,isFinish:!!n.id&&a.isFinish}}));return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:n.id?"\u4fee\u6539":"\u6dfb\u52a0",router:t}),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(g.h,null,p.a.createElement(g.g,{type:"text",value:c.title,onChange:function(e){return c.title=e}},"\u6807\u9898"),p.a.createElement(g.k,{extra:"\u8bf7\u9009\u62e9",value:[c.type],data:[{label:"\u751f\u6d3b",value:"life"},{label:"\u5de5\u4f5c",value:"work"},{label:"\u8bbe\u8ba1",value:"design"}],onChange:function(e){return c.type=e[0]}},p.a.createElement(g.h.Item,null,"\u7c7b\u578b")),p.a.createElement(g.s,{title:"\u8be6\u60c5",value:c.content,autoHeight:!0,onChange:function(e){return c.content=e}}),p.a.createElement(g.k,{extra:"\u8bf7\u9009\u62e9",value:[c.priority],data:[{label:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",value:1},{label:"\u91cd\u8981\u4e0d\u7d27\u6025",value:2},{label:"\u4e0d\u91cd\u8981\u7d27\u6025",value:3},{label:"\u91cd\u8981\u7d27\u6025",value:4}],onChange:function(e){c.priority=e[0]}},p.a.createElement(g.h.Item,null,"\u4f18\u5148\u7ea7")),p.a.createElement(g.e,{value:c.startedAt,onChange:function(e){return c.startedAt=e}},p.a.createElement(g.h.Item,null,"\u5f00\u59cb\u65f6\u95f4")),p.a.createElement(g.e,{value:c.endedAt,onChange:function(e){return c.endedAt=e}},p.a.createElement(g.h.Item,null,"\u7ed3\u675f\u65f6\u95f4")),p.a.createElement(g.h.Item,null,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",null,"\u662f\u5426\u63a8\u8fdf"),p.a.createElement(g.p,{checked:c.isDelay,onChange:function(e){return c.isDelay=e}}))),p.a.createElement(g.h.Item,null,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",null,"\u662f\u5426\u5b8c\u6210"),p.a.createElement(g.p,{checked:c.isFinish,onChange:function(e){return c.isFinish=e}}))))),p.a.createElement(g.b,{animating:c.loading}),p.a.createElement("div",{className:"full-width",style:{height:40,borderTop:"1px solid #eee"}},p.a.createElement("div",{className:"full-width-auto dd-common-centerXY",style:{backgroundColor:"white"}},"\u53d6\u6d88"),p.a.createElement("div",{className:"full-width-auto dd-common-centerXY",style:{backgroundColor:"#30a6fb",color:"white"},onClick:Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.loading=!0,e.prev=1,!n.id){e.next=7;break}return e.next=5,Ee.updateTodo({params:n,data:c});case 5:e.next=9;break;case 7:return e.next=9,Ee.createTodo({data:{title:c.title,content:c.content,type:c.type,priority:c.priority,startedAt:c.startedAt,endedAt:c.endedAt}});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.prev=13,c.loading=!1,g.t.info("\u7f16\u8f91\u6210\u529f",2,(function(){t.back()})),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[1,11,13,17]])})))},n.id?"\u4fee\u6539":"\u6dfb\u52a0")))}))}var Je=ae(_.c.model("SongSheet",{id:_.c.string,uid:_.c.optional(_.c.string,""),title:_.c.string,desc:_.c.string,poster:_.c.string,count:_.c.number}).views((function(e){return{}})).actions((function(e){return{}})),function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getSongSheets(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ze=_.c.model("resource",{id:_.c.string,uid:_.c.string,uname:_.c.string,title:_.c.string,poster:_.c.string,desc:_.c.string,url:_.c.string,tags:_.c.array(_.c.string),status:_.c.enumeration(["loading","finished"]),createdAt:_.c.string,words:_.c.number,comments:_.c.number,collections:_.c.number,chapters:_.c.number,playing:_.c.optional(_.c.boolean,!1)}).actions((function(e){return{toggleStatus:function(){e.playing=!e.playing}}})),Qe=ae(Ze,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getSongs(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$e=function(e){var t=e.item,n=e.router;return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"},onClick:function(){n.pushView("/root/song-sheet/".concat(t.id),null,{title:t.title,hideMenu:!0})}},t.title,p.a.createElement(T,{type:"FaAngleRight"})))}))},et=ae(K,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getSongSheet(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{clone:function(e){var t=this;this.items=[],e.items.forEach((function(e){t.items.push(e.toJSON())}))},getUrlById:function(e){var t="";return this.items.forEach((function(n){n.id===e&&(t=n.url)})),t}}),tt=function(e){var t=e.item,n=e.mode,a=void 0===n?"normal":n,c=(e.order,e.loader),i=(e.router,e.remove),l=Object(O.a)(e,["item","mode","order","loader","router","remove"]),s=w().music;return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",Object.assign({className:"dd-common-alignside",style:{margin:"0 10px",padding:"10px  0 5px 0",borderBottom:"1px solid #eee"}},l),t.title,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(T,{type:t.id===s.currentPlayId?"FaPause":"FaPlay",onClick:function(){t.id===s.currentPlayId?s.pauseMusic():(s.setSheet(c.items),s.playMusic(t.id))}}),p.a.createElement(V,{visible:"delete"===a},p.a.createElement(T,{type:"MdDeleteForever",onClick:function(){return i(t)}})),p.a.createElement(V,{visible:"add"===a},p.a.createElement(T,{type:"FaPlus",onClick:function(){var e=Object(o.a)(r.a.mark((function e(n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,Ee.getSongSheets({});case 4:a=e.sent,o=a.items.map((function(e){return e.title})),g.a.showActionSheetWithOptions({options:[].concat(Object(ee.a)(o),["\u53d6\u6d88"]),message:"\u6dfb\u52a0\u5230\u6b4c\u5355",maskClosable:!0,cancelButtonIndex:o.length-1},(function(e){if(e<o.length-1){var n=a.items[e].id,r=t.id;Ee.addSongToSheet({params:{ssid:n,id:r}})}}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})))))}))};var nt=ae(Ze,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getImages(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),at=function(e){var t=e.item,n=(e.router,fe.lineLoader.getHostByType("image"));return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-width-fix",style:{height:320,backgroundColor:"#eee"}},p.a.createElement("img",{src:n+(t.poster?t.poster:"/poster/nocover.jpg"),style:{height:"100%"}})))}))},rt=[{pathname:"/auth/login",component:function(e){e.self;var t=I(),n=st(),a=Object(E.b)((function(){return{isLoading:!1,isLogin:!1,isRegister:!1,account:"",password:""}}));return p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(t,{left:"\u8fd4\u56de",title:"\u8d26\u53f7\u767b\u5f55",router:n}),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement("div",{className:"dd-common-centerXY",style:{position:"relative"}},p.a.createElement("div",{style:{position:"absolute",right:0,top:0,padding:5}},p.a.createElement(T,{type:"FaCog",onClick:function(){g.j.prompt("\u5730\u5740","",[{text:"\u53d6\u6d88"},{text:"\u786e\u5b9a",onPress:function(e){fe.app.setBaseURL(e)}}],"default","")}})),p.a.createElement(g.h,null,p.a.createElement(g.h.Item,null,p.a.createElement(g.g,{type:"text",placeholder:"\u7528\u6237\u540d",style:{border:"0 none"},defaultValue:a.account,onBlur:function(e){return a.account=e}},"\u7528\u6237\u540d")),p.a.createElement(g.h.Item,null,p.a.createElement(g.g,{type:"password",placeholder:"\u5bc6\u7801",defaultValue:"",style:{border:"0 none"},onBlur:function(e){return a.password=e}},"\u5bc6\u7801")),p.a.createElement(g.h.Item,{style:{display:"flex"}},p.a.createElement(g.c,{loading:a.isLogin,disabled:a.isLogin||a.isRegister,type:"primary",onClick:function(){return function(e,t){return Te.apply(this,arguments)}(n,a)}},"\u767b\u5f55"))))))}))}},{pathname:"/root/home",component:function(e){e.self;var t=e.children;return p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"dd-common-centerXY"},"Hello World!",t)}))}},{pathname:"/root/category",component:function(){var e=I(),t=w(),n=st(),a=t.categoryLoader,r=Object(E.b)((function(){return{selectIndex:0,count:0}}));return Object(d.useEffect)((function(){a.isEmpty&&a.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:"\u5206\u7c7b",router:n},p.a.createElement("div",{style:{flex:1,textAlign:"right"},onClick:function(){return n.pushView("/root/book/search",null,{hideMenu:!0})}},"\u5168\u90e8\u4f5c\u54c1")),p.a.createElement("div",{className:"full-height-auto",style:{display:"flex",flexDirection:"row",flex:1}},p.a.createElement("div",{style:{borderRight:"1px solid #ccc",minWidth:80}},a.items.map((function(e,t){return p.a.createElement("div",{key:e.id,style:D({},P.bigCate,{},t===r.selectIndex?P.choosed:{}),onClick:function(){return r.selectIndex=t}},e.name)}))),p.a.createElement("div",{style:{flex:1,height:"100%",overflow:"auto"},className:"smooth"},p.a.createElement("div",{style:{padding:20}},"\u603b\u5171",r.count,"\u90e8"),p.a.createElement(R,{router:n,cates:a.items[r.selectIndex]}))))}))}},{pathname:"/root/book/:id([0-9a-zA-Z-]+)/info",component:function(){var e=st(),t=be.create(),n=e.params,a=Object(E.b)((function(){return{loading:!1,firstLoading:!1,shouldFix:!1,id:n.id}}));return Object(d.useEffect)((function(){t.isEmpty&&t.refresh({params:{id:a.id}})})),p.a.createElement(E.a,null,(function(){return t.isEmpty?p.a.createElement(B,null,p.a.createElement(g.b,{text:"\u52a0\u8f7d\u4e2d..."})):p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-height"},p.a.createElement("div",{className:"dd-common-alignside",style:{position:"absolute",width:"100%",boxSizing:"border-box",height:45,padding:"0 15px"}},p.a.createElement(T,{type:"FaChevronLeft",onClick:function(){e.back()}}),p.a.createElement("div",null,p.a.createElement(V,{visible:a.shouldFix},p.a.createElement("div",null,"\u6211\u7684\u673a\u5668\u4eba\u5973\u53cb"),p.a.createElement("div",null,"\u677e\u4e0b\u4e2d\u4e8c \xb7 \u79d1\u5e7b"))),p.a.createElement(T,{type:"FaEllipsisH"})),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement("div",{style:{padding:"20px 0 10px 0",textAlign:"center",backgroundColor:"#666",color:"white"}},p.a.createElement("img",{src:t.item.poster,alt:"",width:100,height:120}),p.a.createElement("div",{style:{fontSize:20,padding:5}},t.item.title),p.a.createElement("div",null,t.item.uname," \xb7 \u79d1\u5e7b")),p.a.createElement("div",{style:{padding:"0 20px",borderBottom:"1px solid #ccc",backgroundColor:"snow"}},p.a.createElement("div",{className:"dd-common-alignside",style:{height:50,borderBottom:"1px solid #ccc"}},p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1}},t.item.words,"\u4e07\u5b57"),p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1}},t.item.chapters,"\u7ae0"),p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1}},t.item.comments,"\u8bc4\u8bba")),p.a.createElement("div",{style:{padding:"10px 0",borderBottom:"1px solid #ccc"},dangerouslySetInnerHTML:{__html:t.item.desc}}),p.a.createElement("div",{className:"full-width",style:{height:40},onClick:function(){e.pushView("/root/book/".concat(a.id,"/catalog"),null,{hideMenu:!0})}},p.a.createElement("span",{className:"full-width-auto",style:{fontWeight:"bolder"}},"\u76ee\u5f55"),p.a.createElement("span",{className:"full-width-fix"},"\u8fde\u8f7d\u81f3 729\u7ae0 \xb7 \u4e24\u5c0f\u65f6\u524d\u66f4\u65b0"),p.a.createElement(T,{style:{marginLeft:10},className:"full-width-fix",type:"FaAngleRight"}))),p.a.createElement("p",null,"TODO:\u4f5c\u8005 \u540d\u79f0 \u5934\u50cf \u51e0\u90e8\u4f5c\u54c1")),p.a.createElement("div",{className:"dd-common-alignside",style:{height:50}},p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1,backgroundColor:"rgb(226, 223, 223)",color:"gray"}},"+ \u52a0\u5165\u4e66\u67b6"),p.a.createElement("div",{className:"dd-common-centerXY",style:{flex:1,backgroundColor:"red",color:"white"},onClick:Object(o.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.firstLoading=!0,t.next=4,Ee.getBookFirstChapter({params:{id:a.id}});case 4:n=t.sent,e.pushView("/root/book/".concat(a.id,"/chapter/").concat(n.item.id),null,{hideMenu:!0,bid:a.id,id:n.item.id}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.prev=10,a.firstLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,8,10,13]])})))},p.a.createElement(V,{visible:a.firstLoading},p.a.createElement(g.f,{type:"loading"})),"\u7acb\u5373\u9605\u8bfb"))))}))}},{pathname:"/root/book/:id([0-9a-zA-Z-]+)/catalog",component:function(){var e=st(),t=ae(Le,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee.getBookCatalog(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).create(),n=e.params,a=Object(E.b)((function(){return{loading:!1,sortASC:!0,id:n.id}}));return Object(d.useEffect)((function(){t.isEmpty&&t.refresh({params:{id:a.id}})})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"full-height"},p.a.createElement("div",{className:"dd-common-alignside",style:{height:45,padding:"0 15px"}},p.a.createElement(T,{type:"FaChevronLeft",onClick:function(){e.back()}}),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",{style:{padding:"0 10px"}},"\u76ee\u5f55"),p.a.createElement("span",{style:{padding:"0 10px"}},"\u4e66\u7b7e")),p.a.createElement("div",{className:"dd-common-alignside",onClick:function(){a.sortASC=!a.sortASC,t.toggleSort()}},p.a.createElement(T,{type:a.sortASC?"FaSortNumericDown":"FaSortNumericUp"}),a.sortASC?"\u6b63\u5e8f":"\u5012\u5e8f")),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(je,{loader:t,refresh:function(){var e={id:a.id};t.refresh({params:e})},renderItem:function(n,r,o){return p.a.createElement(Ce,{nth:"asc"===t.sort?parseInt(o)+1:t.items.length-parseInt(o),item:n,router:e,sectionId:r,toggleLoading:function(){return a.loading=!a.loading}})}}))))}))}},{pathname:"/root/book/:bid([0-9a-zA-Z-]+)/chapter/:id([0-9a-zA-Z-]+)",component:function(){var e=st(),t=Se.create(),n=ke(t),a=e.params,r=Object(E.b)((function(){return{pop:!1,percent:0,id:a.id,bid:a.bid}})),o=Object(d.useRef)(null);return Object(d.useEffect)((function(){t.refresh({params:{id:r.id,bid:r.bid}}),setTimeout((function(){o.current.scrollTop=1}),100)})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(V,{visible:r.pop},p.a.createElement("div",{className:"dd-common-alignside",style:{position:"absolute",left:0,top:0,right:0,backgroundColor:"#eee",height:45,padding:"0 15px"}},p.a.createElement(T,{type:"FaChevronLeft",onClick:function(){e.back()}}),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(T,{type:"FaCloudDownloadAlt",style:{margin:"0 10px"}}),p.a.createElement(T,{type:"IoIosHeadset",style:{margin:"0 10px"}}),p.a.createElement(T,{type:"FaEllipsisH",style:{margin:"0 10px"}})))),p.a.createElement("div",{className:"full-height",style:{padding:"0 15px"},onClick:function(){r.pop=!r.pop}},p.a.createElement(V,{visible:t.isEmpty},p.a.createElement(B,null,p.a.createElement(g.b,{text:"\u52a0\u8f7d\u4e2d..."}))),!t.isEmpty&&p.a.createElement(d.Fragment,null,p.a.createElement("div",{style:{padding:"8px 0",color:"grey"}},t.item.title),p.a.createElement("div",{ref:o,className:"full-height-auto scroll-smooth smooth",style:{lineHeight:2,letterSpacing:2,fontSize:16,textIndent:20},onScroll:function(){var e=o.current.scrollHeight-o.current.offsetHeight;e<=0&&(e=1),o.current.scrollTop<1&&(o.current.scrollTop=1),o.current.scrollTop===e&&(o.current.scrollTop=e-1),r.percent=(100*o.current.scrollTop/e).toFixed(1)}},t.isEmpty?n:p.a.createElement("div",null,t.item.content)),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"8px 0",color:"grey"}},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",{style:{marginRight:10}},"2/12"),p.a.createElement("span",null,r.percent,"%")),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",{style:{marginRight:10}},"03:54"),p.a.createElement(T,{type:"FaBatteryHalf",style:{display:"inline-block",marginRight:10}}),p.a.createElement("span",null,t.isEmpty?0:t.item.content.length))))),p.a.createElement(V,{visible:r.pop},p.a.createElement("div",{style:{position:"absolute",left:0,right:0,bottom:0,fontSize:12,backgroundColor:"#eee",padding:"0 10px"}},p.a.createElement("div",{className:"full-width",style:{height:40}},p.a.createElement("span",{className:"full-width-fix",style:{opacity:t.isEmpty||""===t.item.preId?.5:1},onClick:function(){!t.isEmpty&&t.item.preId&&t.refresh({params:{bid:r.bid,id:t.item.preId}})}},"\u4e0a\u4e00\u7ae0"),p.a.createElement(g.m,{percent:r.percent,position:"normal",className:"full-width-auto",style:{margin:"0 10px"}}),p.a.createElement("span",{className:"full-width-fix",style:{opacity:t.isEmpty||""===t.item.nextId?.5:1},onClick:function(){!t.isEmpty&&t.item.nextId&&(r.id=t.item.nextId,t.refresh({params:{id:r.id,bid:r.bid}}),o.current.scrollTop=1)}},"\u4e0b\u4e00\u7ae0")),p.a.createElement("div",{className:"full-width",style:{height:50}},p.a.createElement("div",{className:"full-width-fix dd-common-centerXY",style:{flexDirection:"column"}},p.a.createElement(T,{type:"FaListUl"}),"\u76ee\u5f55"),p.a.createElement("div",{className:"full-width-auto dd-common-centerXY",style:{flexDirection:"column"}},p.a.createElement(T,{type:"FaCog"}),"\u8bbe\u7f6e"),p.a.createElement("div",{className:"full-width-fix dd-common-centerXY",style:{flexDirection:"column"}},p.a.createElement(T,{type:"FaEllipsisH"}),"\u5176\u4ed6")))))}))}},{pathname:"/root/book/search",component:function(){var e=I(),t=st(),n=Pe.create(),a=Ie.create();return Object(d.useEffect)((function(){n.isEmpty&&n.refresh({params:{group_id:"D5698713D07045ADBBF5F0D5D09E53E4"}}),a.isEmpty&&a.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:"\u5168\u90e8",router:t}),p.a.createElement("div",{className:"full-height-auto",style:{display:"flex",flexDirection:"column",flex:1}},p.a.createElement("div",{style:{height:"100%"}},p.a.createElement(Ue,{loader:n,onQueryChange:function(e){a.refresh({query:e})}}))))}))}},{pathname:"/root/group-tree/:group_id([0-9a-zA-Z-]+)",component:function(){var e=Pe.create(),t=st(),n=Object(E.b)((function(){return{title:t.getStateKey("title")}})),a=I(),r=t.params;return Object(Fe.a)((function(){e.isEmpty&&e.refresh({params:{group_id:r.group_id}})})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(a,{title:n.title,router:t}),p.a.createElement(Ue,{loader:e}))}))}},{pathname:"/root/groups",component:function(){var e=We.create(),t=st();return Object(Fe.a)((function(){e.isEmpty&&e.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{style:{flex:1,height:"100%"}},p.a.createElement(je,{loader:e,renderItem:function(e,n,a){return p.a.createElement(He,{item:e,selectionId:n,router:t})}}))}))}},{pathname:"/root/music",component:function(e){e.self,e.children;var t=I(),n=st(),a=Je.create(),r=Qe.create();return Object(Fe.a)((function(){a.isEmpty&&a.refresh(),r.isEmpty&&r.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(t,{title:"\u97f3\u4e50",router:n},p.a.createElement("span",{onClick:function(e){return n.pushView("/root/music-songs")}},"\u5168\u90e8\u6b4c\u66f2")),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(je,{loader:a,renderItem:function(e,t,a){return p.a.createElement($e,{key:a,item:e,selectionId:t,router:n})}})))}))}},{pathname:"/root/music-songs",component:function(e){e.self,e.children;var t=I(),n=st(),a=Je.create(),r=Qe.create();return Object(Fe.a)((function(){a.isEmpty&&a.refresh(),r.isEmpty&&r.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(t,{title:"\u5168\u90e8\u6b4c\u66f2",router:n}),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(je,{loader:r,renderItem:function(e){return p.a.createElement(tt,{mode:"add",item:e,router:n})}})))}))}},{pathname:"/root/song-sheet/:id([0-9a-zA-Z-]+)",component:function(){var e=I(),t=st(),n=w(),a=et.create(),c=Object(E.b)((function(){return{title:t.getStateKey("title")}}));return Object(Fe.a)((function(){a.isEmpty&&a.refresh({params:{id:t.params.id}})})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:c.title,router:t}),p.a.createElement(T,{style:{justifyContent:"start"},type:"FaPlay",after:"\u64ad\u653e\u5168\u90e8",onClick:function(){n.music.setSheet(a.items),n.music.playMusic(a.items.length?a.items[0].id:"")}}),p.a.createElement("div",{className:"full-height"},p.a.createElement(je,{loader:a,renderItem:function(e,n,c){return p.a.createElement(tt,{mode:"delete",order:c,item:e,loader:a,router:t,remove:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.removeSheetSong({params:{id:t.id,ssid:t.ssid}});case 2:a.remove(c);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}})))}))}},{pathname:"/root/gallery",component:function(){var e=I(),t=st(),n=Pe.create(),a=nt.create();return Object(d.useEffect)((function(){n.isEmpty&&n.refresh({params:{group_id:"D5698713D07045ADBBF5F0D5D09E53E4"}}),a.isEmpty&&a.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(e,{title:"\u5168\u90e8",router:t}),p.a.createElement("div",{className:"full-height-auto",style:{display:"flex",flexDirection:"column",flex:1}},p.a.createElement("div",null,p.a.createElement(Ue,{loader:n,onQueryChange:function(e){a.refresh({query:e})}})),p.a.createElement("div",{style:{flex:1}},p.a.createElement(je,{loader:a,renderItem:function(e,n,a){return p.a.createElement(at,{item:e,router:t,selectionId:n})}}))))}))}},{pathname:"/root/my",component:function(){var e=w(),t=st(),n=e.userLoader;return Object(d.useEffect)((function(){n.isEmpty})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-height",onTouchStart:function(e){return e.preventDefault()},onTouchMove:function(e){return e.preventDefault()}},p.a.createElement("div",{className:"full-width",style:{padding:"0 20px"}},p.a.createElement("div",{className:"full-width-fix dd-common-centerXY",style:{width:35,height:35,margin:"10px 0"}},n.isLoading?p.a.createElement(g.b,null):p.a.createElement("img",{src:"/logo.jpg",style:{borderRadius:"50%"},alt:""})),p.a.createElement("div",{className:"full-width-auto",style:{paddingLeft:10}},p.a.createElement(xe,{loading:!e.app.isLogin,holder:p.a.createElement(g.c,{type:"ghost",inline:!0,size:"small",onClick:function(){t.pushView("/auth/login",null,{hideMenu:!0,showNavi:!0})}},"\u767b\u5f55")},n.isEmpty?"---":n.item.name)),p.a.createElement("div",{style:{color:"green"}},p.a.createElement(T,{type:"FaQrcode"})),p.a.createElement("div",{className:"full-width-fix",onClick:function(){return t.pushView("/root/user-setting",null)}},p.a.createElement(T,{type:"FaAngleRight"}))),p.a.createElement(g.u,null,p.a.createElement(g.d,null,p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"10px 50px"}},p.a.createElement("div",{style:{color:"#f97a90"}},p.a.createElement(T,{type:"FaStar"}),"\u6536\u85cf"),p.a.createElement("div",null,p.a.createElement(T,{type:"FaHistory",style:{color:"#14b2f7"}}),"\u5386\u53f2"),p.a.createElement("div",null,p.a.createElement(T,{type:"FaEllipsisV"}),"\u5176\u4ed6")),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"10px 50px"}},p.a.createElement("div",{onClick:function(){t.pushView("/root/secure",null,{title:"\u5b89\u5168"})}},p.a.createElement(T,{type:"FaLock",style:{color:"#236f07"}}),"\u5b89\u5168"),p.a.createElement("div",{onClick:function(){return window.location.reload()}},p.a.createElement(T,{type:"FaSyncAlt"}),"\u5237\u65b0"),p.a.createElement("div",{onClick:function(){t.pushView("/root/category",null,{hideMenu:!0})}},p.a.createElement(T,{type:"FaListAlt",style:{color:"#ff5b05"}}),"\u5206\u7c7b")),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"10px 50px"}},p.a.createElement("div",{onClick:function(){e.app.isLogin?t.pushView("/root/gallery",null,{hideMenu:!0}):t.pushView("/auth/login",null,{hideMenu:!0,showNavi:!0})},style:{color:"red"}},p.a.createElement(T,{type:"FaListAlt"}),"\u56fe\u7247")))))}))}},{pathname:"/root/shelf",component:function(){var e=st(),t=fe.bookShelfLoader,n=Object(E.b)((function(){return{loading:!1}}));return Object(Fe.a)((function(){t.isEmpty&&t.refresh()})),p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(je,{loader:t,renderEmpty:p.a.createElement(B,null,p.a.createElement(g.c,{type:"primary",inline:!0,onClick:function(){e.pushView("/auth/login",null,{hideMenu:!0,showNavi:!0})}},"\u767b\u5f55")),renderItem:function(t,a,r){return p.a.createElement(Me,{item:t,router:e,sectionId:a,toggleLoading:function(){return n.loading=!n.loading}})}}))}))}},{pathname:"/root/secure",component:function(){var e=st(),t=I();return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement(t,{title:"\u5b89\u5168",router:e}),p.a.createElement("div",{className:"full-height"},p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"15px 20px",backgroundColor:"white"}},"\u5bc6\u7801\u9501",p.a.createElement(g.p,{checked:fe.app.config.isLockerOpen,onChange:function(e){return fe.app.setLocker(e)}})),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"15px 20px",backgroundColor:"white"}},"\u8c03\u8bd5",p.a.createElement(g.p,{checked:fe.app.showDebug,onChange:function(e){return fe.app.toggleDebug()}})),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"15px 20px",backgroundColor:"white"}},"\u8bed\u97f3",p.a.createElement(g.p,{checked:fe.app.showSpeaker,onChange:function(e){return fe.app.toggleSpeaker()}})),p.a.createElement("div",{className:"dd-common-alignside",style:{padding:"15px 20px",backgroundColor:"white"}},"\u97f3\u4e50",p.a.createElement(g.p,{checked:fe.app.showMusic,onChange:function(e){return fe.app.toggleMusic()}}))))}))}},{pathname:"/root/todos",component:function(){var e=I(),t=st(),n=Xe.create(),a=Object(E.b)((function(){return{type:"1"}}));return Object(d.useEffect)((function(){n.isEmpty&&n.refresh({query:{type:a.type}})})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(e,{title:"TODO",router:t},p.a.createElement(V,{visible:fe.app.isLogin},p.a.createElement(T,{type:"FaPlus",style:{display:"inline-block"},onClick:function(){t.pushView("/root/add-todo")}}))),p.a.createElement("div",{className:"full-height-auto"},p.a.createElement(je,{loader:n,renderEmpty:p.a.createElement(B,null,p.a.createElement(g.c,{type:"primary",inline:!0,onClick:function(){t.pushView("/auth/login",null,{hideMenu:!0,showNavi:!0})}},"\u767b\u5f55")),renderItem:function(e,n,a){return p.a.createElement(Ke,{item:e,selectionId:n,router:t})}})),p.a.createElement("div",{className:"full-height-fix"},p.a.createElement(V,{visible:fe.app.isLogin},p.a.createElement(g.c,{type:"primary",onClick:function(){a.type="1"===a.type?"":"1",n.refresh({query:{type:a.type}})}},""===a.type?"\u9690\u85cf\u5df2\u5b8c\u6210":"\u663e\u793a\u5df2\u5b8c\u6210"))))}))}},{pathname:"/root/add-todo",component:Ge},{pathname:"/root/todo/:id([0-9a-zA-Z-]+)",component:Ge},{pathname:"/root/user-setting",component:function(){var e=w(),t=st(),n=I();return Object(d.useEffect)((function(){})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{className:"full-height"},p.a.createElement(n,{title:"\u8bbe\u7f6e",router:t}),p.a.createElement("div",null,p.a.createElement(g.h,{renderHeader:function(){return"\u8bbe\u7f6e"}},p.a.createElement(g.h.Item,null,p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement("span",null,"\u8d26\u53f7\u8bbe\u7f6e"),p.a.createElement(T,{type:"FaAngleRight"})))),p.a.createElement("div",{style:{padding:10}},p.a.createElement(g.c,{type:"primary",onClick:function(){e.app.setAccessToken(""),t.pushView("/")}},"\u9000\u51fa"))))}))}}];function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=p.a.createContext(null),lt=rt.map((function(e){var t=e.pathname,n={reg:x(t),params:[]};return x.parse(t).forEach((function(e){"object"===typeof e&&n.params.push(e.name)})),n}));function st(){return Object(d.useContext)(it)}function ut(e){var t=e.children,n=e.cb,a=(Object(O.a)(e,["children","cb"]),Object(d.useRef)(null)),r=Object(E.b)((function(){return{started:!1,top:0,left:0,offsetLeft:0,offsetTop:0}}));return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{ref:function(e){e&&(a.current=e,e.addEventListener("touchstart",(function(t){r.started=TextTrackCue,t=t.touches[0],r.left=t.clientX-e.offsetLeft,r.top=t.clientY-e.offsetTop,r.left<0&&(r.left=0),r.top<0&&(r.top=0),r.offsetLeft=0,r.offsetTop=0})),e.addEventListener("touchmove",(function(e){e.stopPropagation(),e.preventDefault(),e=e.touches[0],r.started&&(r.offsetLeft=e.clientX-r.left,r.offsetTop=e.clientY-r.top),n&&n(r)})),e.addEventListener("touchend",(function(e){r.started=!1})))}},t))}))}var mt=p.a.createContext(null);function dt(){var e=Object(d.useRef)(null),t=fe.music,n=t.type,a=t.event,r=U.a.getValue("music"),o=Object(E.b)((function(){return{url:"",showModePop:!1,top:r?r.top:210,left:r?r.left:100}})),c=null;return X.on(a.PLAY,(function(n){""!==n&&(o.url=fe.app.baseURL+t.getUrlById(n),setTimeout((function(){e.current&&e.current.play()}),100))})),X.on(a.PAUSE,(function(){e.current.pause()})),p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{style:{position:"fixed",zIndex:10,top:fe.app.showMusic?o.top:-100,left:fe.app.showMusic?o.left:-100},className:"full-width"},p.a.createElement(ut,{cb:function(e){o.left=Math.max(0,e.left+e.offsetLeft),o.top=Math.max(0,e.top+e.offsetTop),clearTimeout(c),c=null,c=setTimeout((function(){U.a.setValue("music",{left:o.left,top:o.top})}),100)}},p.a.createElement(T,{type:"FaArrowsAlt"})),p.a.createElement(g.l,{mask:!0,placement:"topLeft",visible:o.showModePop,overlay:[p.a.createElement(g.l.Item,{key:n.ONE,value:n.ONE},p.a.createElement(T,{type:"MdRepeatOne"}),"\u5355\u66f2"),p.a.createElement(g.l.Item,{key:n.RANDOM,value:n.RANDOM},p.a.createElement(T,{type:"MdShuffle"}),"\u968f\u673a"),p.a.createElement(g.l.Item,{key:n.LIST,value:n.LIST},p.a.createElement(T,{type:"MdTrendingFlat"}),"\u5217\u8868"),p.a.createElement(g.l.Item,{key:n.CIRCLE,value:n.CIRCLE},p.a.createElement(T,{type:"MdRepeat"}),"\u5faa\u73af")],onVisibleChange:function(e){o.showModePop=e},onSelect:function(e){t.setMode(e.props.value),o.showModePop=!1}},p.a.createElement("span",null,p.a.createElement(V,{visible:t.mode===n.RANDOM},p.a.createElement(T,{type:"MdShuffle"})),p.a.createElement(V,{visible:t.mode===n.ONE},p.a.createElement(T,{type:"MdRepeatOne"})),p.a.createElement(V,{visible:t.mode===n.LIST},p.a.createElement(T,{type:"MdTrendingFlat"})),p.a.createElement(V,{visible:t.mode===n.CIRCLE},p.a.createElement(T,{type:"MdRepeat"})))),p.a.createElement(T,{type:"MdSkipNext",onClick:function(){t.mode===n.RANDOM?t.playRandom():t.playNext()}}),p.a.createElement("audio",{ref:function(t){e.current=t},onCanPlay:function(){},onLoadedMetadata:function(){},onLoadedData:function(){},onProgress:function(){},onEnded:function(){t.mode===n.ONE&&e.current.play(),t.mode===n.RANDOM&&t.playRandom(),t.mode===n.LIST&&t.playNext(),t.mode===n.CIRCLE&&t.playNext()},src:o.url,controls:"controls",preload:"true"}))}))}var pt=p.a.createContext(null);function ft(e){var t=fe.debug,n=U.a.getValue("debug"),a=Object(E.b)((function(){return{top:n?n.top:300,left:n?n.left:0}})),r=null;return p.a.createElement(E.a,null,(function(){return p.a.createElement(V,{visible:fe.app.showDebug},p.a.createElement("div",{className:"full-height",style:{position:"fixed",color:"white",zIndex:10,width:300,height:150,top:a.top,left:a.left,padding:10,backgroundColor:"black",opacity:.5}},p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(ut,{cb:function(e){a.left=Math.max(0,e.left+e.offsetLeft),a.top=Math.max(0,e.top+e.offsetTop),clearTimeout(r),r=null,r=setTimeout((function(){U.a.setValue("debug",{left:a.left,top:a.top})}),100)}},p.a.createElement(T,{type:"FaArrowsAlt"})),p.a.createElement(T,{type:t.showMap?"FaCaretDown":"FaCaretRight",onClick:function(){t.toggleMap()}}),p.a.createElement("div",{className:"dd-common-alignside"},p.a.createElement(T,{type:"FaRegTrashAlt",onClick:function(){t.clear()}}),p.a.createElement(T,{type:"FaSyncAlt",onClick:function(){window.location.reload()}}))),p.a.createElement(V,{visible:t.showMap},p.a.createElement("div",{className:"full-height-auto"},t.maps.map((function(e,t){return p.a.createElement("p",{key:t},e.key,":",e.value)})))),p.a.createElement("div",{className:"full-height-auto"},t.messages.map((function(e,t){return p.a.createElement("p",{key:t},e)})))))}))}var ht=p.a.createContext(null);function gt(){var e=window.speechSynthesis,t=e.getVoices(),n=null;t.forEach((function(e){"zh-CN"===e.lang&&(n=e)}));var a,r=fe.speaker,o=Object(E.b)((function(){return{left:r.left,top:r.top,rate:r.rate,pitch:r.pitch}}));return p.a.createElement(E.a,null,(function(){return p.a.createElement(V,{visible:fe.app.showSpeaker},p.a.createElement("div",{style:{position:"fixed",zIndex:10,top:o.top,left:o.left,minWidth:300},className:"full-width"},p.a.createElement(ut,{cb:function(e){o.left=Math.max(0,e.left+e.offsetLeft),o.top=Math.max(0,e.top+e.offsetTop),clearTimeout(a),a=null,a=setTimeout((function(){r.store(o)}),100)}},p.a.createElement(T,{type:"FaArrowsAlt"})),p.a.createElement("div",{onClick:function(t){var a=new SpeechSynthesisUtterance("\u6d4b\u8bd5");a.onend=function(){console.log("speak end")},a.onerror=function(){console.log("speak error")},a.voice=n,a.pitch=o.pitch,a.rate=o.rate,e.speaking?console.log("is speaking"):e.speak(a)}},"\u6d4b\u8bd5"),p.a.createElement("div",{className:"full-width-auto"},p.a.createElement("div",{className:"full-width",style:{marginBottom:10}},p.a.createElement("span",null,"\u901f\u5ea6"),p.a.createElement("div",{className:"full-width-auto"},p.a.createElement(g.o,{min:.5,max:2,step:.1,value:o.rate,onChange:function(e){o.rate=e,r.store(o)}}))),p.a.createElement("div",{className:"full-width"},p.a.createElement("span",null,"\u58f0\u8c03"),p.a.createElement("div",{className:"full-width-auto"},p.a.createElement(g.o,{min:0,max:2,step:.1,value:o.pitch,onChange:function(e){o.pitch=e,r.store(o)}}))))))}))}n(227);var vt=function(e){var t=[{char:"1",name:"",className:""},{char:"2",name:"",className:"center"},{char:"3",name:"",className:""},{char:"4",name:"",className:""},{char:"5",name:"",className:"center"},{char:"6",name:"",className:""},{char:"7",name:"",className:""},{char:"8",name:"",className:"center"},{char:"9",name:"",className:""},{char:"",name:"\u6e05\u7a7a",className:""},{char:"0",name:"",className:"center"},{char:"x",name:"\u5220\u9664",className:""}];return p.a.createElement(E.a,null,(function(){return p.a.createElement("div",{style:{width:"100%",position:"relative",paddingTop:"100%",marginBottom:"35%"}},p.a.createElement("div",{className:"box",style:{position:"absolute",left:0,right:0,top:0,bottom:0}},t.map((function(t,n){return p.a.createElement("div",{key:n,className:["cell",t.className].join(" "),onClick:function(){return e.handler(t.char)}},t.name||t.char)}))))}))};n(228);function yt(){var e=Object(E.b)((function(){return{pin:[],animate:""}}));function t(t){"x"===t?e.pin.pop():""===t?e.pin=[]:(e.pin.push(t),e.pin.length>=fe.app.config.lockerLength&&(e.pin.join("")===fe.app.config.lockerPin?(e.animate="success",setTimeout((function(){fe.app.setLocked(!1)}),1e3)):(e.animate="fail",setTimeout((function(){e.animate="",e.pin=[]}),1e3))))}return p.a.createElement(E.a,null,(function(){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"}},p.a.createElement("div",{style:{flex:"0 0 0%",width:"100%"}},p.a.createElement(T,{type:"FaLock",style:{width:"100%",margin:"40px 0 40px 0",color:"green"}}),p.a.createElement("p",null,"\u8bf7\u8f93\u5165\u9501\u5b9a\u7801"),p.a.createElement("div",{className:e.animate,style:{display:"flex",flexDirection:"row",justifyContent:"center",width:"80%",margin:"auto"}},fe.app.config.lockerPin.split("").map((function(t,n){return n>=e.pin.length?p.a.createElement(T,{style:{margin:"0 8px"},key:n,type:"FaRegCircle"}):p.a.createElement(T,{style:{margin:"0 8px"},key:n,type:"FaCircle"})})))),p.a.createElement("div",{style:{flex:1,width:"70%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},p.a.createElement(vt,{handler:t}))))}))}var Et=function(e){var t=e.children,n=st();return p.a.createElement(E.a,null,(function(){return n.hideMenu||!n.history.location.pathname.startsWith("/root")?t:p.a.createElement(d.Fragment,null,p.a.createElement(g.q,{tintColor:"#33A3F4",unselectedTintColor:"#555",tabBarPosition:"bottom",barTintColor:"white"},te.menus.map((function(e){return p.a.createElement(g.q.Item,{title:e.big?"":e.title,key:e.name,icon:p.a.createElement(T,{style:e.big?{marginTop:-20,zIndex:2,fontSize:"3rem"}:{margin:3},type:e.icon}),selectedIcon:p.a.createElement(T,{style:{margin:3},type:e.icon}),selected:e.name===fe.app.selectedMenu,onPress:function(){fe.app.setMenu(e.name),n.pushView(e.path,null,{title:e.title,hideMenu:!!e.hideMenu})}},t)}))))}))};function bt(e){var t=w(),n=function(e){var t=Object(d.useState)((function(){var t={history:e,get params(){for(var t={},n=function(n){var a=lt[n],r=a.reg.exec(e.location.pathname);if(r)return a.params.forEach((function(e,n){t[e]=r[n+1]})),"break"},a=0;a<lt.length;a++){if("break"===n(a))break}return t},get hideMenu(){return!(!e.location.state||!e.location.state.hideMenu)},getStateKey:function(t){return e.location.state&&e.location.state[t]},back:function(){var n=e.location.state||{userClick:!0},a=n.userClick;n.login?t.backToRoot():a?t.history.goBack():t.backToRoot()},backToRoot:function(t,n){var a=(void 0).pathname,r=(void 0).search;e.push({pathname:a,search:r,state:ct({login:!0,userClick:!0},n)})},gotoLoginTarget:function(){},pushView:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;(a=a||{}).userClick=!0,a.hideMenu=!1!==a.hideMenu;var r="";for(var o in n)r+="".concat(o,"=").concat(n[o]);e.push({pathname:t,search:r,state:a})},replaceView:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;(a=a||{}).userClick=!0;var r="";for(var o in n)r+="".concat(o,"=").concat(n[o]);e.replace({pathname:t,search:r,state:a})}};return t}));return[Object(m.a)(t,1)[0],it]}(e.history),a=Object(m.a)(n,2),r=a[0],o=a[1],c=[M,F],i=Object(m.a)(c,2),l=i[0],s=i[1],u=[dt,mt],f=Object(m.a)(u,1)[0],h=[ft,pt],g=Object(m.a)(h,1)[0],y=[gt,ht],b=Object(m.a)(y,1)[0],k=e.location.pathname.split("/").pop();return t.app.selectedMenu!==k&&t.app.setMenu(k),p.a.createElement(o.Provider,{value:r},p.a.createElement(s.Provider,{value:l},p.a.createElement(E.a,null,(function(){return t.app.config.isLockerOpen&&t.app.config.isLockerLocked?p.a.createElement(yt,null):p.a.createElement(d.Fragment,null,p.a.createElement(f,null),p.a.createElement(g,null),p.a.createElement(b,null),p.a.createElement(Et,null,p.a.createElement(v.d,null,rt.map((function(e){return p.a.createElement(v.b,{key:e.pathname,path:e.pathname,component:e.component})})),p.a.createElement(v.b,{component:wt}))))}))))}function wt(){return p.a.createElement(v.a,{to:"/root/home"})}function kt(){return p.a.createElement(y.a,{basename:"/"},p.a.createElement(v.b,{path:"/*",component:bt}))}n(231);var xt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ot(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Nt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={hasError:!1,error:null,info:null,isLoading:!1,lastTS:Date.now(),isDesktop:!0},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("start-loading").style.display="none",document.getElementById("box").className="box-app",window.addEventListener("resize",(function(){document.getElementById("box").className="box-app",e.setState({isDeskTop:!0})})),document.addEventListener("visibilitychange",function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.hidden?fe.app.resetLeaveTS():!1===fe.app.config.isLockerLocked&&fe.app.setLocked(Date.now()-fe.app.leaveTS>fe.app.config.lockerSeconds);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return this.state.hasError?p.a.createElement(d.Fragment,null,p.a.createElement("div",null,"\u7a0b\u5e8f\u5d29\u6e83\u4e86,",p.a.createElement("div",{onClick:function(){e.setState({isLoading:!0},Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({isLoading:!1}),e.setState({hasError:!1},(function(){window.location.reload()}));case 2:case"end":return t.stop()}}),t)}))))}},"\u70b9\u6211\u91cd\u8bd5")),p.a.createElement(g.b,{toast:!0,text:"\u6b63\u5728\u5237\u65b0...",animating:this.state.isLoading})):this.state.isDesktop?p.a.createElement(d.Fragment,null,this.props.children,p.a.createElement(g.b,{toast:!0,text:"\u6b63\u5728\u5237\u65b0...",animating:this.state.isLoading})):p.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"\u7a0b\u5e8f\u6b63\u5728\u5f00\u53d1\u4e2d...")}}]),t}(p.a.Component);h.a.render(p.a.createElement(Nt,null,p.a.createElement((function(){var e=function(e){var t=Object(d.useState)(e);return[Object(m.a)(t,1)[0],b]}(fe),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(d.useEffect)((function(){n.app.isLogin&&n.lineLoader.isEmpty&&n.lineLoader.refresh()})),p.a.createElement(E.a,null,(function(){return n.app.isLogin&&n.lineLoader.isEmpty?p.a.createElement("div",{className:"dd-common-centerXY"},"\u9009\u62e9\u7ebf\u8def\u4e2d..."):p.a.createElement(d.Fragment,null,p.a.createElement(a.Provider,{value:n},p.a.createElement(kt,null)))}))}),null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/custom-sw.js");xt?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ot(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ot(t,e)}))}}()}},[[127,1,2]]]);
//# sourceMappingURL=main.72b6b30c.chunk.js.map